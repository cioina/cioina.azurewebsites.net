import{a as Wt,b as qn}from"./chunk-OBCT4ERS.js";import{a as Yn,b as Kn,c as Qt,d as jt}from"./chunk-S2U2ZL4M.js";import{a as Qn,b as jn,c as Wn,d as Jn,e as Hn,f as Gn}from"./chunk-KK2QBUQR.js";import{a as Le,b as ye}from"./chunk-VIUSHIUU.js";import{A as q,B as Vt,C as Ot,D as Pt,E as Ft,F as Ge,G as ne,H as Vn,I as On,J as Bt,d as xn,e as le,h as Mn,j as In,m as vt,n as bt,o as Mt,p as It,t as Nt,u as Dt,v as kt,w as Rt,x as Dn,y as kn,z as Rn}from"./chunk-HLPLMXCH.js";import"./chunk-NIQ32PZB.js";import"./chunk-UMZ7GJ75.js";import{a as Fn,b as Bn}from"./chunk-CI5GTGWX.js";import{a as Pn}from"./chunk-WVL4DOL4.js";import{a as Un}from"./chunk-MICY4TRS.js";import{b as ue,d as bn,e as ze,f as Ue,g as Ye,h as Ke,i as qe,j as Ze,k as ie,l as oe}from"./chunk-GDY42P5U.js";import{A as Ae,B as Qe,K as je,M as We,N as Je,O as He,R as Ee,S as Z,T as X,U as $,V as ee,W as te,l as Re,o as Ce,p as Ve,r as Oe,s as pe,t as Te,u as Pe,w as Fe,x as Be}from"./chunk-PWGDKQNX.js";import{$a as wn,Cb as O,E as An,Eb as P,Ib as W,Jb as J,Kb as H,Lb as Et,Mb as St,Ob as wt,Rb as G,Sb as U,Tb as Y,Ub as Nn,Vb as K,W as En,Wb as Lt,Xb as yt,Yb as xe,ab as xt,ac as Se,bb as ke,bc as we,cb as Ln,eb as yn,fb as vn,h as Cn,j as Tn,oa as Sn,pb as he,r as et,s as me}from"./chunk-O32X4I2H.js";import{$c as un,Ab as ce,Ac as ht,Bc as zt,Cc as Ct,Db as Gt,Ec as Yt,Fc as gn,Ga as f,Gc as T,Ha as u,Hc as p,Ib as I,Ic as V,Ja as sn,Jb as pn,Jc as y,L as rn,La as Ne,Lc as _n,Ma as cn,Mc as N,Nc as D,Ob as d,Oc as k,Pa as ge,Qa as mn,Sc as De,Tc as b,V as Ht,Vc as Tt,Wa as M,Wb as dn,Wc as fn,Xb as m,Zb as $e,Zc as At,_b as gt,a as re,ad as hn,b as ae,bd as x,cc as S,ea as de,ec as F,fa as Ie,fc as B,gc as Q,gd as be,ha as dt,hc as a,hd as j,ic as r,jc as h,kc as g,lc as _,ld as fe,na as an,nc as A,oa as ln,od as zn,q as Me,r as se,sc as C,ta as w,uc as c,vb as s,vc as _t,wc as ft,xc as Ut,yc as ut}from"./chunk-MQ3FWWKD.js";var Kt=(()=>{class t extends On{#e=w(Bt);#t=w(Mn);#n=w(In);#o=w(Tn);nzMessageService=w(ne);articleListConfig=this.#e.selectors.articleListConfig;ngrxOnStoreInit(){this.setState({articleList:[],tags:[],articleCount:0,errorResponse:null,currentArticle:null})}deleteArticle=this.effect(de(e=>(e.loading.set(!0),this.#t.deleteArticle(e.articleId).pipe(le({next:n=>{if(n>0){let i=this.selectors.articleList(),l=[];i.forEach(z=>{z.id!==e.articleId&&l.push(z)}),this.patchState({articleList:l})}else console.info(`Delete Article ID Failed: ${e.articleId}`)},error:n=>{be()?console.error(`Delete Article ID Failed with: ${e.articleId}`,n.error??n.message):console.warn(`Delete Article ID Failed with: ${e.articleId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));linkTags=this.effect(de(e=>(e.loading.set(!0),this.#t.linkTags(e.articleTags).pipe(le({next:n=>{if(n>=0){let i=this.selectors.articleList(),l=[];i.forEach(z=>{z.id!==e.articleTags.articleId||(z.tagList=e.articleTags.tags),l.push(z)}),this.patchState({articleList:l})}else console.info(`Link Tags Article ID Failed: ${e.articleTags.articleId}`)},error:n=>{be()?console.error(`Link Tags Article ID Failed: ${e.articleTags.articleId}`,n.error??n.message):console.warn(`Link Tags Article ID Failed: ${e.articleTags.articleId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));getArticleDetails=this.effect(de(e=>(e.loading.set(!0),this.#t.getArticleDetail(e.articleId).pipe(le({next:n=>{this.patchState({currentArticle:n.article})},error:n=>{this.patchState({currentArticle:null,errorResponse:n.error}),be()?console.error(`Get Article Details with: ${e.articleId}`,n.error??n.message):console.warn(`Get Article Details with: ${e.articleId}`,n.message)},finalize:()=>{e.loading.set(!1)}})))));createTag=this.effect(de(e=>(e.form.disable(),e.loading.set(!0),this.#n.createTag(e.form.getRawValue()).pipe(le(this.#r(e))))));editTag=this.effect(de(e=>(e.form.disable(),e.loading.set(!0),this.#n.editTag(e.tagId,e.form.getRawValue()).pipe(le(this.#r(e))))));deleteTag=this.effect(de(e=>(e.loading.set(!0),this.#n.deleteTag(e.tagId).pipe(le({next:n=>{if(n>0){let i=this.selectors.tags(),l=[];i.forEach(z=>{z.id!==n&&l.push(z)}),this.patchState({tags:l})}else console.info(`Delete Tags ID Failed : ${e.tagId}`)},error:n=>{this.patchState({errorResponse:n.error}),be()?console.error(`Delete Tag ID Failed with: ${e.tagId}`,n.error??n.message):console.warn(`Delete Tag ID Failed with: ${e.tagId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));#r=e=>({next:n=>{let i=this.selectors.tags(),l=[];l.push(n.tag),i.forEach(z=>{z.id!==n.tag.id&&l.push(z)}),this.patchState({tags:l}),this.selectors.errorResponse()&&this.patchState({errorResponse:null})},error:n=>{this.patchState({errorResponse:n.error})},finalize:()=>{e.form.enable(),e.loading.set(!1)}});getTags=this.effect(Ht(e=>(e.set(!0),this.#n.getTags(null).pipe(le(n=>{this.patchState({tags:n.tags})},n=>{be()?console.error("Get Tags Failed",n):console.warn(`Get Tags Failed: ${n.message}`)},()=>{e.set(!1)})))));createArticle=this.effect(de(e=>(e.form.disable(),e.loading.set(!0),this.#t.createArticle(ae(re({},e.form.getRawValue()),{published:e.published})).pipe(le(this.#a(e))))));editArticle=this.effect(de(e=>(e.form.disable(),e.loading.set(!0),this.#t.editArticle(e.articleId,ae(re({},e.form.getRawValue()),{published:e.published})).pipe(le(this.#a(e))))));#a=e=>({next:n=>{let i=this.selectors.articleList(),l=i.findIndex(E=>E.id===n.article.id),z=[];l<0?(z.push(n.article),i.forEach(E=>{z.push(E)})):i.forEach(E=>{E.id===n.article.id?z.push(n.article):z.push(E)}),this.patchState({articleList:z,currentArticle:n.article}),this.selectors.errorResponse()&&this.patchState({errorResponse:null})},error:n=>{this.patchState({errorResponse:n.error})},finalize:()=>{e.form.enable(),e.loading.set(!1)}});queryArticle=this.effect(dt(e=>{this.#e.patchState({articleListConfig:ae(re({},this.articleListConfig()),{currentPage:e.params.offset?this.articleListConfig().currentPage:1,filters:{limit:e.params.limit,offset:e.params.offset,tags:e.params.tags,published:e.params.published,createdAtAsc:e.params.createdAtAsc}})}),this.#i(e.loading)}));onOffsetChange=this.effect(dt(e=>{this.#e.patchState({articleListConfig:ae(re({},this.articleListConfig()),{currentPage:e.offset,filters:ae(re({},this.articleListConfig().filters),{offset:Number(this.articleListConfig().filters.limit)*(e.offset-1)})})}),this.#o.scrollToPosition([0,0]),this.#i(e.loading)}));onLimitChange=this.effect(dt(e=>{this.#e.patchState({articleListConfig:ae(re({},this.articleListConfig()),{currentPage:1,filters:ae(re({},this.articleListConfig().filters),{limit:e.limit,offset:0})})}),this.#o.scrollToPosition([0,0]),this.#i(e.loading)}));#i=this.effect(Ht(e=>(e.set(!0),(()=>{let n=this.articleListConfig()?.filters;return this.#t.getAllArticles({limit:n.limit,offset:n.offset,tags:n.tags,published:n.published,createdAtAsc:n.createdAtAsc})})().pipe(le(n=>{this.patchState({articleList:n.articles,articleCount:n.total})},n=>{be()?console.error("getAllArticles Failed",n):console.warn(`getAllArticles Failed: ${n.message}`),this.#e.openMessageDrawer(M(n.message))},()=>{e.set(!1)})))));resetErrorResponse=this.updater(e=>ae(re({},e),{currentArticle:null,errorResponse:null}));static \u0275fac=(()=>{let e;return function(i){return(e||(e=sn(t)))(i||t)}})();static \u0275prov=an({token:t,factory:t.\u0275fac})}return t})();var Ai=()=>({overflow:"auto",display:"block",width:"100%"}),$n=()=>({minRows:2,maxRows:5}),xi=()=>({minRows:15,maxRows:50}),Ei=()=>({standalone:!0});function Si(t,o){if(t&1){let e=A();g(0),a(1,"button",23),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.confirmApply())}),h(2,"nz-icon",24),p(3," Undo "),r(),_()}if(t&2){let e=c(2),n=T(8);s(),m("nzIcon",n)("disabled",e.isLoading())}}function wi(t,o){t&1&&d(0,Si,4,2,"ng-container",10)}function Li(t,o){if(t&1){let e=A();g(0),a(1,"button",25),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",26),p(3," Close "),r(),_()}if(t&2){let e=c(),n=T(6);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function yi(t,o){t&1&&(g(0),a(1,"h4",27),h(2,"nz-icon",28),r(),_())}function vi(t,o){t&1&&(g(0),a(1,"h5",29),p(2,"Do you want to close without changes?"),r(),_())}function bi(t,o){t&1&&(a(0,"nz-space",9),d(1,yi,3,0,"ng-container",10)(2,vi,3,0,"ng-container",10),r())}function Mi(t,o){t&1&&(g(0),a(1,"h4",30),h(2,"nz-icon",28),r(),_())}function Ii(t,o){t&1&&(g(0),a(1,"h5",29),p(2,"Do you want to undo all changes?"),r(),_())}function Ni(t,o){t&1&&(a(0,"nz-space",9),d(1,Mi,3,0,"ng-container",10)(2,Ii,3,0,"ng-container",10),r())}function Di(t,o){if(t&1){let e=A();g(0),a(1,"nz-switch",31),k("ngModelChange",function(i){f(e);let l=c();return D(l.published,i)||(l.published=i),u(i)}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.published),m("ngModelOptions",b(2,Ei))}}function ki(t,o){if(t&1){let e=A();g(0),a(1,"button",32),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),p(2," Submit "),r(),_()}if(t&2){let e=c(),n=T(17);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.articleForm.valid)}}function Ri(t,o){if(t&1){let e=A();g(0),a(1,"button",25),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),p(2," Reset "),r(),_()}if(t&2){let e=c(),n=T(19);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Vi(t,o){t&1&&(g(0),a(1,"h4",30),h(2,"nz-icon",28),r(),_())}function Oi(t,o){t&1&&(g(0),a(1,"h5",29),p(2,"Do you want to submit form?"),r(),_())}function Pi(t,o){t&1&&(a(0,"nz-space",9),d(1,Vi,3,0,"ng-container",10)(2,Oi,3,0,"ng-container",10),r())}function Fi(t,o){t&1&&(g(0),a(1,"h4",27),h(2,"nz-icon",28),r(),_())}function Bi(t,o){t&1&&(g(0),a(1,"h5",29),p(2,"Do you want to reset form?"),r(),_())}function Qi(t,o){t&1&&(a(0,"nz-space",9),d(1,Fi,3,0,"ng-container",10)(2,Bi,3,0,"ng-container",10),r())}function ji(t,o){t&1&&p(0," Please enter slug. ")}function Wi(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The slug must be at least ",e.MinTitleLength," characters long. ")}}function Ji(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The slug must be at most ",e.MaxTitleLength," characters long. ")}}function Hi(t,o){if(t&1&&d(0,ji,1,0)(1,Wi,1,1)(2,Ji,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function Gi(t,o){t&1&&p(0," Please enter title. ")}function Ui(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The title must be at least ",e.MinTitleLength," characters long. ")}}function Yi(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The title must be at most ",e.MaxTitleLength," characters long. ")}}function Ki(t,o){if(t&1&&d(0,Gi,1,0)(1,Ui,1,1)(2,Yi,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function qi(t,o){t&1&&p(0," Please enter description. ")}function Zi(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The description must be at least ",e.MinDescriptionLength," characters long. ")}}function Xi(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The description must be at most ",e.MaxDescriptionLength," characters long. ")}}function $i(t,o){if(t&1&&d(0,qi,1,0)(1,Zi,1,1)(2,Xi,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}var ai=(()=>{class t{article;currentArticle;errorResponse;nzMessageService=w(ne);drawerRef=w(ue);published=!1;atLeastOneTry=!1;isSubmited=!1;changeDetectorRef=w(j);messageId=null;MinTitleLength=2;MaxTitleLength=320;MinDescriptionLength=2;MaxDescriptionLength=2e5;isLoading=M(!0);injector=w(Ne);titleValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>320)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};descriptionValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>2e5)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};articleForm=new Oe({slug:new pe("",{nonNullable:!0,validators:[this.titleValidator]}),title:new pe("",{nonNullable:!0,validators:[this.titleValidator]}),description:new pe("",{nonNullable:!0,validators:[this.descriptionValidator]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}patchArticle(e){this.articleForm.patchValue(e),this.published=e.published}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.article&&this.patchArticle(this.article),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.isSubmited=!1,e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&this.isSubmited&&(this.removeMessageService(),this.drawerRef.close(!0))}),this.isLoading.set(!1)}submitForm(){this.isLoading()||(this.setMessageService(),this.atLeastOneTry=!0,this.isSubmited=!0,this.article?this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published,articleId:this.article.id}):this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published}))}resetForm(){this.articleForm.reset(),this.articleForm.controls.slug.markAsPristine(),this.articleForm.controls.slug.updateValueAndValidity(),this.articleForm.controls.title.markAsPristine(),this.articleForm.controls.title.updateValueAndValidity(),this.articleForm.controls.description.markAsPristine(),this.articleForm.controls.description.updateValueAndValidity(),this.published=!1,this.changeDetectorRef.markForCheck()}confirmClose(){this.atLeastOneTry&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}confirmApply(){this.article&&(this.resetForm(),this.patchArticle(this.article))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing-tags-edit"]],inputs:{article:"article",currentArticle:"currentArticle",errorResponse:"errorResponse"},decls:45,vars:20,consts:[["closeTpl",""],["applyTpl",""],["submitTpl",""],["resetTpl",""],["slugErrorTpl",""],["titleErrorTpl",""],["descriptionErrorTpl",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],[3,"nzBodyStyle"],[3,"errorResponse"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],["nz-form","",3,"formGroup"],["nzFor","slug","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","slug","id","slug","placeholder","Enter article slug",3,"nzAutosize"],["nzFor","title","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","title","id","title","placeholder","Enter article title",3,"nzAutosize"],["nzFor","description","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","description","id","description","placeholder","Enter article description",3,"nzAutosize"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","disabled"],["nzType","undo"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzType","close"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Published","nzUnCheckedChildren","Unpublished",3,"ngModelChange","ngModel","ngModelOptions"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"]],template:function(n,i){if(n&1&&(a(0,"div",7)(1,"div",8)(2,"nz-space",9),d(3,wi,1,0,"ng-container")(4,Li,4,3,"ng-container",10),r(),d(5,bi,3,0,"ng-template",null,0,x)(7,Ni,3,0,"ng-template",null,1,x),r()(),a(9,"nz-card",11)(10,"div",7)(11,"div",8)(12,"nz-space",9),d(13,Di,2,3,"ng-container",10)(14,ki,3,3,"ng-container",10)(15,Ri,3,3,"ng-container",10),r(),d(16,Pi,3,0,"ng-template",null,2,x)(18,Qi,3,0,"ng-template",null,3,x),r()(),h(20,"app-form-errors",12),a(21,"div",13)(22,"div",14)(23,"form",15)(24,"nz-form-item")(25,"nz-form-label",16),p(26,"Slug"),r(),a(27,"nz-form-control",17),h(28,"textarea",18),r(),d(29,Hi,3,3,"ng-template",null,4,x),r(),a(31,"nz-form-item")(32,"nz-form-label",19),p(33,"Title"),r(),a(34,"nz-form-control",17),h(35,"textarea",20),r(),d(36,Ki,3,3,"ng-template",null,5,x),r(),a(38,"nz-form-item")(39,"nz-form-label",21),p(40,"Description"),r(),a(41,"nz-form-control",17),h(42,"textarea",22),r(),d(43,$i,3,3,"ng-template",null,6,x),r()()()()()),n&2){let l=T(30),z=T(37),E=T(44);s(3),S(i.article?3:-1),s(6),m("nzBodyStyle",b(16,Ai)),s(11),m("errorResponse",i.errorResponse),s(3),m("formGroup",i.articleForm),s(2),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(17,$n)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",z),s(),m("nzAutosize",b(18,$n)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",E),s(),m("nzAutosize",b(19,xi))}},dependencies:[Qe,Pe,Re,Ce,Ve,Fe,Be,Ge,Ae,Te,K,G,U,Y,we,Se,Ze,ee,$,Ye,Ue,qe,Ke,ze,xe,te,P,O,Ee,He,Je,oe,ie,H,J,W,q,ye,Le,X,Z],encapsulation:2,changeDetection:0})}return t})();var ro=(t,o,e)=>[t,o,e];function ao(t,o){t&1&&(a(0,"div",11),h(1,"nz-spin",13),r())}function lo(t,o){if(t&1){let e=A();a(0,"button",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickEditTagsLink(i))}),h(1,"nz-icon",17),r()}if(t&2){let e=c().$implicit,n=c();m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===1)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==1))}}function so(t,o){if(t&1){let e=A();a(0,"button",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickMonacoEditorArticleLink(i))}),h(1,"nz-icon",18),r()}if(t&2){let e=c().$implicit,n=c();m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===4)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==4))}}function co(t,o){if(t&1){let e=A();a(0,"button",19),h(1,"nz-icon",20),r(),a(2,"nz-dropdown-menu",null,10)(4,"ul",21)(5,"li",22)(6,"button",23),C("nzOnConfirm",function(){f(e);let i=c().$implicit,l=c();return u(l.confirmDeleteArticle(i))}),p(7," Delete Article "),r()()()()}if(t&2){let e=T(3),n=c().$implicit,i=T(8),l=c();m("nzLoading",l.routerLinkLoadingId()===n.id&&l.loadingIndex===2)("disabled",l.isRouterLinkLoading()&&(l.routerLinkLoadingId()!==n.id||l.loadingIndex!==2))("nzDropdownMenu",e),s(6),m("disabled",l.isRouterLinkLoading()&&(l.routerLinkLoadingId()!==n.id||l.loadingIndex!==2)||l.routerLinkLoadingId()===n.id&&l.loadingIndex===2)("nzIcon",i)("nzOkDanger",!0)}}function mo(t,o){t&1&&(g(0),a(1,"h4",26),h(2,"nz-icon",27),r(),_())}function po(t,o){t&1&&(g(0),a(1,"h5",28),p(2,"Do you want to delete article?"),r(),_())}function go(t,o){t&1&&(a(0,"nz-space",24),d(1,mo,3,0,"ng-container",25)(2,po,3,0,"ng-container",25),r())}function _o(t,o){if(t&1){let e=A();a(0,"a",29),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickArticleLink(i))}),p(1),r()}if(t&2){let e=c().$implicit;s(),y(" ",e.title," ")}}function fo(t,o){if(t&1&&p(0),t&2){let e=c(2).$implicit;y(" ",e.description," ")}}function uo(t,o){if(t&1){let e=A();d(0,fo,1,1),a(1,"a",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickEditArticleLink(i))}),p(2,"Edit Article"),h(3,"nz-icon",30),r()}if(t&2){let e=c().$implicit,n=c();S(e.published?0:-1),s(),m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===3)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==3))}}function ho(t,o){if(t&1&&(a(0,"div",31)(1,"div",32)(2,"h5",33),p(3),At(4,"date"),r()()(),a(5,"div",34)(6,"div",35),h(7,"img",36),r()()),t&2){let e=c().$implicit,n=c();s(),Ut("id",e.slug),s(2),V(un(4,7,e.createdAt,"MMMM d, yyyy")),s(4),ut("nzSrc","https://picsum.photos/id/",e.id,"/300/200.jpg"),Ut("alt",e.title),m("nzFallback",n.fallback)("nzPlaceholder",n.fallback)}}function zo(t,o){if(t&1&&(a(0,"nz-list-item",14),d(1,lo,2,2,"ng-template",null,3,x)(3,so,2,2,"ng-template",null,4,x)(5,co,8,6,"ng-template",null,5,x)(7,go,3,0,"ng-template",null,6,x),a(9,"nz-list-item-meta",15),d(10,_o,2,1,"ng-template",null,7,x)(12,uo,4,3,"ng-template",null,8,x),r(),d(14,ho,8,10,"ng-template",null,9,x),r()),t&2){let e=T(2),n=T(4),i=T(6),l=T(11),z=T(13),E=T(15);m("nzActions",fn(4,ro,e,n,i))("nzExtra",E),s(9),m("nzTitle",l)("nzDescription",z)}}function Co(t,o){if(t&1&&(a(0,"div",31)(1,"div",35)(2,"h5",28),p(3),r()()()),t&2){let e=o,n=c(2);s(3),_n(" ",n.articleListConfig().filters.limit*(n.articleListConfig().currentPage-1)+1," - ",n.articleListConfig().filters.limit*n.articleListConfig().currentPage>e?e:n.articleListConfig().filters.limit*n.articleListConfig().currentPage," of ",e," records ")}}function To(t,o){if(t&1&&d(0,Co,4,3,"div",31),t&2){let e,n=c();S((e=n.articlesCount())?0:-1,e)}}function Ao(t,o){if(t&1){let e=A();a(0,"nz-pagination",37),C("nzPageSizeChange",function(i){f(e);let l=c();return u(l.setPageSize(i))})("nzPageIndexChange",function(i){f(e);let l=c();return u(l.setPage(i))}),r()}if(t&2){let e=c();m("nzShowSizeChanger",!0)("nzPageSize",e.articleListConfig().filters.limit)("nzPageIndex",e.articleListConfig().currentPage)("nzTotal",e.articlesCount())}}var si=(()=>{class t{isRouterLinkLoading;routerLinkLoadingId;articleList;articlesCount;isLoading;articleListConfig;oldLimit;nzEditArticle=new ge;nzMonacoEditArticle=new ge;nzDeleteArticle=new ge;nzEditTags=new ge;nzSetPage=new ge;nzSetPageSize=new ge;router=w(An);changeDetectorRef=w(j);loadingIndex=0;fallback="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==";setLoading(e,n){this.loadingIndex=n,this.isRouterLinkLoading.set(!0),this.routerLinkLoadingId.set(e.id),this.changeDetectorRef.markForCheck()}confirmDeleteArticle(e){this.setLoading(e,2),this.nzDeleteArticle.emit(e)}clickArticleLink(e){this.setLoading(e,0),setTimeout(()=>{this.router.navigate(["articles",e.slug])})}clickEditArticleLink(e){this.setLoading(e,3),this.nzEditArticle.emit(e)}clickMonacoEditorArticleLink(e){this.setLoading(e,4),this.nzMonacoEditArticle.emit(e)}clickEditTagsLink(e){this.setLoading(e,1),this.nzEditTags.emit(e)}setPage(e){this.oldLimit()===this.articleListConfig().filters.limit?this.nzSetPage.emit(e):this.oldLimit.set(this.articleListConfig().filters.limit)}setPageSize(e){this.articleListConfig().currentPage>Math.ceil(this.articlesCount()/e)?this.oldLimit.set(this.articleListConfig().filters.limit):this.oldLimit.set(e),this.nzSetPageSize.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-articles"]],inputs:{isRouterLinkLoading:"isRouterLinkLoading",routerLinkLoadingId:"routerLinkLoadingId",articleList:"articleList",articlesCount:"articlesCount",isLoading:"isLoading",articleListConfig:"articleListConfig",oldLimit:"oldLimit"},outputs:{nzEditArticle:"nzEditArticle",nzMonacoEditArticle:"nzMonacoEditArticle",nzDeleteArticle:"nzDeleteArticle",nzEditTags:"nzEditTags",nzSetPage:"nzSetPage",nzSetPageSize:"nzSetPageSize"},decls:8,vars:7,consts:[["item",""],["footer",""],["pagination",""],["linkTagsAction",""],["monacoEditorAction",""],["deleteArticleAction",""],["closeTpl",""],["nzTitle",""],["nzDescription",""],["extra",""],["menu1","nzDropdownMenu"],[1,"app-article-preview"],[3,"hidden","nzDataSource","nzItemLayout","nzRenderItem","nzPagination","nzFooter"],["nzTip","Loading posts..."],[3,"nzActions","nzExtra"],[3,"nzTitle","nzDescription"],["nz-button","","nzType","link",3,"click","nzLoading","disabled"],["nzType","tag","nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTitle","Link Tags"],["nzType","code","nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTitle","Monaco Editor"],["nz-button","","nzType","link","nz-dropdown","",3,"nzLoading","disabled","nzDropdownMenu"],["nzType","delete"],["nz-menu",""],["nz-menu-item",""],["nz-button","","nzDanger","true","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon","nzOkDanger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],[3,"click"],["nzType","edit"],["nz-row","","nzJustify","end"],["nz-col","",3,"id"],["nz-typography","","nzType","secondary"],["nz-row",""],["nz-col",""],["nz-image","","width","300px","height","200px",3,"nzSrc","nzFallback","nzPlaceholder","alt"],[3,"nzPageSizeChange","nzPageIndexChange","nzShowSizeChanger","nzPageSize","nzPageIndex","nzTotal"]],template:function(n,i){if(n&1&&(d(0,ao,2,0,"div",11),a(1,"nz-list",12),d(2,zo,16,8,"ng-template",null,0,x)(4,To,1,1,"ng-template",null,1,x)(6,Ao,1,4,"ng-template",null,2,x),r()),n&2){let l=T(3),z=T(5),E=T(7);S(i.isLoading()?0:-1),s(),m("hidden",i.isLoading())("nzDataSource",i.articleList())("nzItemLayout","vertical")("nzRenderItem",l)("nzPagination",E)("nzFooter",z)}},dependencies:[Cn,kn,Dn,te,ee,$,Gn,Jn,Hn,Wn,H,J,W,xe,wt,St,Et,yt,Lt,q,Rn,Kn,Yn,K,G,U,Y,P,O,oe,ie,We,je,X,Z],encapsulation:2,changeDetection:0})}return t})();var So=["*"],ci="collapse",Jt=(()=>{let t,o=[],e=[],n,i=[],l=[],z,E=[],on=[];return class $t{static{let v=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[ke()],n=[ke()],z=[ke()],Me(null,null,t,{kind:"field",name:"nzAccordion",static:!1,private:!1,access:{has:L=>"nzAccordion"in L,get:L=>L.nzAccordion,set:(L,R)=>{L.nzAccordion=R}},metadata:v},o,e),Me(null,null,n,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:L=>"nzBordered"in L,get:L=>L.nzBordered,set:(L,R)=>{L.nzBordered=R}},metadata:v},i,l),Me(null,null,z,{kind:"field",name:"nzGhost",static:!1,private:!1,access:{has:L=>"nzGhost"in L,get:L=>L.nzGhost,set:(L,R)=>{L.nzGhost=R}},metadata:v},E,on),v&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})}nzConfigService;cdr;directionality;destroy$;_nzModuleName=ci;nzAccordion=se(this,o,!1);nzBordered=(se(this,e),se(this,i,!0));nzGhost=(se(this,l),se(this,E,!1));nzExpandIconPosition=(se(this,on),"start");dir="ltr";listOfNzCollapsePanelComponent=[];constructor(v,L,R,Ti){this.nzConfigService=v,this.cdr=L,this.directionality=R,this.destroy$=Ti,this.nzConfigService.getConfigChangeEventForComponent(ci).pipe(Ie(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe(Ie(this.destroy$)).subscribe(v=>{this.dir=v,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(v){this.listOfNzCollapsePanelComponent.push(v)}removePanel(v){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(v),1)}click(v){this.nzAccordion&&!v.nzActive&&this.listOfNzCollapsePanelComponent.filter(L=>L!==v).forEach(L=>{L.nzActive&&(L.nzActive=!1,L.nzActiveChange.emit(L.nzActive),L.markForCheck())}),v.nzActive=!v.nzActive,v.nzActiveChange.emit(v.nzActive)}static \u0275fac=function(L){return new(L||$t)(ce(xt),ce(j),ce(En),ce(he))};static \u0275cmp=I({type:$t,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(L,R){L&2&&$e("ant-collapse-icon-position-start",R.nzExpandIconPosition==="start")("ant-collapse-icon-position-end",R.nzExpandIconPosition==="end")("ant-collapse-ghost",R.nzGhost)("ant-collapse-borderless",!R.nzBordered)("ant-collapse-rtl",R.dir==="rtl")},inputs:{nzAccordion:[2,"nzAccordion","nzAccordion",fe],nzBordered:[2,"nzBordered","nzBordered",fe],nzGhost:[2,"nzGhost","nzGhost",fe],nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[De([he])],ngContentSelectors:So,decls:1,vars:0,template:function(L,R){L&1&&(_t(),ft(0))},encapsulation:2,changeDetection:0})}})();var Lo=["collapseHeader"],yo=["*"];function vo(t,o){if(t&1&&(g(0),h(1,"nz-icon",7),_()),t&2){let e=o.$implicit,n=c(2);s(),m("nzType",e||"right")("nzRotate",n.nzActive?90:0)}}function bo(t,o){if(t&1&&(a(0,"div"),d(1,vo,2,2,"ng-container",3),r()),t&2){let e=c();s(),m("nzStringTemplateOutlet",e.nzExpandedIcon)}}function Mo(t,o){if(t&1&&(g(0),p(1),_()),t&2){let e=c();s(),V(e.nzHeader)}}function Io(t,o){if(t&1&&(g(0),p(1),_()),t&2){let e=c(2);s(),V(e.nzExtra)}}function No(t,o){if(t&1&&(a(0,"div",4),d(1,Io,2,1,"ng-container",3),r()),t&2){let e=c();s(),m("nzStringTemplateOutlet",e.nzExtra)}}var mi="collapsePanel",pi=(()=>{let t,o=[],e=[];return class en{static{let i=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[ke()],Me(null,null,t,{kind:"field",name:"nzShowArrow",static:!1,private:!1,access:{has:l=>"nzShowArrow"in l,get:l=>l.nzShowArrow,set:(l,z)=>{l.nzShowArrow=z}},metadata:i},o,e),i&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})}nzConfigService;ngZone;cdr;destroy$;_nzModuleName=mi;nzActive=!1;nzDisabled=!1;nzShowArrow=se(this,o,!0);nzExtra=se(this,e);nzHeader;nzExpandedIcon;nzActiveChange=new ge;collapseHeader;markForCheck(){this.cdr.markForCheck()}nzCollapseComponent=w(Jt,{host:!0});noAnimation=w(Ln,{optional:!0});constructor(i,l,z,E){this.nzConfigService=i,this.ngZone=l,this.cdr=z,this.destroy$=E,this.nzConfigService.getConfigChangeEventForComponent(mi).pipe(Ie(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),wn(this.collapseHeader.nativeElement,"click").pipe(rn(()=>!this.nzDisabled),Ie(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})})}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static \u0275fac=function(l){return new(l||en)(ce(xt),ce(mn),ce(j),ce(he))};static \u0275cmp=I({type:en,selectors:[["nz-collapse-panel"]],viewQuery:function(l,z){if(l&1&&ht(Lo,7),l&2){let E;zt(E=Ct())&&(z.collapseHeader=E.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(l,z){l&2&&$e("ant-collapse-no-arrow",!z.nzShowArrow)("ant-collapse-item-active",z.nzActive)("ant-collapse-item-disabled",z.nzDisabled)},inputs:{nzActive:[2,"nzActive","nzActive",fe],nzDisabled:[2,"nzDisabled","nzDisabled",fe],nzShowArrow:[2,"nzShowArrow","nzShowArrow",fe],nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[De([he])],ngContentSelectors:yo,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],[1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(l,z){l&1&&(_t(),a(0,"div",1,0),d(2,bo,2,1,"div"),a(3,"span",2),d(4,Mo,2,1,"ng-container",3),r(),d(5,No,2,1,"div",4),r(),a(6,"div",5)(7,"div",6),ft(8),r()()),l&2&&(dn("aria-expanded",z.nzActive),s(2),S(z.nzShowArrow?2:-1),s(2),m("nzStringTemplateOutlet",z.nzHeader),s(),S(z.nzExtra?5:-1),s(),$e("ant-collapse-content-active",z.nzActive),m("@.disabled",!!(z.noAnimation!=null&&z.noAnimation.nzNoAnimation))("@collapseMotion",z.nzActive?"expanded":"hidden"))},dependencies:[vn,yn,P,O],encapsulation:2,data:{animation:[Sn]},changeDetection:0})}})();var di=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=pn({type:t});static \u0275inj=ln({})}return t})();var ko=()=>({overflow:"auto",display:"block",width:"100%"}),gi=()=>({minRows:2,maxRows:2}),Ro=()=>({standalone:!0});function Vo(t,o){if(t&1){let e=A();g(0),a(1,"button",23),C("click",function(){f(e);let i=c();return u(i.resizeEditor())}),h(2,"nz-icon",24),p(3," Resize "),r(),_()}if(t&2){let e=c();s(),m("disabled",e.loading)}}function Oo(t,o){if(t&1){let e=A();g(0),a(1,"button",25),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.confirmApply())}),h(2,"nz-icon",26),p(3," Undo "),r(),_()}if(t&2){let e=c(2),n=T(9);s(),m("nzIcon",n)("disabled",e.isLoading())}}function Po(t,o){t&1&&d(0,Oo,4,2,"ng-container",9)}function Fo(t,o){if(t&1){let e=A();g(0),a(1,"button",27),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",28),p(3," Close "),r(),_()}if(t&2){let e=c(),n=T(7);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Bo(t,o){t&1&&(g(0),a(1,"h4",29),h(2,"nz-icon",30),r(),_())}function Qo(t,o){t&1&&(g(0),a(1,"h5",31),p(2,"Do you want to close without changes?"),r(),_())}function jo(t,o){t&1&&(a(0,"nz-space",8),d(1,Bo,3,0,"ng-container",9)(2,Qo,3,0,"ng-container",9),r())}function Wo(t,o){t&1&&(g(0),a(1,"h4",32),h(2,"nz-icon",30),r(),_())}function Jo(t,o){t&1&&(g(0),a(1,"h5",31),p(2,"Do you want to undo all changes?"),r(),_())}function Ho(t,o){t&1&&(a(0,"nz-space",8),d(1,Wo,3,0,"ng-container",9)(2,Jo,3,0,"ng-container",9),r())}function Go(t,o){if(t&1){let e=A();g(0),a(1,"nz-switch",33),k("ngModelChange",function(i){f(e);let l=c();return D(l.published,i)||(l.published=i),u(i)}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.published),m("ngModelOptions",b(2,Ro))}}function Uo(t,o){if(t&1){let e=A();g(0),a(1,"button",34),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),p(2," Submit "),r(),_()}if(t&2){let e=c(),n=T(25);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.articleForm.valid)}}function Yo(t,o){if(t&1){let e=A();g(0),a(1,"button",27),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),p(2," Reset "),r(),_()}if(t&2){let e=c(),n=T(27);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Ko(t,o){t&1&&(g(0),a(1,"h4",32),h(2,"nz-icon",30),r(),_())}function qo(t,o){t&1&&(g(0),a(1,"h5",31),p(2,"Do you want to submit form?"),r(),_())}function Zo(t,o){t&1&&(a(0,"nz-space",8),d(1,Ko,3,0,"ng-container",9)(2,qo,3,0,"ng-container",9),r())}function Xo(t,o){t&1&&(g(0),a(1,"h4",29),h(2,"nz-icon",30),r(),_())}function $o(t,o){t&1&&(g(0),a(1,"h5",31),p(2,"Do you want to reset form?"),r(),_())}function er(t,o){t&1&&(a(0,"nz-space",8),d(1,Xo,3,0,"ng-container",9)(2,$o,3,0,"ng-container",9),r())}function tr(t,o){t&1&&p(0," Please enter slug. ")}function nr(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The slug must be at least ",e.MinTitleLength," characters long. ")}}function ir(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The slug must be at most ",e.MaxTitleLength," characters long. ")}}function or(t,o){if(t&1&&d(0,tr,1,0)(1,nr,1,1)(2,ir,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function rr(t,o){t&1&&p(0," Please enter title. ")}function ar(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The title must be at least ",e.MinTitleLength," characters long. ")}}function lr(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The title must be at most ",e.MaxTitleLength," characters long. ")}}function sr(t,o){if(t&1&&d(0,rr,1,0)(1,ar,1,1)(2,lr,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}var _i=(()=>{class t{editorComponent;article;currentArticle;errorResponse;windowWidth;windowHeight;editor;loading=!0;nzMessageService=w(ne);drawerRef=w(ue);published=!1;atLeastOneTry=!1;isSubmited=!1;changeDetectorRef=w(j);messageId=null;MinTitleLength=2;MaxTitleLength=320;isLoading=M(!0);injector=w(Ne);titleValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>320)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};articleForm=new Oe({slug:new pe("",{nonNullable:!0,validators:[this.titleValidator]}),title:new pe("",{nonNullable:!0,validators:[this.titleValidator]}),description:new pe("",{nonNullable:!0,validators:[]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}patchArticle(e){this.articleForm.patchValue(e),this.published=e.published}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.patchArticle(this.article),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.isSubmited=!1,e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&this.isSubmited&&(this.removeMessageService(),this.drawerRef.close(!0))}),this.isLoading.set(!1)}submitForm(){if(this.isLoading())return;this.setMessageService(),this.atLeastOneTry=!0,this.isSubmited=!0;let n=this.editor.getModel().getValue();this.articleForm.controls.description.setValue(n),this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published,articleId:this.article.id})}resetForm(){this.articleForm.reset(),this.articleForm.controls.slug.markAsPristine(),this.articleForm.controls.slug.updateValueAndValidity(),this.articleForm.controls.title.markAsPristine(),this.articleForm.controls.title.updateValueAndValidity(),this.articleForm.controls.description.markAsPristine(),this.articleForm.controls.description.updateValueAndValidity(),this.editor.getModel().setValue(""),this.published=!1,this.changeDetectorRef.markForCheck()}confirmClose(){this.atLeastOneTry&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}confirmApply(){this.resetForm(),this.patchArticle(this.article),this.editor.getModel().setValue(this.article.description)}onEditorInit(e){this.editor=e,this.editor.setModel(monaco.editor.createModel(this.article.description,"markdown")),this.resizeEditor(),this.loading=!1}resizeEditor(){this.editor.layout({width:this.windowWidth()-110,height:this.windowHeight()-550>0?this.windowHeight()-350:250})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing-tags-edit"]],viewQuery:function(n,i){if(n&1&&ht(Wt,5),n&2){let l;zt(l=Ct())&&(i.editorComponent=l.first)}},inputs:{article:"article",currentArticle:"currentArticle",errorResponse:"errorResponse",windowWidth:"windowWidth",windowHeight:"windowHeight"},decls:46,vars:20,consts:[["closeTpl",""],["applyTpl",""],["submitTpl",""],["resetTpl",""],["slugErrorTpl",""],["titleErrorTpl",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],[3,"nzBodyStyle"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],[3,"errorResponse"],["nz-form","",3,"formGroup"],[3,"nzActive","nzDisabled"],["nzFor","slug","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","slug","id","slug","placeholder","Enter article slug",3,"nzAutosize"],["nzFor","title","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","title","id","title","placeholder","Enter article title",3,"nzAutosize"],["nzRequired","",3,"nzSpan"],[3,"nzEditorInitialized","nzLoading","nzFullControl"],["nz-button","","nzType","primary","nzShape","round",3,"click","disabled"],["nzType","border-outer"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","disabled"],["nzType","undo"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzType","close"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Published","nzUnCheckedChildren","Unpublished",3,"ngModelChange","ngModel","ngModelOptions"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"]],template:function(n,i){if(n&1){let l=A();a(0,"div",6)(1,"div",7)(2,"nz-space",8),d(3,Vo,4,1,"ng-container",9)(4,Po,1,0,"ng-container")(5,Fo,4,3,"ng-container",9),r()(),d(6,jo,3,0,"ng-template",null,0,x)(8,Ho,3,0,"ng-template",null,1,x),r(),a(10,"nz-card",10)(11,"div",6)(12,"div",7)(13,"nz-space",8),d(14,Go,2,3,"ng-container",9)(15,Uo,3,3,"ng-container",9)(16,Yo,3,3,"ng-container",9),r()()(),a(17,"div",11)(18,"div",12),h(19,"app-form-errors",13),a(20,"nz-collapse")(21,"form",14)(22,"nz-collapse-panel",15)(23,"nz-form-item"),d(24,Zo,3,0,"ng-template",null,2,x)(26,er,3,0,"ng-template",null,3,x),r(),a(28,"nz-form-item")(29,"nz-form-label",16),p(30,"Slug"),r(),a(31,"nz-form-control",17),h(32,"textarea",18),r(),d(33,or,3,3,"ng-template",null,4,x),r(),a(35,"nz-form-item")(36,"nz-form-label",19),p(37,"Title"),r(),a(38,"nz-form-control",17),h(39,"textarea",20),r(),d(40,sr,3,3,"ng-template",null,5,x),r()(),a(42,"nz-form-item")(43,"nz-form-label",21),p(44,"Description"),r()()()(),a(45,"nz-code-editor",22),C("nzEditorInitialized",function(E){return f(l),u(i.onEditorInit(E))}),r()()()()}if(n&2){let l=T(34),z=T(41);s(4),S(i.article?4:-1),s(6),m("nzBodyStyle",b(17,ko)),s(9),m("errorResponse",i.errorResponse),s(2),m("formGroup",i.articleForm),s(),m("nzActive",!1)("nzDisabled",!1),s(7),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(18,gi)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",z),s(),m("nzAutosize",b(19,gi)),s(4),m("nzSpan",24),s(2),m("nzLoading",i.loading)("nzFullControl",!0)}},dependencies:[Qe,Pe,Re,Ce,Ve,Fe,Be,Ge,Ae,Te,qn,Wt,K,G,U,Y,we,Se,Ze,ee,$,Ye,Ue,qe,Ke,ze,xe,te,P,O,Ee,He,Je,oe,ie,H,J,W,q,ye,Le,di,pi,Jt,X,Z],encapsulation:2,changeDetection:0})}return t})();var Tr=()=>({minRows:2,maxRows:5}),Ar=()=>({overflow:"auto",display:"block",width:"100%"}),xr=(t,o)=>[t,o],tn=()=>({standalone:!0});function Er(t,o){if(t&1&&(g(0),a(1,"h5",31),h(2,"nz-icon",32),r(),_()),t&2){let e=c(2);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function Sr(t,o){t&1&&d(0,Er,3,1,"ng-container",17)}function wr(t,o){if(t&1){let e=A();g(0),a(1,"button",33),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmApply())}),h(2,"nz-icon",34),p(3," Apply "),r(),_()}if(t&2){let e=c(),n=T(9);s(),m("disabled",e.disableApply())("nzIcon",n)}}function Lr(t,o){if(t&1){let e=A();g(0),a(1,"button",35),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",36),p(3," Close "),r(),_()}if(t&2){c();let e=T(7);s(),m("nzIcon",e)("nzOkDanger",!0)}}function yr(t,o){t&1&&(g(0),a(1,"h4",31),h(2,"nz-icon",37),r(),_())}function vr(t,o){t&1&&(g(0),a(1,"h5",38),p(2,"Do you want to close without changes?"),r(),_())}function br(t,o){t&1&&(a(0,"nz-space",16),d(1,yr,3,0,"ng-container",17)(2,vr,3,0,"ng-container",17),r())}function Mr(t,o){t&1&&(g(0),a(1,"h4",39),h(2,"nz-icon",37),r(),_())}function Ir(t,o){t&1&&(g(0),a(1,"h5",38),p(2,"Do you want to apply changes?"),r(),_())}function Nr(t,o){t&1&&(a(0,"nz-space",16),d(1,Mr,3,0,"ng-container",17)(2,Ir,3,0,"ng-container",17),r())}function Dr(t,o){if(t&1&&(a(0,"div",18)(1,"div",15)(2,"h3",31),p(3),r()()()),t&2){let e=c();s(3),y("Edit existing tag with id: ",e.currentTagId,"")}}function kr(t,o){if(t&1){let e=A();g(0),a(1,"nz-switch",40),k("ngModelChange",function(i){f(e);let l=c();return D(l.showEditTag,i)||(l.showEditTag=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnableEditTag())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.showEditTag),m("ngModelOptions",b(3,tn))("disabled",e.disableApply())}}function Rr(t,o){if(t&1){let e=A();a(0,"button",41),h(1,"nz-icon",42),r(),a(2,"nz-dropdown-menu",null,8)(4,"ul",43)(5,"li",44)(6,"button",45),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.clickDeleteTag())}),p(7," Delete Tag "),r()()()()}if(t&2){let e=T(3),n=c(2),i=T(18);m("nzLoading",n.isLoading())("disabled",n.currentTagId<=0)("nzDropdownMenu",e),s(6),m("disabled",n.currentTagId<=0)("nzIcon",i)("nzOkDanger",!0)}}function Vr(t,o){if(t&1&&(g(0),d(1,Rr,8,6),_()),t&2){let e=c();s(),S(e.showEditTag?1:-1)}}function Or(t,o){t&1&&(g(0),a(1,"h4",31),h(2,"nz-icon",37),r(),_())}function Pr(t,o){t&1&&(g(0),a(1,"h5",38),p(2,"Do you want to delete article?"),r(),_())}function Fr(t,o){t&1&&(a(0,"nz-space",16),d(1,Or,3,0,"ng-container",17)(2,Pr,3,0,"ng-container",17),r())}function Br(t,o){if(t&1&&(g(0),a(1,"h5",31),h(2,"nz-icon",32),r(),_()),t&2){let e=c(3);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function Qr(t,o){t&1&&d(0,Br,3,1,"ng-container",17)}function jr(t,o){if(t&1&&h(0,"nz-option",47),t&2){let e=o.$implicit;m("nzLabel",e.title)("nzValue",e)}}function Wr(t,o){if(t&1&&p(0),t&2){let e=o.$implicit;y(" ",e.nzLabel," ")}}function Jr(t,o){if(t&1){let e=A();g(0),a(1,"nz-select",46),k("ngModelChange",function(i){f(e);let l=c(2);return D(l.showEditTag,i)||(l.showEditTag=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c(2);return u(l.updateEditTag(i))}),B(2,jr,1,2,"nz-option",47,F),r(),d(4,Wr,1,1,"ng-template",null,9,x),_()}if(t&2){let e=T(5),n=c(2);s(),m("nzBackdrop",!0)("disabled",n.disableApply())("nzCustomTemplate",e),N("ngModel",n.showEditTag),m("ngModelOptions",b(5,tn)),s(),Q(n.editTags)}}function Hr(t,o){if(t&1&&(a(0,"div",20)(1,"div",15)(2,"nz-space",16),d(3,Qr,1,0,"ng-container")(4,Jr,6,6,"ng-container",17),r()()()),t&2){let e=c();s(3),S(e.disableApply()?3:-1)}}function Gr(t,o){t&1&&p(0," Please enter tag name. ")}function Ur(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The tag name must be at least ",e.MinNameLength," characters long. ")}}function Yr(t,o){if(t&1&&p(0),t&2){let e=c(2);y(" The tag name must be at most ",e.MaxNameLength," characters long. ")}}function Kr(t,o){if(t&1&&d(0,Gr,1,0)(1,Ur,1,1)(2,Yr,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function qr(t,o){if(t&1){let e=A();g(0),a(1,"button",48),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),p(2),r(),_()}if(t&2){let e=c(),n=T(36);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.tagForm.valid),s(),y(" ",e.currentTagId>0?"Change Tag":"New Tag"," ")}}function Zr(t,o){if(t&1){let e=A();g(0),a(1,"button",49),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),p(2," Reset "),r(),_()}if(t&2){let e=c(),n=T(38);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Xr(t,o){t&1&&(g(0),a(1,"h4",39),h(2,"nz-icon",37),r(),_())}function $r(t,o){t&1&&(g(0),a(1,"h5",38),p(2,"Do you what to submit form?"),r(),_())}function ea(t,o){t&1&&(a(0,"nz-space",16),d(1,Xr,3,0,"ng-container",17)(2,$r,3,0,"ng-container",17),r())}function ta(t,o){t&1&&(g(0),a(1,"h4",31),h(2,"nz-icon",37),r(),_())}function na(t,o){t&1&&(g(0),a(1,"h5",38),p(2,"Do you want to reset form?"),r(),_())}function ia(t,o){t&1&&(a(0,"nz-space",16),d(1,ta,3,0,"ng-container",17)(2,na,3,0,"ng-container",17),r())}function oa(t,o){if(t&1){let e=A();g(0),a(1,"nz-switch",50),k("ngModelChange",function(i){f(e);let l=c();return D(l.showSearch,i)||(l.showSearch=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnable())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.showSearch),m("ngModelOptions",b(3,tn))("disabled",e.leftSearch||e.rightSearch)}}function ra(t,o){t&1&&(g(0),a(1,"h5",31),h(2,"nz-icon",51),r(),_())}function aa(t,o){t&1&&d(0,ra,3,0,"ng-container",17)}function la(t,o){t&1&&(g(0),a(1,"h4",55),p(2,"Remaining Tags"),r(),_())}function sa(t,o){t&1&&(g(0),a(1,"h5",55),h(2,"nz-icon",56),r(),_())}function ca(t,o){if(t&1&&h(0,"nz-option",47),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function ma(t,o){if(t&1&&(h(0,"nz-icon",57),p(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function pa(t,o){if(t&1){let e=A();a(0,"tr",58),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",59),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),p(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function da(t,o){if(t&1){let e=A();a(0,"div",18)(1,"div",15)(2,"nz-space",16),d(3,la,3,0,"ng-container",17)(4,sa,3,0,"ng-container",17),r()()(),a(5,"div",18)(6,"div",15)(7,"nz-select",52),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelLeft,i)||(l.orderModelLeft=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderLeft(i))}),B(8,ca,1,2,"nz-option",47,F),r(),d(10,ma,2,2,"ng-template",null,10,x),r()(),a(12,"nz-table",53,11)(14,"thead")(15,"tr")(16,"th",54),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),p(18,"All"),r()()(),a(19,"tbody"),B(20,pa,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",E.orderModelLeft),s(),Q(E.listOfOption),s(4),m("nzData",E.convertItemsRight(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}function ga(t,o){t&1&&(g(0),a(1,"h4",39),p(2,"Selected Tags"),r(),_())}function _a(t,o){t&1&&(g(0),a(1,"h5",39),h(2,"nz-icon",60),r(),_())}function fa(t,o){if(t&1&&h(0,"nz-option",47),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function ua(t,o){if(t&1&&(h(0,"nz-icon",57),p(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function ha(t,o){if(t&1){let e=A();a(0,"tr",58),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",59),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),p(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function za(t,o){if(t&1){let e=A();a(0,"div",18)(1,"div",15)(2,"nz-space",16),d(3,ga,3,0,"ng-container",17)(4,_a,3,0,"ng-container",17),r()()(),a(5,"div",18)(6,"div",15)(7,"nz-select",52),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelRight,i)||(l.orderModelRight=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderRight(i))}),B(8,fa,1,2,"nz-option",47,F),r(),d(10,ua,2,2,"ng-template",null,12,x),r()(),a(12,"nz-table",53,13)(14,"thead")(15,"tr")(16,"th",54),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),p(18,"All"),r()()(),a(19,"tbody"),B(20,ha,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",E.orderModelRight),s(),Q(E.listOfOption),s(4),m("nzData",E.convertItemsLeft(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}var hi=(()=>{class t{article;tagList;currentArticle;errorResponse;nzMessageService=w(ne);drawerRef=w(ue);selectedCount=0;list=[];showSearch=!1;leftSearch=!1;rightSearch=!1;selectedTags=null;applyTooltipTitle="";orderModelLeft=null;orderModelRight=null;listOfOption=[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}];sortOrder=null;isAscending=!1;changeDetectorRef=w(j);messageId=null;MinNameLength=2;MaxNameLength=420;editTags=[];currentTagId=0;showEditTag=!1;isLoading=M(!0);injector=w(Ne);nameValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>420)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};tagForm=new Oe({title:new pe("",{nonNullable:!0,validators:[this.nameValidator]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}cancelLoading(){this.removeMessageService(),this.isLoading.set(!1),this.changeDetectorRef.markForCheck()}isTagListChange(){let e=this.selectedTags||[];if(this.selectedTags=[],this.list.filter(i=>i.direction==="right").forEach(i=>this.selectedTags.push(i.id)),e.length!==this.selectedTags.length)return!0;let n=!0;return e.forEach(i=>n=n&&this.selectedTags.includes(i)),!n}clearEditTags(){this.editTags=[],this.currentTagId=0,this.resetForm()}fillTags(e){this.list=[],e.forEach(n=>this.list.push({title:n.title,id:n.id,direction:this.selectedTags.includes(n.id)?"right":"left"})),this.selectedCount=this.selectedTags.length,this.showEditTag=null,this.orderModelLeft=null,this.orderModelRight=null,this.clearEditTags(),this.cancelLoading()}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId,this.article.tagList?this.selectedTags=this.article.tagList:(this.drawerRef.execute({loading:this.isLoading,articleId:this.article.id}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&(e.tagList?this.selectedTags=e.tagList:this.selectedTags=[],this.tagList().length&&this.fillTags(this.tagList()))})),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.list.length&&e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.tagList,{injector:this.injector}).subscribe(e=>{e&&e.length&&this.selectedTags&&this.fillTags(e)})}submitForm(){this.isLoading()||(this.setMessageService(),this.currentTagId?this.drawerRef.execute({loading:this.isLoading,form:this.tagForm,tagId:this.currentTagId}):this.drawerRef.execute({loading:this.isLoading,form:this.tagForm}))}resetForm(){this.tagForm.reset(),this.tagForm.controls.title.markAsPristine(),this.tagForm.controls.title.updateValueAndValidity(),this.changeDetectorRef.markForCheck()}clickDeleteTag(){this.isLoading()||(this.setMessageService(),this.drawerRef.execute({loading:this.isLoading,tagId:this.currentTagId}))}updateEditTag(e){e?(this.currentTagId=e.id,this.tagForm.patchValue(e),this.changeDetectorRef.markForCheck()):this.currentTagId=0}disableEnableEditTag(){this.clearEditTags(),this.showEditTag||this.list.filter(e=>e.direction==="right").forEach(e=>this.editTags.push({title:e.title,id:e.id})),this.changeDetectorRef.markForCheck()}disableEnable(){this.showSearch||(this.showSearch=this.leftSearch||this.rightSearch)}handleSearchChange(e){e.direction==="left"?this.leftSearch=e.value!=="":this.rightSearch=e.value!==""}handleChange(e){e.from==="right"?(this.orderModelLeft=null,this.sortOrder={direction:"left",sortOrder:null},this.selectedCount-=e.list.length):(this.orderModelRight=null,this.sortOrder={direction:"right",sortOrder:null},this.selectedCount+=e.list.length),this.showEditTag&&(this.showEditTag=!1,this.clearEditTags())}handleFilterOption(e,n){return n.title.toLowerCase().includes(e.toLowerCase())}confirmClose(){this.isTagListChange()&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}disableApply(){return this.selectedCount<1?(this.applyTooltipTitle="It should be at least one selected tag.",!0):this.selectedCount>100?(this.applyTooltipTitle="It should not be more than 100 selected tags.",!0):!1}confirmApply(){this.isTagListChange()?(this.nzMessageService.info("Applying selected tags."),this.selectedTags.length===this.list.length&&(this.selectedTags=null),this.drawerRef.close(this.selectedTags)):this.drawerRef.close(null)}convertItemsRight(e){return e.filter(n=>!n.hide)}convertItemsLeft(e){return e.filter(n=>!n.hide)}handleOrderRight(e){this.sortOrder={direction:"right",sortOrder:e}}handleOrderLeft(e){this.sortOrder={direction:"left",sortOrder:e}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing-tags-edit"]],inputs:{article:"article",tagList:"tagList",currentArticle:"currentArticle",errorResponse:"errorResponse"},decls:51,vars:24,consts:[["closeTpl",""],["applyTpl",""],["deleteTpl",""],["tagErrorTpl",""],["submitTpl",""],["resetTpl",""],["renderList",""],["renderSelectedList",""],["menu1","nzDropdownMenu"],["tagTemplate",""],["orderTemplateLeft",""],["t1",""],["orderTemplateRight",""],["t2",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","center"],["nz-row","","nzJustify","start"],["nz-row","","nzJustify","end"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],["nz-form","",3,"formGroup"],["nzFor","title","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","title","id","title","placeholder","Enter tag name",3,"nzAutosize"],[3,"nzSpan"],[3,"errorResponse"],["nz-row","","nzJustify","start",1,"m-t-20","m-b-20"],["nzSize","small","nzAlign","center"],[3,"nzSearchChange","nzChange","nzDataSource","nzShowSearch","nzShowSelectAll","nzFilterOption","nzRenderList","nzSortOrder"],["nz-typography","","nzType","danger"],["nzType","info-circle","nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon"],["nzType","check"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger"],["nzType","close"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Disable Edit","nzUnCheckedChildren","Enable Edit",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nz-button","","nzType","link","nz-dropdown","",3,"nzLoading","disabled","nzDropdownMenu"],["nzType","delete"],["nz-menu",""],["nz-menu-item",""],["nz-button","","nzDanger","true","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon","nzOkDanger"],["nzAllowClear","","nzPlaceHolder","Edit Tag",3,"ngModelChange","nzBackdrop","disabled","nzCustomTemplate","ngModel","ngModelOptions"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzCheckedChildren","Hide Search","nzUnCheckedChildren","Show Search",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Clear out all search boxes in order to hide them."],["nzAllowClear","","nzPlaceHolder","Sort Order...",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel"],["nzSize","small",3,"nzData"],["nzShowCheckbox","",3,"nzCheckedChange","nzDisabled","nzChecked","nzIndeterminate"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all remaining tags."],[3,"nzType"],[3,"click"],["nzShowCheckbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all selected tags."]],template:function(n,i){if(n&1){let l=A();a(0,"div",14)(1,"div",15)(2,"nz-space",16),d(3,Sr,1,0,"ng-container")(4,wr,4,2,"ng-container",17)(5,Lr,4,2,"ng-container",17),r()(),d(6,br,3,0,"ng-template",null,0,x)(8,Nr,3,0,"ng-template",null,1,x),r(),a(10,"nz-card"),d(11,Dr,4,1,"div",18),a(12,"div",19)(13,"div",15)(14,"nz-space",16),d(15,kr,2,4,"ng-container",17)(16,Vr,2,1,"ng-container",17),r()()(),d(17,Fr,3,0,"ng-template",null,2,x)(19,Hr,5,1,"div",20),a(20,"div",18)(21,"div",21)(22,"form",22)(23,"nz-form-item")(24,"nz-form-label",23),p(25,"Tag Name"),r(),a(26,"nz-form-control",24),h(27,"textarea",25),r(),d(28,Kr,3,3,"ng-template",null,3,x),r(),a(30,"nz-form-item")(31,"nz-form-control",26)(32,"nz-space",16),d(33,qr,3,4,"ng-container",17)(34,Zr,3,3,"ng-container",17),r()(),d(35,ea,3,0,"ng-template",null,4,x)(37,ia,3,0,"ng-template",null,5,x),r()(),h(39,"app-form-errors",27),r()()(),a(40,"div",28)(41,"div",15)(42,"nz-space",29),d(43,oa,2,4,"ng-container",17)(44,aa,1,0,"ng-container"),r()()(),a(45,"div")(46,"nz-transfer",30),C("nzSearchChange",function(E){return f(l),u(i.handleSearchChange(E))})("nzChange",function(E){return f(l),u(i.handleChange(E))}),d(47,da,22,7,"ng-template",null,6,x)(49,za,22,7,"ng-template",null,7,x),r()()}if(n&2){let l=T(29),z=T(48),E=T(50);s(3),S(i.disableApply()?3:-1),s(8),S(i.currentTagId>0?11:-1),s(8),S(i.showEditTag?19:-1),s(3),m("formGroup",i.tagForm),s(2),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(19,Tr)),s(4),m("nzSpan",24),s(8),m("errorResponse",i.errorResponse),s(5),S(i.leftSearch||i.rightSearch?44:-1),s(),gt(b(20,Ar)),s(),m("nzDataSource",i.list)("nzShowSearch",i.showSearch)("nzShowSelectAll",!1)("nzFilterOption",i.handleFilterOption)("nzRenderList",Tt(21,xr,z,E))("nzSortOrder",i.sortOrder)}},dependencies:[Qe,Pe,Re,Ce,Ve,Fe,Be,Ge,Ae,Te,K,G,U,Y,we,Se,Ze,ee,$,Ye,Ue,qe,Ke,ze,xe,wt,St,Et,yt,Lt,te,P,O,Ee,He,Je,oe,ie,H,J,W,q,Ft,Vt,vt,Mt,bt,Pt,Nt,Ot,It,jt,Qt,We,je,ye,Le,Rt,Dt,kt,X,Z],encapsulation:2,changeDetection:0})}return t})();var Ca=()=>({overflow:"auto",display:"block",width:"100%"}),Ta=(t,o)=>[t,o],nn=()=>({standalone:!0});function Aa(t,o){if(t&1&&(g(0),a(1,"h5",16),h(2,"nz-icon",17),r(),_()),t&2){let e=c(2);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function xa(t,o){t&1&&d(0,Aa,3,1,"ng-container",12)}function Ea(t,o){if(t&1){let e=A();g(0),a(1,"button",18),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmApply())}),h(2,"nz-icon",19),p(3," Apply "),r(),_()}if(t&2){let e=c(),n=T(9);s(),m("disabled",e.disableApply())("nzIcon",n)}}function Sa(t,o){if(t&1){let e=A();g(0),a(1,"button",20),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",21),p(3," Close "),r(),_()}if(t&2){c();let e=T(7);s(),m("nzIcon",e)("nzOkDanger",!0)}}function wa(t,o){t&1&&(g(0),a(1,"h4",16),h(2,"nz-icon",22),r(),_())}function La(t,o){t&1&&(g(0),a(1,"h5",23),p(2,"Do you want to close without changes?"),r(),_())}function ya(t,o){t&1&&(a(0,"nz-space",11),d(1,wa,3,0,"ng-container",12)(2,La,3,0,"ng-container",12),r())}function va(t,o){t&1&&(g(0),a(1,"h4",24),h(2,"nz-icon",22),r(),_())}function ba(t,o){t&1&&(g(0),a(1,"h5",23),p(2,"Do you want to apply changes?"),r(),_())}function Ma(t,o){t&1&&(a(0,"nz-space",11),d(1,va,3,0,"ng-container",12)(2,ba,3,0,"ng-container",12),r())}function Ia(t,o){if(t&1){let e=A();g(0),a(1,"nz-switch",25),k("ngModelChange",function(i){f(e);let l=c();return D(l.isAscending,i)||(l.isAscending=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.ascendingEnable())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.isAscending),m("ngModelOptions",b(2,nn))}}function Na(t,o){if(t&1&&h(0,"nz-option",27),t&2){let e=o.$implicit;m("nzLabel",e.name)("nzValue",e.value)}}function Da(t,o){if(t&1&&p(0),t&2){let e=o.$implicit;y(" ",e.nzLabel," ")}}function ka(t,o){if(t&1){let e=A();g(0),a(1,"nz-select",26),k("ngModelChange",function(i){f(e);let l=c();return D(l.selectedOption,i)||(l.selectedOption=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleSelectPublished(i))}),B(2,Na,1,2,"nz-option",27,F),r(),d(4,Da,1,1,"ng-template",null,4,x),_()}if(t&2){let e=T(5),n=c();s(),m("nzBackdrop",!0)("nzCustomTemplate",e),N("ngModel",n.selectedOption),m("ngModelOptions",b(4,nn)),s(),Q(n.publisedOptions)}}function Ra(t,o){if(t&1){let e=A();g(0),a(1,"nz-switch",28),k("ngModelChange",function(i){f(e);let l=c();return D(l.showSearch,i)||(l.showSearch=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnable())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.showSearch),m("ngModelOptions",b(3,nn))("disabled",e.leftSearch||e.rightSearch)}}function Va(t,o){t&1&&(g(0),a(1,"h5",16),h(2,"nz-icon",29),r(),_())}function Oa(t,o){t&1&&d(0,Va,3,0,"ng-container",12)}function Pa(t,o){t&1&&(g(0),a(1,"h4",34),p(2,"Remaining Tags"),r(),_())}function Fa(t,o){t&1&&(g(0),a(1,"h5",34),h(2,"nz-icon",35),r(),_())}function Ba(t,o){if(t&1&&h(0,"nz-option",27),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function Qa(t,o){if(t&1&&(h(0,"nz-icon",36),p(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function ja(t,o){if(t&1){let e=A();a(0,"tr",37),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",38),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),p(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function Wa(t,o){if(t&1){let e=A();a(0,"div",30)(1,"div",10)(2,"nz-space",11),d(3,Pa,3,0,"ng-container",12)(4,Fa,3,0,"ng-container",12),r()()(),a(5,"div",30)(6,"div",10)(7,"nz-select",31),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelLeft,i)||(l.orderModelLeft=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderLeft(i))}),B(8,Ba,1,2,"nz-option",27,F),r(),d(10,Qa,2,2,"ng-template",null,5,x),r()(),a(12,"nz-table",32,6)(14,"thead")(15,"tr")(16,"th",33),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),p(18,"All"),r()()(),a(19,"tbody"),B(20,ja,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",E.orderModelLeft),s(),Q(E.listOfOption),s(4),m("nzData",E.convertItemsRight(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}function Ja(t,o){t&1&&(g(0),a(1,"h4",24),p(2,"Selected Tags"),r(),_())}function Ha(t,o){t&1&&(g(0),a(1,"h5",24),h(2,"nz-icon",39),r(),_())}function Ga(t,o){if(t&1&&h(0,"nz-option",27),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function Ua(t,o){if(t&1&&(h(0,"nz-icon",36),p(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function Ya(t,o){if(t&1){let e=A();a(0,"tr",37),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",38),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),p(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function Ka(t,o){if(t&1){let e=A();a(0,"div",30)(1,"div",10)(2,"nz-space",11),d(3,Ja,3,0,"ng-container",12)(4,Ha,3,0,"ng-container",12),r()()(),a(5,"div",30)(6,"div",10)(7,"nz-select",31),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelRight,i)||(l.orderModelRight=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderRight(i))}),B(8,Ga,1,2,"nz-option",27,F),r(),d(10,Ua,2,2,"ng-template",null,7,x),r()(),a(12,"nz-table",32,8)(14,"thead")(15,"tr")(16,"th",33),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),p(18,"All"),r()()(),a(19,"tbody"),B(20,Ya,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",E.orderModelRight),s(),Q(E.listOfOption),s(4),m("nzData",E.convertItemsLeft(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}var zi=(()=>{class t{params;nzMessageService=w(ne);drawerRef=w(ue);selectedCount=0;list=[];showSearch=!1;leftSearch=!1;rightSearch=!1;selectedTags=[];applyTooltipTitle="";orderModelLeft=null;orderModelRight=null;listOfOption=[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}];sortOrder=null;isAscending=!1;createdAtAsc=null;initialCreatedAtAsc=null;publisedOptions=[{name:"All - Published/Unpublished",value:null},{name:"Published",value:!0},{name:"Unpublished",value:!1}];selectedOption=null;initialSelectedOption=null;isTagListChange(){let e=this.selectedTags||[];if(this.selectedTags=[],this.list.filter(i=>i.direction==="right").forEach(i=>this.selectedTags.push(i.id)),this.createdAtAsc!==this.initialCreatedAtAsc||this.selectedOption!==this.initialSelectedOption||e?.length!==this.selectedTags.length)return!0;let n=!0;return e.forEach(i=>n=n&&this.selectedTags.includes(i)),!n}ngOnInit(){this.params.createdAtAsc===void 0?(this.isAscending=!1,this.createdAtAsc=null):(this.isAscending=this.params.createdAtAsc,this.createdAtAsc=this.isAscending),this.initialCreatedAtAsc=this.createdAtAsc,this.params.published===void 0?this.selectedOption=null:this.selectedOption=this.params.published,this.initialSelectedOption=this.selectedOption,this.params.tags?this.selectedTags=this.params.tags:(this.selectedTags=[],this.params.tagList.forEach(e=>this.selectedTags.push(e.id))),this.list=[],this.params.tagList.forEach(e=>this.list.push({title:e.title,id:e.id,direction:this.selectedTags.includes(e.id)?"right":"left"})),this.selectedCount=this.selectedTags.length}ascendingEnable(){this.isAscending?this.createdAtAsc=null:this.createdAtAsc=!0}handleSelectPublished(e){this.selectedOption=e}disableEnable(){this.showSearch||(this.showSearch=this.leftSearch||this.rightSearch)}handleSearchChange(e){e.direction==="left"?this.leftSearch=e.value!=="":this.rightSearch=e.value!==""}handleChange(e){e.from==="right"?(this.orderModelLeft=null,this.sortOrder={direction:"left",sortOrder:null},this.selectedCount-=e.list.length):(this.orderModelRight=null,this.sortOrder={direction:"right",sortOrder:null},this.selectedCount+=e.list.length)}handleFilterOption(e,n){return n.title.toLowerCase().includes(e.toLowerCase())}confirmClose(){this.isTagListChange()&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}disableApply(){return this.selectedCount<1?(this.applyTooltipTitle="It should be at least one selected tag.",!0):this.selectedCount>100?(this.applyTooltipTitle="It should not be more than 100 selected tags.",!0):!1}confirmApply(){this.isTagListChange()?(this.nzMessageService.info("Applying selected tags."),this.selectedTags.length===this.list.length&&(this.selectedTags=null),this.drawerRef.close({tags:this.selectedTags,published:this.selectedOption,createdAtAsc:this.createdAtAsc})):this.drawerRef.close(null)}convertItemsRight(e){return e.filter(n=>!n.hide)}convertItemsLeft(e){return e.filter(n=>!n.hide)}handleOrderRight(e){this.sortOrder={direction:"right",sortOrder:e}}handleOrderLeft(e){this.sortOrder={direction:"left",sortOrder:e}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-edit-tags"]],inputs:{params:"params"},decls:29,vars:14,consts:[["closeTpl",""],["applyTpl",""],["renderList",""],["renderSelectedList",""],["publishedTemplate",""],["orderTemplateLeft",""],["t1",""],["orderTemplateRight",""],["t2",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","start",1,"m-b-20"],["nzSize","small","nzAlign","center"],[3,"nzSearchChange","nzChange","nzDataSource","nzShowSearch","nzShowSelectAll","nzFilterOption","nzRenderList","nzSortOrder"],["nz-typography","","nzType","danger"],["nzType","info-circle","nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon"],["nzType","check"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger"],["nzType","close"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Oldest first","nzUnCheckedChildren","Newest first",3,"ngModelChange","click","ngModel","ngModelOptions"],["nzAllowClear","","nzPlaceHolder","All - Published/Unpublished",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel","ngModelOptions"],[3,"nzLabel","nzValue"],["nzCheckedChildren","Hide Search","nzUnCheckedChildren","Show Search",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Clear out all search boxes in order to hide them."],["nz-row","","nzJustify","center"],["nzAllowClear","","nzPlaceHolder","Sort Order...",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel"],["nzSize","small",3,"nzData"],["nzShowCheckbox","",3,"nzCheckedChange","nzDisabled","nzChecked","nzIndeterminate"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all remaining tags."],[3,"nzType"],[3,"click"],["nzShowCheckbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all selected tags."]],template:function(n,i){if(n&1){let l=A();a(0,"div",9)(1,"div",10)(2,"nz-space",11),d(3,xa,1,0,"ng-container")(4,Ea,4,2,"ng-container",12)(5,Sa,4,2,"ng-container",12),r()(),d(6,ya,3,0,"ng-template",null,0,x)(8,Ma,3,0,"ng-template",null,1,x),r(),a(10,"div",9)(11,"div",10)(12,"nz-space",11),d(13,Ia,2,3,"ng-container",12),r()()(),a(14,"div",9)(15,"div",10)(16,"nz-space",11),d(17,ka,6,5,"ng-container",12),r()()(),a(18,"div",13)(19,"div",10)(20,"nz-space",14),d(21,Ra,2,4,"ng-container",12)(22,Oa,1,0,"ng-container"),r()()(),a(23,"div")(24,"nz-transfer",15),C("nzSearchChange",function(E){return f(l),u(i.handleSearchChange(E))})("nzChange",function(E){return f(l),u(i.handleChange(E))}),d(25,Wa,22,7,"ng-template",null,2,x)(27,Ka,22,7,"ng-template",null,3,x),r()()}if(n&2){let l=T(26),z=T(28);s(3),S(i.disableApply()?3:-1),s(19),S(i.leftSearch||i.rightSearch?22:-1),s(),gt(b(10,Ca)),s(),m("nzDataSource",i.list)("nzShowSearch",i.showSearch)("nzShowSelectAll",!1)("nzFilterOption",i.handleFilterOption)("nzRenderList",Tt(11,Ta,l,z))("nzSortOrder",i.sortOrder)}},dependencies:[Ae,Ce,Te,K,G,U,Y,ze,te,ee,$,P,O,oe,ie,H,J,W,q,Ft,Vt,vt,Mt,bt,Pt,Nt,Ot,It,jt,Qt,We,je,ye,Le,Rt,Dt,kt,X,Z],encapsulation:2,changeDetection:0})}return t})();var qa=["drawerTitleTemplate"],Za=["loginPasswordTitleTemplate"];function Xa(t,o){t&1&&(a(0,"div",6)(1,"div",7)(2,"h3",8),p(3,"Not Authorized"),r()()())}function $a(t,o){t&1&&(g(0),a(1,"h3",14),p(2,"Article Admin Page"),r(),_())}function el(t,o){t&1&&(g(0),a(1,"h4",17),h(2,"nz-icon",18),r(),_())}function tl(t,o){t&1&&(g(0),a(1,"h5",19),p(2,"Do you want to reload all articles?"),r(),_())}function nl(t,o){t&1&&(a(0,"nz-space",9),d(1,el,3,0,"ng-container",10)(2,tl,3,0,"ng-container",10),r())}function il(t,o){if(t&1){let e=A();g(0),a(1,"button",15),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.selectAll())}),h(2,"nz-icon",16),r(),d(3,nl,3,0,"ng-template",null,2,x),_()}if(t&2){let e=T(4),n=c(2);s(),m("nzLoading",n.isArticlesLoading())("nzIcon",e)}}function ol(t,o){if(t&1){let e=A();g(0),a(1,"button",20),C("click",function(){f(e);let i=c(2);return u(i.openTagsFilter())}),h(2,"nz-icon",21),p(3," Tags "),r(),a(4,"nz-badge",22),h(5,"a",23),r(),_()}if(t&2){let e=c(2);s(),m("nzLoading",e.isTagsLoading()),s(3),m("nzCount",e.tagCount())}}function rl(t,o){if(t&1){let e=A();g(0),a(1,"button",20),C("click",function(){f(e);let i=c(2);return u(i.newArticle())}),h(2,"nz-icon",24),p(3," New Article "),r(),_()}if(t&2){let e=c(2);s(),m("nzLoading",e.isArticleLoading())}}function al(t,o){if(t&1&&(a(0,"div",6)(1,"div",7)(2,"h3",14),p(3),r()()()),t&2){let e=c(2);s(3),V(e.title)}}function ll(t,o){if(t&1&&(g(0),h(1,"nz-avatar",25),_()),t&2){let e=c(3);s(),ut("nzSrc","https://picsum.photos/id/",e.user().username.length,"/300/200.jpg")}}function sl(t,o){if(t&1&&(g(0),a(1,"h5",17),p(2),At(3,"nzEllipsis"),r(),_()),t&2){let e=c(3);s(2),V(hn(3,1,e.user().username,12,"..."))}}function cl(t,o){t&1&&(a(0,"div",6)(1,"div",7)(2,"h3",14),p(3,"Confirm Password"),r()()(),a(4,"div",11)(5,"div",7)(6,"nz-space",9),d(7,ll,2,2,"ng-container",10)(8,sl,4,5,"ng-container",10),r()()())}function ml(t,o){if(t&1){let e=A();a(0,"div",6)(1,"div",7)(2,"nz-space",9),d(3,$a,3,0,"ng-container",10),r()()(),a(4,"div",6)(5,"div",7)(6,"nz-space",9),d(7,il,5,2,"ng-container",10),r()()(),a(8,"div",11)(9,"div",7)(10,"nz-space",9),d(11,ol,6,2,"ng-container",10),r()()(),a(12,"div",12)(13,"div",7)(14,"nz-space",9),d(15,rl,4,1,"ng-container",10),r()()(),a(16,"app-articles",13),C("nzSetPage",function(i){f(e);let l=c();return u(l.onPageOffsetChange(i))})("nzSetPageSize",function(i){f(e);let l=c();return u(l.onPageLimitChange(i))})("nzEditTags",function(i){f(e);let l=c();return u(l.linkTags(i))})("nzDeleteArticle",function(i){f(e);let l=c();return u(l.handleDeleteArticle(i))})("nzEditArticle",function(i){f(e);let l=c();return u(l.handleEditArticle(i))})("nzMonacoEditArticle",function(i){f(e);let l=c();return u(l.handleMonacoEditArticle(i))}),r(),d(17,al,4,1,"ng-template",null,0,x)(19,cl,9,0,"ng-template",null,1,x)}if(t&2){let e=c();s(16),m("isRouterLinkLoading",e.isRouterLinkLoading)("routerLinkLoadingId",e.routerLinkLoadingId)("articleList",e.articleList)("articlesCount",e.articleCount)("isLoading",e.isArticlesLoading)("articleListConfig",e.articleListConfig)("oldLimit",e.oldLimit)}}var tp=(()=>{class t{drawerTitleTemplate=Gt("drawerTitleTemplate");loginPasswordTitleTemplate=Gt("loginPasswordTitleTemplate");nzMessageService=w(ne);destroyRef=w(cn);drawerService=w(bn);#e=w(Kt);#t=w(Bt);articleListConfig=this.#t.selectors.articleListConfig;isAuthenticated=this.#t.selectors.isAuthenticated;articleCount=this.#e.selectors.articleCount;articleList=this.#e.selectors.articleList;tagList=this.#e.selectors.tags;errorResponse=this.#e.selectors.errorResponse;user=this.#t.selectors.user;windowWidth=this.#t.selectors.width;windowHeight=this.#t.selectors.height;isArticleLoading=M(!1);isTagsLoading=M(!1);isArticlesLoading=M(!1);isRouterLinkLoading=M(!1);routerLinkLoadingId=M(0);tagCount=zn(()=>this.articleListConfig()?.filters.tags?this.articleListConfig().filters.tags.length:0);oldLimit=M(this.articleListConfig().filters.limit);isLoginPasswordLoading=M(!1);title="";noCancel(){return new Promise(n=>{try{n(!1)}finally{}})}pageHeaderInfo={title:"Articles Editor",breadcrumb:["Admin","Articles"],desc:`
    You can create, edit and delete articles.
    `};ngOnInit(){if(this.#t.setAdminArticles(!0),this.isAuthenticated()){let e=this.articleListConfig()?.filters;(e?.tags===void 0||e?.tags===null)&&(e?.published===void 0||e?.published===null)&&(e?.createdAtAsc===void 0||e?.createdAtAsc===null)?this.selectAll():(this.#e.getTags(this.isTagsLoading),this.#e.queryArticle({loading:this.isArticlesLoading,params:{limit:e.limit,offset:0,tags:e.tags,published:e.published,createdAtAsc:e.createdAtAsc}}))}}selectAll(){this.#e.getTags(this.isTagsLoading),this.#e.queryArticle({loading:this.isArticlesLoading,params:{limit:10,offset:0}}),this.oldLimit.set(10)}onPageOffsetChange(e){this.#e.onOffsetChange({loading:this.isArticlesLoading,offset:e})}onPageLimitChange(e){this.#e.onLimitChange({loading:this.isArticlesLoading,limit:e})}openTagsFilter(){if(this.isTagsLoading())return;this.isTagsLoading.set(!0),this.title="Article Tags";let e=this.articleListConfig()?.filters;this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:zi,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{params:{tagList:this.tagList(),tags:e.tags,published:e.published,createdAtAsc:e.createdAtAsc}}}).afterClose.subscribe(i=>{if(i){let l=this.articleListConfig()?.filters;this.#e.queryArticle({loading:this.isArticlesLoading,params:ae(re({},i),{limit:l.limit,offset:0})})}this.isTagsLoading.set(!1)})}linkTags(e){if(this.isTagsLoading())return;this.isTagsLoading.set(!0),this.title="Create/Edit Tags",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:hi,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,tagList:this.#e.selectors.tags,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse}});n.afterExecute.pipe(et(this.destroyRef)).subscribe(i=>{i?(this.#e.resetErrorResponse(),i.form?i.tagId?this.#e.editTag({loading:i.loading,tagId:i.tagId,form:i.form}):this.#e.createTag({loading:i.loading,form:i.form}):i.tagId?this.#e.deleteTag({loading:i.loading,tagId:i.tagId}):i.articleId&&this.#e.getArticleDetails({loading:i.loading,articleId:i.articleId})):this.confirmPassword()}),n.afterClose.subscribe(i=>{!i&&i!==null?(this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0)):(this.#e.linkTags({loading:this.isRouterLinkLoading,articleTags:{tags:i,articleId:e.id}}),this.routerLinkLoadingId.set(0)),this.isTagsLoading.set(!1)})}monacoArticle(e){if(this.isArticleLoading())return;this.isArticleLoading.set(!0),this.title=e?"Edit Article":"New Article",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:_i,nzWidth:this.windowWidth()-15,nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse,windowWidth:this.windowWidth,windowHeight:this.windowHeight}});n.afterExecute.pipe(et(this.destroyRef)).subscribe(i=>{i?i.form&&(i.articleId?this.#e.editArticle({loading:i.loading,form:i.form,articleId:i.articleId,published:i.published}):this.#e.createArticle({loading:i.loading,form:i.form,published:i.published})):this.confirmPassword()}),n.afterClose.subscribe(()=>{this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0),this.isArticleLoading.set(!1)})}editArticle(e){if(this.isArticleLoading())return;this.isArticleLoading.set(!0),this.title=e?"Edit Article":"New Article",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:ai,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse}});n.afterExecute.pipe(et(this.destroyRef)).subscribe(i=>{i?i.form&&(i.articleId?this.#e.editArticle({loading:i.loading,form:i.form,articleId:i.articleId,published:i.published}):this.#e.createArticle({loading:i.loading,form:i.form,published:i.published})):this.confirmPassword()}),n.afterClose.subscribe(()=>{this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0),this.isArticleLoading.set(!1)})}newArticle(){this.editArticle(null)}handleEditArticle(e){this.editArticle(e)}handleMonacoEditArticle(e){this.monacoArticle(e)}handleDeleteArticle(e){this.nzMessageService.info("Deleting article..."),this.#e.deleteArticle({loading:this.isRouterLinkLoading,articleId:e.id}),this.routerLinkLoadingId.set(0)}confirmPassword(){if(this.isLoginPasswordLoading())return;this.isLoginPasswordLoading.set(!0),this.#t.resetErrorResponse();let e=this.drawerService.create({nzTitle:this.loginPasswordTitleTemplate(),nzContent:Vn,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{user:this.#t.selectors.user,errorResponse:this.#t.selectors.errorResponse,messages:{cancelButton:"Close",cancelButtonMessage:"Do you want to close without confirming the password?"}}});e.afterExecute.pipe(et(this.destroyRef)).subscribe(n=>{n&&this.#t.loginPassword({loading:n.loading,form:n.form})}),e.afterClose.subscribe(n=>{this.#e.resetErrorResponse(),n&&this.#t.resetErrorResponse(),this.isLoginPasswordLoading.set(!1)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing"]],viewQuery:function(n,i){n&1&&(Yt(i.drawerTitleTemplate,qa,5),Yt(i.loginPasswordTitleTemplate,Za,5)),n&2&&gn(2)},features:[De([xn(Kt)])],decls:5,vars:3,consts:[["drawerTitleTemplate",""],["loginPasswordTitleTemplate",""],["applyTpl",""],[3,"pageHeaderInfo"],[1,"normal-table-wrap","bg-color-no","p-b-50"],[1,"m-b-20",3,"nzBordered"],["nz-row","","nzJustify","center"],["nz-col",""],["nz-typography","","nzType","danger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","end"],["nz-row","","nzJustify","start"],[3,"nzSetPage","nzSetPageSize","nzEditTags","nzDeleteArticle","nzEditArticle","nzMonacoEditArticle","isRouterLinkLoading","routerLinkLoadingId","articleList","articlesCount","isLoading","articleListConfig","oldLimit"],["nz-typography","","nzType","warning"],["nz-button","","nzType","primary","nzShape","circle","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon"],["nzType","sync"],["nz-typography","","nzType","success"],["nzType","question-circle-o"],["nz-typography",""],["nz-button","","nzType","primary","nzShape","round",3,"click","nzLoading"],["nzType","tag"],[3,"nzCount"],[1,"head-example"],["nzType","form"],["nzIcon","user",3,"nzSrc"]],template:function(n,i){n&1&&(h(0,"app-page-header",3),a(1,"div",4)(2,"nz-card",5),d(3,Xa,4,0,"div",6)(4,ml,21,7),r()()),n&2&&(m("pageHeaderInfo",i.pageHeaderInfo),s(2),m("nzBordered",!0),s(),S(i.isAuthenticated()?4:3))},dependencies:[Un,si,Bn,Fn,jn,Qn,K,G,U,Y,we,Se,Pn,P,O,oe,ie,H,J,W,q,X,Z,te,ee,$,Nn,Ee],encapsulation:2,changeDetection:0})}return t})();export{tp as default};
