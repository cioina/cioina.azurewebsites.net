import{A as re,F as ae,J as fe}from"./chunk-D3YOOZ65.js";import"./chunk-IAJBDWOT.js";import{h as pe,i as se,j as ce,k as de,l as ue,n as _e}from"./chunk-PWBFDFV6.js";import{a as q,b as O,i as G,k as B,l as ie,m as oe}from"./chunk-QWAMMNSN.js";import{a as R,b as P,c as k,e as A}from"./chunk-7ZP5E5Q4.js";import"./chunk-GW63DI2J.js";import{ga as le,ha as me,l as M}from"./chunk-FBFM442M.js";import"./chunk-TFT36LRQ.js";import"./chunk-DOM7534T.js";import{A as J,B as H,D as K,E,G as Q,I as U,J as Y,N as Z,O as ee,R as te,S as ne,d as V,e as D,f as I,h as X,i as W,x as $,y as j}from"./chunk-SYGSFLWD.js";import{xa as b,za as F}from"./chunk-LYUHKZY5.js";import"./chunk-YTP2CYRS.js";import"./chunk-HIFH5C55.js";import{Ab as L,Cc as T,Gb as f,Ha as S,Hc as l,Jc as x,Vc as N,Wb as c,Yb as d,bc as m,cc as o,dc as r,dd as w,ec as g,ic as z,jc as C,lc as y,nb as i,pa as v,qc as h,sc as s,ya as u,za as _}from"./chunk-LLZZ4NMO.js";import"./chunk-3XFQOAE3.js";var ve=()=>({overflow:"auto",display:"block",width:"100%"});function ye(e,a){e&1&&(o(0,"div",4)(1,"div",5)(2,"h3",6),l(3,"Already Authenticated"),r()()())}function Te(e,a){e&1&&(z(0),o(1,"h3",22),l(2,"Sign In"),r(),C())}function we(e,a){e&1&&(z(0),o(1,"h5",23),g(2,"nz-icon",24),r(),C())}function Ee(e,a){e&1&&(z(0),o(1,"h5",23),l(2,"Don't' have an account?"),r(),C())}function Se(e,a){if(e&1){let t=y();z(0),o(1,"a",25),h("click",function(){u(t);let n=s(2);return _(n.clickLink())}),l(2,"Register"),g(3,"nz-icon",26),r(),C()}}function Le(e,a){e&1&&l(0," The input is not a valid email. ")}function Ne(e,a){e&1&&l(0," Please enter your email. ")}function Me(e,a){if(e&1&&l(0),e&2){let t=s(3);x(" The email must be at least ",t.MinEmailLength," characters long. ")}}function be(e,a){if(e&1&&l(0),e&2){let t=s(3);x(" The email must be at most ",t.MaxEmailLength," characters long. ")}}function Fe(e,a){if(e&1&&(c(0,Le,1,0),c(1,Ne,1,0),c(2,Me,1,1),c(3,be,1,1)),e&2){let t=a.$implicit;d(t.hasError("email")?0:-1),i(),d(t.hasError("required")?1:-1),i(),d(t.hasError("min")?2:-1),i(),d(t.hasError("max")?3:-1)}}function Ve(e,a){e&1&&l(0," Please enter your password. ")}function De(e,a){if(e&1&&l(0),e&2){let t=s(3);x(" The password must be at least ",t.MinPasswordLength," characters long. ")}}function Ie(e,a){if(e&1&&l(0),e&2){let t=s(3);x(" The password must be at most ",t.MaxPasswordLength," characters long. ")}}function Re(e,a){if(e&1&&(c(0,Ve,1,0),c(1,De,1,1),c(2,Ie,1,1)),e&2){let t=a.$implicit;d(t.hasError("required")?0:-1),i(),d(t.hasError("min")?1:-1),i(),d(t.hasError("max")?2:-1)}}function Pe(e,a){if(e&1){let t=y();o(0,"div",4)(1,"div",5)(2,"nz-space",7),f(3,Te,3,0,"ng-container",8)(4,we,3,0,"ng-container",8),r()()(),o(5,"div",4)(6,"div",5)(7,"nz-space",7),f(8,Ee,3,0,"ng-container",8)(9,Se,4,0,"ng-container",8),r()()(),o(10,"div",4)(11,"div",9)(12,"form",10),h("ngSubmit",function(){u(t);let n=s();return _(n.login())}),o(13,"nz-form-item")(14,"nz-form-label",11),l(15,"Email"),r(),o(16,"nz-form-control",12)(17,"nz-input-wrapper"),g(18,"nz-icon",13)(19,"input",14),r(),f(20,Fe,4,4,"ng-template",null,0,w),r()(),o(22,"nz-form-item")(23,"nz-form-label",15),l(24,"Password"),r(),o(25,"nz-form-control",12)(26,"nz-input-wrapper"),g(27,"nz-icon",16)(28,"input",17),o(29,"nz-icon",18),h("click",function(){u(t);let n=s();return _(n.passwordVisible=!n.passwordVisible)}),r()(),f(30,Re,3,3,"ng-template",null,1,w),r()(),o(32,"nz-form-item")(33,"nz-form-control",19)(34,"app-form-errors",20),h("nzErrorResponseChanged",function(n){u(t);let xe=s();return _(xe.handleErrorResponseChanged(n))}),r(),o(35,"button",21),l(36," Sign In "),r()()()()()()}if(e&2){let t=T(21),p=T(31),n=s();i(12),m("formGroup",n.loginForm),i(2),m("nzSpan",12),i(2),m("nzSpan",18)("nzErrorTip",t),i(7),m("nzSpan",12),i(2),m("nzSpan",18)("nzErrorTip",p),i(3),m("type",n.passwordVisible?"text":"password"),i(),m("nzType",n.passwordVisible?"eye":"eye-invisible"),i(4),m("nzOffset",n.isOverMode()?0:12),i(),m("errorResponse",n.errorResponse),i(),m("nzLoading",n.isLoading())("disabled",!n.loginForm.valid)}}var vt=(()=>{class e{router=v(M);#e=v(fe);errorResponse=this.#e.selectors.errorResponse;isAuthenticated=this.#e.selectors.isAuthenticated;isOverMode=this.#e.selectors.isOverMode;isLoading=S(!1);passwordVisible=!1;MinEmailLength=3;MaxEmailLength=50;MinPasswordLength=16;MaxPasswordLength=32;passwordValidator=t=>{if(t.value){if(t.value.length<16)return{error:!0,min:!0};if(t.value.length>32)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};emailValidator=t=>{if(t.value){if(t.value.length<3)return{error:!0,min:!0};if(t.value.length>50)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};loginForm=new K({email:new E("",{nonNullable:!0,validators:[j.email,this.emailValidator]}),password:new E("",{nonNullable:!0,validators:[this.passwordValidator]})});login(){this.isLoading()||(this.isLoading.set(!0),this.#e.login({loading:this.isLoading,form:this.loginForm}))}resetForm(){this.loginForm.reset(),this.loginForm.controls.email.markAsPristine(),this.loginForm.controls.email.updateValueAndValidity(),this.loginForm.controls.password.markAsPristine(),this.loginForm.controls.password.updateValueAndValidity()}clickLink(){this.router.navigate(["examples","register-form"])}handleErrorResponseChanged(t){t&&this.resetForm()}ngOnDestroy(){this.#e.resetErrorResponse()}static \u0275fac=function(p){return new(p||e)};static \u0275cmp=L({type:e,selectors:[["app-login"]],decls:4,vars:3,consts:[["userErrorTpl",""],["passwordErrorTpl",""],[1,"normal-table-wrap"],[3,"nzBodyStyle"],["nz-row","","nzJustify","center"],["nz-col",""],["nz-typography","","nzType","danger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-col","","nzXs","24","nzSm","24","nzMd","18","nzLg","18","nzXl","18","nzXXl","12"],["nz-form","",3,"ngSubmit","formGroup"],["nzFor","email","nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nzInputPrefix","","nzType","user"],["nz-input","","formControlName","email","id","email","autocomplete","off","placeholder","Please enter you email"],["nzFor","password","nzRequired","",3,"nzSpan"],["nzInputPrefix","","nzType","lock"],["nz-input","","formControlName","password","id","password","autocomplete","off","placeholder","Please enter you password",3,"type"],["nzInputSuffix","",3,"click","nzType"],[3,"nzOffset"],[3,"nzErrorResponseChanged","errorResponse"],["nz-button","","nzType","primary","nzShape","round",1,"login-form-button",3,"nzLoading","disabled"],["nz-typography","","nzType","success"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","This feature is not implemented yet."],["nz-button","","nzType","link",3,"click"],["nzType","arrow-right"]],template:function(p,n){p&1&&(o(0,"div",2)(1,"nz-card",3),c(2,ye,4,0,"div",4)(3,Pe,37,13),r()()),p&2&&(i(),m("nzBodyStyle",N(2,ve)),i(),d(n.isAuthenticated()?2:3))},dependencies:[Z,Q,$,J,H,U,Y,ae,I,D,V,F,b,ue,O,q,se,pe,de,ce,re,ne,ee,te,X,W,me,le,A,R,P,k,_e,oe,ie,B,G],encapsulation:2,changeDetection:0})}return e})();export{vt as default};
