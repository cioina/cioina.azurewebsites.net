import{Q as A}from"./chunk-GQ4SWLYC.js";import{d as G}from"./chunk-GDY42P5U.js";import{Rb as V,Sb as N,Tb as L,Vb as S,r as c}from"./chunk-O32X4I2H.js";import{Ac as F,Bc as j,Cc as O,Ga as a,Ha as s,Hc as w,Ib as D,La as v,Ma as y,Ob as g,Pa as l,Vb as x,bd as k,ha as h,hc as p,ic as m,na as T,nc as z,qa as R,rd as I,sc as f,ta as o,uc as u,v as _,z as C,za as E}from"./chunk-MQ3FWWKD.js";var M=["componentTpl"];function W(n,d){if(n&1){let e=z();p(0,"div",1)(1,"button",2),f("click",function(){a(e);let r=u();return s(r.cancel())}),w(2,"Cancel"),m(),p(3,"button",3),f("click",function(){a(e);let r=u();return s(r.sure())}),w(4,"Ok"),m()()}}var B=(()=>{class n{componentTpl;sureEmitter=new l;cancelEmitter=new l;sure(){this.sureEmitter.emit()}cancel(){this.cancelEmitter.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=D({type:n,selectors:[["app-global-drawer-foot-tpl"]],viewQuery:function(t,r){if(t&1&&F(M,7),t&2){let i;j(i=O())&&(r.componentTpl=i.first)}},outputs:{sureEmitter:"sureEmitter",cancelEmitter:"cancelEmitter"},decls:2,vars:0,consts:[["componentTpl",""],[1,"end-start-center"],["nz-button","","nzType","default",1,"m-r-8",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(t,r){t&1&&g(0,W,5,0,"ng-template",null,0,k)},dependencies:[S,V,N,L],encapsulation:2,changeDetection:0})}return n})();var P=new R("drawer action btn token",{providedIn:"root",factory:()=>{let n=o(x),d=o(E),e=I(B,{environmentInjector:d});return n.attachView(e.hostView),e}});var fe=(()=>{class n{drawerRef;destroyRef=o(y);baseInjector=o(v);btnComponentRef=o(P);bsDrawerService=this.baseInjector.get(G);btnTpl=this.btnComponentRef.instance.componentTpl;constructor(){this.btnComponentRef.instance.sureEmitter.pipe(c(this.destroyRef)).subscribe(()=>this.sure()),this.btnComponentRef.instance.cancelEmitter.pipe(c(this.destroyRef)).subscribe(()=>this.cancel())}show(e,t={},r={}){let i=this.createDrawerConfig(e,t,r);return this.drawerRef=this.bsDrawerService.create(i),this.drawerRef.afterClose.pipe(C(b=>b||{status:0,value:null}))}createDrawerConfig(e,t={},r={}){let i={nzContent:e,nzClosable:!1,nzContentParams:{params:r},nzFooter:t.nzFooter||this.btnTpl};return A(i,t)}sure(){this.drawerRef.getContentComponent().getCurrentValue().pipe(h(e=>e?this.drawerRef.close({status:1,modalValue:e}):_(!1)),c(this.destroyRef)).subscribe()}cancel(){this.drawerRef.close({status:0,value:null})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{fe as a};
