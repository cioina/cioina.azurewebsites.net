import{A as ae,F as le,J as ge}from"./chunk-NNPVMTDS.js";import"./chunk-NPIFWPBG.js";import{h as se,i as ce,j as de,k as _e,l as ue,n as fe}from"./chunk-QQPEAWXI.js";import{a as q,b as O,i as G,k as B,l as oe,m as re}from"./chunk-QPXSU7FP.js";import"./chunk-OLLTQ7QT.js";import{l as M,pa as me,qa as pe}from"./chunk-5OGU5VSS.js";import{C as $,D as W,F as j,G as J,I as H,J as w,L as K,N as Q,O as U,S as Y,T as Z,U as ee,V as ne,Y as te,Z as ie,d as I,e as D,f as P,g as V,h as R,i as k,k as A,m as X}from"./chunk-CHRS3KRA.js";import{xa as F,za as b}from"./chunk-OSHPKM42.js";import"./chunk-LN3TDV4H.js";import"./chunk-FUEW3QGZ.js";import"./chunk-27QMBTGC.js";import{Aa as h,Cc as y,Gb as S,Hc as a,Ia as L,Jc as z,Mb as u,Vc as N,Wb as m,Yb as p,bc as s,cc as r,dc as i,dd as E,ec as _,ic as f,jc as g,lc as T,ob as o,qa as v,qc as x,sc as d,za as C}from"./chunk-PYPKZGXS.js";import"./chunk-3XFQOAE3.js";var Te=()=>({overflow:"auto",display:"block",width:"100%"});function ye(e,t){e&1&&(r(0,"div",4)(1,"div",5)(2,"h3",6),a(3,"Already Authenticated"),i()()())}function Ee(e,t){e&1&&(f(0),r(1,"h3",22),a(2,"Sign In"),i(),g())}function we(e,t){e&1&&(f(0),r(1,"h5",23),_(2,"nz-icon",24),i(),g())}function Le(e,t){e&1&&(f(0),r(1,"h5",23),a(2,"Don't' have an account?"),i(),g())}function Se(e,t){if(e&1){let n=T();f(0),r(1,"a",25),x("click",function(){C(n);let l=d(2);return h(l.clickLink())}),a(2,"Register"),_(3,"nz-icon",26),i(),g()}}function Ne(e,t){e&1&&a(0," The input is not a valid email. ")}function Me(e,t){e&1&&a(0," Please enter your email. ")}function Fe(e,t){if(e&1&&a(0),e&2){let n=d(3);z(" The email must be at least ",n.MinEmailLength," characters long. ")}}function be(e,t){if(e&1&&a(0),e&2){let n=d(3);z(" The email must be at most ",n.MaxEmailLength," characters long. ")}}function Ie(e,t){if(e&1&&(m(0,Ne,1,0),m(1,Me,1,0),m(2,Fe,1,1),m(3,be,1,1)),e&2){let n=t.$implicit;p(n.hasError("email")?0:-1),o(),p(n.hasError("required")?1:-1),o(),p(n.hasError("min")?2:-1),o(),p(n.hasError("max")?3:-1)}}function De(e,t){e&1&&_(0,"nz-icon",27)}function Pe(e,t){e&1&&_(0,"nz-icon",28)}function Ve(e,t){if(e&1&&m(0,De,1,0,"nz-icon",27)(1,Pe,1,0,"nz-icon",28),e&2){let n=t.$implicit;p(n?0:1)}}function Re(e,t){e&1&&a(0," Please enter your password. ")}function ke(e,t){if(e&1&&a(0),e&2){let n=d(3);z(" The password must be at least ",n.MinPasswordLength," characters long. ")}}function Ae(e,t){if(e&1&&a(0),e&2){let n=d(3);z(" The password must be at most ",n.MaxPasswordLength," characters long. ")}}function qe(e,t){if(e&1&&(m(0,Re,1,0),m(1,ke,1,1),m(2,Ae,1,1)),e&2){let n=t.$implicit;p(n.hasError("required")?0:-1),o(),p(n.hasError("min")?1:-1),o(),p(n.hasError("max")?2:-1)}}function Oe(e,t){if(e&1){let n=T();r(0,"div",4)(1,"div",5)(2,"nz-space",7),u(3,Ee,3,0,"ng-container",8)(4,we,3,0,"ng-container",8),i()()(),r(5,"div",4)(6,"div",5)(7,"nz-space",7),u(8,Le,3,0,"ng-container",8)(9,Se,4,0,"ng-container",8),i()()(),r(10,"div",4)(11,"div",9)(12,"form",10),x("ngSubmit",function(){C(n);let l=d();return h(l.login())}),r(13,"nz-form-item")(14,"nz-form-label",11),a(15,"Email"),i(),r(16,"nz-form-control",12)(17,"nz-input-wrapper"),_(18,"nz-icon",13)(19,"input",14),i(),u(20,Ie,4,4,"ng-template",null,0,E),i()(),r(22,"nz-form-item")(23,"nz-form-label",15),a(24,"Password"),i(),r(25,"nz-form-control",12)(26,"nz-input-password"),_(27,"nz-icon",16)(28,"input",17),u(29,Ve,2,1,"ng-template",18),i(),u(30,qe,3,3,"ng-template",null,1,E),i()(),r(32,"nz-form-item")(33,"nz-form-control",19)(34,"app-form-errors",20),x("nzErrorResponseChanged",function(l){C(n);let ve=d();return h(ve.handleErrorResponseChanged(l))}),i(),r(35,"button",21),a(36," Sign In "),i()()()()()()}if(e&2){let n=y(21),c=y(31),l=d();o(12),s("formGroup",l.loginForm),o(2),s("nzSpan",12),o(2),s("nzSpan",18)("nzErrorTip",n),o(7),s("nzSpan",12),o(2),s("nzSpan",18)("nzErrorTip",c),o(8),s("nzOffset",l.isOverMode()?0:12),o(),s("errorResponse",l.errorResponse),o(),s("nzLoading",l.isLoading())("disabled",!l.loginForm.valid)}}var Sn=(()=>{class e{router=v(M);#e=v(ge);errorResponse=this.#e.selectors.errorResponse;isAuthenticated=this.#e.selectors.isAuthenticated;isOverMode=this.#e.selectors.isOverMode;isLoading=L(!1);passwordVisible=!1;MinEmailLength=3;MaxEmailLength=50;MinPasswordLength=16;MaxPasswordLength=32;passwordValidator=n=>{if(n.value){if(n.value.length<16)return{error:!0,min:!0};if(n.value.length>32)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};emailValidator=n=>{if(n.value){if(n.value.length<3)return{error:!0,min:!0};if(n.value.length>50)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};loginForm=new H({email:new w("",{nonNullable:!0,validators:[W.email,this.emailValidator]}),password:new w("",{nonNullable:!0,validators:[this.passwordValidator]})});login(){this.isLoading()||(this.isLoading.set(!0),this.#e.login({loading:this.isLoading,form:this.loginForm}))}resetForm(){this.loginForm.reset(),this.loginForm.controls.email.markAsPristine(),this.loginForm.controls.email.updateValueAndValidity(),this.loginForm.controls.password.markAsPristine(),this.loginForm.controls.password.updateValueAndValidity()}clickLink(){this.router.navigate(["examples","register-form"])}handleErrorResponseChanged(n){n&&this.resetForm()}ngOnDestroy(){this.#e.resetErrorResponse()}static \u0275fac=function(c){return new(c||e)};static \u0275cmp=S({type:e,selectors:[["app-login"]],decls:4,vars:3,consts:[["userErrorTpl",""],["passwordErrorTpl",""],[1,"normal-table-wrap"],[3,"nzBodyStyle"],["nz-row","","nzJustify","center"],["nz-col",""],["nz-typography","","nzType","danger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-col","","nzXs","24","nzSm","24","nzMd","18","nzLg","18","nzXl","18","nzXXl","12"],["nz-form","",3,"ngSubmit","formGroup"],["nzFor","email","nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nzInputPrefix","","nzType","user"],["nz-input","","formControlName","email","id","email","autocomplete","off","placeholder","Please enter you email"],["nzFor","password","nzRequired","",3,"nzSpan"],["nzInputPrefix","","nzType","lock"],["nz-input","","formControlName","password","id","password","autocomplete","off","placeholder","Please enter you password"],["nzInputPasswordIcon",""],[3,"nzOffset"],[3,"nzErrorResponseChanged","errorResponse"],["nz-button","","nzType","primary","nzShape","round",1,"login-form-button",3,"nzLoading","disabled"],["nz-typography","","nzType","success"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","This feature is not implemented yet."],["nz-button","","nzType","link",3,"click"],["nzType","arrow-right"],["nzType","eye","nzTheme","twotone"],["nzType","eye-invisible","nzTheme","outline"]],template:function(c,l){c&1&&(r(0,"div",2)(1,"nz-card",3),m(2,ye,4,0,"div",4)(3,Oe,37,11),i()()),c&2&&(o(),s("nzBodyStyle",N(2,Te)),o(),p(l.isAuthenticated()?2:3))},dependencies:[Y,K,$,j,J,Q,U,le,P,D,I,b,F,ue,O,q,ce,se,_e,de,ae,ie,ne,te,Z,ee,X,pe,me,A,V,R,k,fe,re,oe,B,G],encapsulation:2,changeDetection:0})}return e})();export{Sn as default};
