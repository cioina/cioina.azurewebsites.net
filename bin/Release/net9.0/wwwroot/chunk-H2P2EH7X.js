import{A as re,F as ae,J as fe}from"./chunk-5ZNC6SRA.js";import"./chunk-AN4WQHQS.js";import{h as pe,i as se,j as ce,k as de,l as _e,n as ue}from"./chunk-I2TSC4Y4.js";import{a as O,b as q,i as B,k as X,l as ie,m as oe}from"./chunk-EYKXQAQZ.js";import{a as I,b as k,c as A,e as G}from"./chunk-HLWTKEP7.js";import"./chunk-3I7NOWJ2.js";import{ca as le,da as me,l as b}from"./chunk-IDAPXTSL.js";import"./chunk-7ETIJ5FI.js";import"./chunk-Q3PG4OCM.js";import{B as H,C as w,E as K,G as Q,H as U,L as Y,M as Z,N as ee,O as te,P as ne,d as R,e as D,f as P,v as W,w as $,y as j,z as J}from"./chunk-IW7H4CRV.js";import{ua as V,wa as F}from"./chunk-KPQYH44D.js";import"./chunk-3HJCPAY6.js";import"./chunk-5IWMTNFE.js";import{Bc as E,Db as g,Fa as L,Gc as a,Ic as v,Uc as M,Vb as c,Xb as d,ac as l,bc as r,cc as i,cd as T,dc as z,hc as C,ic as x,kc as y,lb as n,ma as S,pc as h,rc as p,va as u,wa as f,xb as N}from"./chunk-WTQVSPW6.js";import"./chunk-3XFQOAE3.js";var he=()=>({overflow:"auto",display:"block",width:"100%"});function ve(e,o){e&1&&(r(0,"div",5)(1,"div",6)(2,"h3",7),a(3,"Already Authenticated"),i()()())}function ye(e,o){e&1&&(C(0),r(1,"h3",22),a(2,"Sign In"),i(),x())}function Ee(e,o){e&1&&(C(0),r(1,"h5",23),z(2,"nz-icon",24),i(),x())}function Te(e,o){e&1&&(C(0),r(1,"h5",23),a(2,"Don't' have an account?"),i(),x())}function Se(e,o){if(e&1){let t=y();C(0),r(1,"a",25),h("click",function(){u(t);let m=p(2);return f(m.clickLink())}),a(2,"Register"),z(3,"nz-icon",26),i(),x()}}function we(e,o){e&1&&a(0," The input is not a valid email. ")}function Le(e,o){e&1&&a(0," Please enter your email. ")}function Ne(e,o){if(e&1&&a(0),e&2){let t=p(3);v(" The email must be at least ",t.MinEmailLength," characters long. ")}}function Me(e,o){if(e&1&&a(0),e&2){let t=p(3);v(" The email must be at most ",t.MaxEmailLength," characters long. ")}}function be(e,o){if(e&1&&(c(0,we,1,0),c(1,Le,1,0),c(2,Ne,1,1),c(3,Me,1,1)),e&2){let t=o.$implicit;d(t.hasError("email")?0:-1),n(),d(t.hasError("required")?1:-1),n(),d(t.hasError("min")?2:-1),n(),d(t.hasError("max")?3:-1)}}function Ve(e,o){if(e&1){let t=y();r(0,"nz-icon",27),h("click",function(){u(t);let m=p(2);return f(m.passwordVisible=!m.passwordVisible)}),i()}if(e&2){let t=p(2);l("nzType",t.passwordVisible?"eye":"eye-invisible")}}function Fe(e,o){e&1&&a(0," Please enter your password. ")}function Re(e,o){if(e&1&&a(0),e&2){let t=p(3);v(" The password must be at least ",t.MinPasswordLength," characters long. ")}}function De(e,o){if(e&1&&a(0),e&2){let t=p(3);v(" The password must be at most ",t.MaxPasswordLength," characters long. ")}}function Pe(e,o){if(e&1&&(c(0,Fe,1,0),c(1,Re,1,1),c(2,De,1,1)),e&2){let t=o.$implicit;d(t.hasError("required")?0:-1),n(),d(t.hasError("min")?1:-1),n(),d(t.hasError("max")?2:-1)}}function Ie(e,o){if(e&1){let t=y();r(0,"div",5)(1,"div",6)(2,"nz-space",8),g(3,ye,3,0,"ng-container",9)(4,Ee,3,0,"ng-container",9),i()()(),r(5,"div",5)(6,"div",6)(7,"nz-space",8),g(8,Te,3,0,"ng-container",9)(9,Se,4,0,"ng-container",9),i()()(),r(10,"div",5)(11,"div",10)(12,"form",11),h("ngSubmit",function(){u(t);let m=p();return f(m.login())}),r(13,"nz-form-item")(14,"nz-form-label",12),a(15,"Email"),i(),r(16,"nz-form-control",13)(17,"nz-input-group",14),z(18,"input",15),i(),g(19,be,4,4,"ng-template",null,0,T),i()(),r(21,"nz-form-item")(22,"nz-form-label",16),a(23,"Password"),i(),r(24,"nz-form-control",13)(25,"nz-input-group",17),z(26,"input",18),i(),g(27,Ve,1,1,"ng-template",null,1,T)(29,Pe,3,3,"ng-template",null,2,T),i()(),r(31,"nz-form-item")(32,"nz-form-control",19)(33,"app-form-errors",20),h("nzErrorResponseChanged",function(m){u(t);let _=p();return f(_.handleErrorResponseChanged(m))}),i(),r(34,"button",21),a(35," Sign In "),i()()()()()()}if(e&2){let t=E(20),s=E(28),m=E(30),_=p();n(12),l("formGroup",_.loginForm),n(2),l("nzSpan",12),n(2),l("nzSpan",18)("nzErrorTip",t),n(6),l("nzSpan",12),n(2),l("nzSpan",18)("nzErrorTip",m),n(),l("nzSuffix",s),n(),l("type",_.passwordVisible?"text":"password"),n(6),l("nzOffset",_.isOverMode()?0:12),n(),l("errorResponse",_.errorResponse),n(),l("nzLoading",_.isLoading())("disabled",!_.loginForm.valid)}}var ht=(()=>{class e{router=S(b);#e=S(fe);errorResponse=this.#e.selectors.errorResponse;isAuthenticated=this.#e.selectors.isAuthenticated;isOverMode=this.#e.selectors.isOverMode;isLoading=L(!1);passwordVisible=!1;MinEmailLength=3;MaxEmailLength=50;MinPasswordLength=16;MaxPasswordLength=32;passwordValidator=t=>{if(t.value){if(t.value.length<16)return{error:!0,min:!0};if(t.value.length>32)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};emailValidator=t=>{if(t.value){if(t.value.length<3)return{error:!0,min:!0};if(t.value.length>50)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};loginForm=new H({email:new w("",{nonNullable:!0,validators:[$.email,this.emailValidator]}),password:new w("",{nonNullable:!0,validators:[this.passwordValidator]})});login(){this.isLoading()||(this.isLoading.set(!0),this.#e.login({loading:this.isLoading,form:this.loginForm}))}resetForm(){this.loginForm.reset(),this.loginForm.controls.email.markAsPristine(),this.loginForm.controls.email.updateValueAndValidity(),this.loginForm.controls.password.markAsPristine(),this.loginForm.controls.password.updateValueAndValidity()}clickLink(){this.router.navigate(["examples","register-form"])}handleErrorResponseChanged(t){t&&this.resetForm()}ngOnDestroy(){this.#e.resetErrorResponse()}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=N({type:e,selectors:[["app-login"]],decls:4,vars:3,consts:[["userErrorTpl",""],["suffixTemplate",""],["passwordErrorTpl",""],[1,"normal-table-wrap"],[3,"nzBodyStyle"],["nz-row","","nzJustify","center"],["nz-col",""],["nz-typography","","nzType","danger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-col","","nzXs","24","nzSm","24","nzMd","18","nzLg","18","nzXl","18","nzXXl","12"],["nz-form","",3,"ngSubmit","formGroup"],["nzFor","email","nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nzPrefixIcon","user"],["nz-input","","formControlName","email","id","email","autocomplete","off","placeholder","Please enter you email"],["nzFor","password","nzRequired","",3,"nzSpan"],["nzPrefixIcon","lock",3,"nzSuffix"],["nz-input","","formControlName","password","id","password","autocomplete","off","placeholder","Please enter you password",3,"type"],[3,"nzOffset"],[3,"nzErrorResponseChanged","errorResponse"],["nz-button","","nzType","primary","nzShape","round",1,"login-form-button",3,"nzLoading","disabled"],["nz-typography","","nzType","success"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","This feature is not implemented yet."],["nz-button","","nzType","link",3,"click"],["nzType","arrow-right"],[1,"login-form-icon",3,"click","nzType"]],template:function(s,m){s&1&&(r(0,"div",3)(1,"nz-card",4),c(2,ve,4,0,"div",5)(3,Ie,36,13),i()()),s&2&&(n(),l("nzBodyStyle",M(2,he)),n(),d(m.isAuthenticated()?2:3))},dependencies:[Y,K,W,j,J,Q,U,ae,P,D,R,F,V,_e,q,O,se,pe,de,ce,re,ne,Z,te,ee,me,le,G,I,k,A,ue,oe,ie,X,B],encapsulation:2,changeDetection:0})}return e})();export{ht as default};
