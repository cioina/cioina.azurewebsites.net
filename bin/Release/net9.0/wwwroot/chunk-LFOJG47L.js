import{$b as lt,Ia as v,L as it,La as x,Va as w,W as ot,X as st,a as et,ab as nt,bb as b,kb as rt,rb as ft}from"./chunk-O32X4I2H.js";import{Ab as f,Ac as Y,Bc as J,Cc as K,Da as $,G as P,Ib as Q,J as R,Jb as U,Pa as W,Qa as Z,Ua as H,a as z,b as B,e as I,fa as S,hc as q,hd as tt,ia as M,ic as V,j as L,l as j,oa as D,q as O,r as m,ta as F,vc as X,wc as G,z as A,zb as k}from"./chunk-MQ3FWWKD.js";var c=function(o){return o.resize="resize",o.scroll="scroll",o.touchstart="touchstart",o.touchmove="touchmove",o.touchend="touchend",o.pageshow="pageshow",o.load="LOAD",o}(c||{});function ht(o){return typeof window<"u"&&o===window}function T(o){return ht(o)?{top:0,left:0,bottom:0}:o.getBoundingClientRect()}var mt=["fixedEl"],pt=["*"],ut="affix",d="ant-affix",gt=20,ct=(()=>{let o,N=[],y=[],p,_=[],E=[];return class C{static{let e=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[b()],p=[b()],O(null,null,o,{kind:"field",name:"nzOffsetTop",static:!1,private:!1,access:{has:t=>"nzOffsetTop"in t,get:t=>t.nzOffsetTop,set:(t,i)=>{t.nzOffsetTop=i}},metadata:e},N,y),O(null,null,p,{kind:"field",name:"nzOffsetBottom",static:!1,private:!1,access:{has:t=>"nzOffsetBottom"in t,get:t=>t.nzOffsetBottom,set:(t,i)=>{t.nzOffsetBottom=i}},metadata:e},_,E),e&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})}nzConfigService;scrollSrv;ngZone;platform;renderer;nzResizeObserver;cdr;directionality;_nzModuleName=ut;fixedEl;nzTarget;nzOffsetTop=m(this,N,void 0);nzOffsetBottom=(m(this,y),m(this,_,void 0));nzChange=(m(this,E),new W);dir="ltr";placeholderNode;affixStyle;placeholderStyle;positionChangeSubscription=I.EMPTY;offsetChanged$=new j(1);destroy$=new L;timeout;document=F(et);get target(){let e=this.nzTarget;return(typeof e=="string"?this.document.querySelector(e):e)||window}constructor(e,t,i,s,n,r,a,l,h){this.nzConfigService=t,this.scrollSrv=i,this.ngZone=s,this.platform=n,this.renderer=r,this.nzResizeObserver=a,this.cdr=l,this.directionality=h,this.placeholderNode=e.nativeElement}ngOnInit(){this.directionality.change?.pipe(S(this.destroy$)).subscribe(e=>{this.dir=e,this.registerListeners(),this.updatePosition({}),this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){let{nzOffsetBottom:t,nzOffsetTop:i,nzTarget:s}=e;(t||i)&&this.offsetChanged$.next(),s&&this.registerListeners()}ngAfterViewInit(){this.registerListeners()}ngOnDestroy(){this.removeListeners()}registerListeners(){if(!this.platform.isBrowser)return;this.removeListeners();let e=this.target===window?this.document.body:this.target;this.positionChangeSubscription=this.ngZone.runOutsideAngular(()=>R(...Object.keys(c).map(t=>P(this.target,t)),this.offsetChanged$.pipe(A(()=>({}))),this.nzResizeObserver.observe(e)).pipe(M(gt,void 0,{trailing:!0}),S(this.destroy$)).subscribe(t=>this.updatePosition(t))),this.timeout=setTimeout(()=>this.updatePosition({}))}removeListeners(){clearTimeout(this.timeout),this.positionChangeSubscription.unsubscribe(),this.destroy$.next(!0),this.destroy$.complete()}getOffset(e,t){let i=e.getBoundingClientRect(),s=T(t),n=this.scrollSrv.getScroll(t,!0),r=this.scrollSrv.getScroll(t,!1),a=this.document.body,l=a.clientTop||0,h=a.clientLeft||0;return{top:i.top-s.top+n-l,left:i.left-s.left+r-h,width:i.width,height:i.height}}setAffixStyle(e,t){let i=this.affixStyle,s=this.target===window;if(e.type===c.scroll&&i&&t&&s||v(i,t))return;let n=!!t,r=this.fixedEl.nativeElement;this.renderer.setStyle(r,"cssText",w(t)),this.affixStyle=t,n?r.classList.add(d):r.classList.remove(d),this.updateRtlClass(),(t&&!i||!t&&i)&&this.nzChange.emit(n)}setPlaceholderStyle(e){let t=this.placeholderStyle;v(e,t)||(this.renderer.setStyle(this.placeholderNode,"cssText",w(e)),this.placeholderStyle=e)}syncPlaceholderStyle(e){if(!this.affixStyle||this.placeholderNode.offsetWidth)return;this.renderer.setStyle(this.placeholderNode,"cssText",""),this.placeholderStyle=void 0;let t={width:this.placeholderNode.offsetWidth,height:this.fixedEl.nativeElement.offsetHeight};this.setAffixStyle(e,z(z({},this.affixStyle),t)),this.setPlaceholderStyle(t)}updatePosition(e){if(!this.platform.isBrowser||e.type===c.touchstart||e.type===c.touchmove||e.type===c.touchend)return;let t=this.target,i=this.nzOffsetTop,s=this.scrollSrv.getScroll(t,!0),n=this.getOffset(this.placeholderNode,t),r=this.fixedEl.nativeElement,a={width:r.offsetWidth,height:r.offsetHeight},l={top:!1,bottom:!1};typeof i!="number"&&typeof this.nzOffsetBottom!="number"?(l.top=!0,i=0):(l.top=typeof i=="number",l.bottom=typeof this.nzOffsetBottom=="number");let h=T(t),at=t.innerHeight||t.clientHeight;if(s>=n.top-i&&l.top){let u=n.width??a.width,g=h.top+i;this.setAffixStyle(e,{position:"fixed",top:g,left:h.left+n.left,width:u}),this.setPlaceholderStyle({width:u})}else if(s<=n.top+a.height+this.nzOffsetBottom-at&&l.bottom){let u=t===window?0:window.innerHeight-h.bottom,g=n.width??a.width;this.setAffixStyle(e,{position:"fixed",bottom:u+this.nzOffsetBottom,left:h.left+n.left,width:g}),this.setPlaceholderStyle({width:g,height:n.height})}else e.type===c.resize&&this.affixStyle&&this.affixStyle.position==="fixed"&&this.placeholderNode.offsetWidth?this.setAffixStyle(e,B(z({},this.affixStyle),{width:this.placeholderNode.offsetWidth})):this.setAffixStyle(e);e.type===c.resize&&this.syncPlaceholderStyle(e)}updateRtlClass(){let e=this.fixedEl.nativeElement;this.dir==="rtl"?e.classList.contains(d)?e.classList.add(`${d}-rtl`):e.classList.remove(`${d}-rtl`):e.classList.remove(`${d}-rtl`)}static \u0275fac=function(t){return new(t||C)(f(H),f(nt),f(rt),f(Z),f(it),f(k),f(lt),f(tt),f(ot))};static \u0275cmp=Q({type:C,selectors:[["nz-affix"]],viewQuery:function(t,i){if(t&1&&Y(mt,7),t&2){let s;J(s=K())&&(i.fixedEl=s.first)}},inputs:{nzTarget:"nzTarget",nzOffsetTop:[2,"nzOffsetTop","nzOffsetTop",x],nzOffsetBottom:[2,"nzOffsetBottom","nzOffsetBottom",x]},outputs:{nzChange:"nzChange"},exportAs:["nzAffix"],features:[$],ngContentSelectors:pt,decls:3,vars:0,consts:[["fixedEl",""]],template:function(t,i){t&1&&(X(),q(0,"div",null,0),G(2),V())},dependencies:[st,ft],encapsulation:2,changeDetection:0})}})();var kt=(()=>{class o{static \u0275fac=function(p){return new(p||o)};static \u0275mod=U({type:o});static \u0275inj=D({imports:[ct]})}return o})();export{ct as a,kt as b};
