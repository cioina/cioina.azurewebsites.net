import{A as J,F as ne,J as _e}from"./chunk-HLPLMXCH.js";import"./chunk-NIQ32PZB.js";import{f as le,g as me,h as pe,i as se,j as ce,l as de}from"./chunk-GDY42P5U.js";import{B as G,K as H,M as K,O as Q,P as U,Q as Y,R as Z,S as ee,T as te,U as re,V as ae,l as M,m as F,o as R,p as D,r as P,s as S,u as I,w as k,x as A}from"./chunk-PWGDKQNX.js";import{Cb as b,E as N,Eb as V,Ib as q,Jb as B,Kb as O,Rb as X,Sb as W,Tb as $,Vb as j,ac as ie,bc as oe}from"./chunk-O32X4I2H.js";import{Ga as u,Gc as T,Ha as f,Hc as a,Ib as L,Jc as h,Ob as d,Wa as w,Xb as l,bd as E,cc as c,hc as r,ic as i,jc as g,kc as z,lc as C,nc as v,sc as x,ta as y,uc as p,vb as n}from"./chunk-MQ3FWWKD.js";function Ce(e,o){e&1&&(r(0,"div",5)(1,"div",6)(2,"h3",7),a(3,"Already Authenticated"),i()()())}function xe(e,o){e&1&&(z(0),r(1,"h3",22),a(2,"Sign In"),i(),C())}function he(e,o){e&1&&(z(0),r(1,"h5",23),g(2,"nz-icon",24),i(),C())}function ve(e,o){e&1&&(z(0),r(1,"h5",23),a(2,"Don't' have an account?"),i(),C())}function Te(e,o){if(e&1){let t=v();z(0),r(1,"a",25),x("click",function(){u(t);let m=p(2);return f(m.clickLink())}),a(2,"Register"),g(3,"nz-icon",26),i(),C()}}function Ee(e,o){e&1&&a(0," The input is not a valid email. ")}function ye(e,o){e&1&&a(0," Please enter your email. ")}function Se(e,o){if(e&1&&a(0),e&2){let t=p(3);h(" The email must be at least ",t.MinEmailLength," characters long. ")}}function we(e,o){if(e&1&&a(0),e&2){let t=p(3);h(" The email must be at most ",t.MaxEmailLength," characters long. ")}}function Le(e,o){if(e&1&&d(0,Ee,1,0)(1,ye,1,0)(2,Se,1,1)(3,we,1,1),e&2){let t=o.$implicit;c(t.hasError("email")?0:-1),n(),c(t.hasError("required")?1:-1),n(),c(t.hasError("min")?2:-1),n(),c(t.hasError("max")?3:-1)}}function Ne(e,o){if(e&1){let t=v();r(0,"nz-icon",27),x("click",function(){u(t);let m=p(2);return f(m.passwordVisible=!m.passwordVisible)}),i()}if(e&2){let t=p(2);l("nzType",t.passwordVisible?"eye":"eye-invisible")}}function be(e,o){e&1&&a(0," Please enter your password. ")}function Ve(e,o){if(e&1&&a(0),e&2){let t=p(3);h(" The password must be at least ",t.MinPasswordLength," characters long. ")}}function Me(e,o){if(e&1&&a(0),e&2){let t=p(3);h(" The password must be at most ",t.MaxPasswordLength," characters long. ")}}function Fe(e,o){if(e&1&&d(0,be,1,0)(1,Ve,1,1)(2,Me,1,1),e&2){let t=o.$implicit;c(t.hasError("required")?0:-1),n(),c(t.hasError("min")?1:-1),n(),c(t.hasError("max")?2:-1)}}function Re(e,o){if(e&1){let t=v();r(0,"div",5)(1,"div",6)(2,"nz-space",8),d(3,xe,3,0,"ng-container",9)(4,he,3,0,"ng-container",9),i()()(),r(5,"div",5)(6,"div",6)(7,"nz-space",8),d(8,ve,3,0,"ng-container",9)(9,Te,4,0,"ng-container",9),i()()(),r(10,"div",5)(11,"div",10)(12,"form",11),x("ngSubmit",function(){u(t);let m=p();return f(m.login())}),r(13,"nz-form-item")(14,"nz-form-label",12),a(15,"Email"),i(),r(16,"nz-form-control",13)(17,"nz-input-group",14),g(18,"input",15),i(),d(19,Le,4,4,"ng-template",null,0,E),i()(),r(21,"nz-form-item")(22,"nz-form-label",16),a(23,"Password"),i(),r(24,"nz-form-control",13)(25,"nz-input-group",17),g(26,"input",18),i(),d(27,Ne,1,1,"ng-template",null,1,E)(29,Fe,3,3,"ng-template",null,2,E),i()(),r(31,"nz-form-item")(32,"nz-form-control",19)(33,"button",20),a(34," Sign In "),i()()()(),r(35,"app-form-errors",21),x("nzErrorResponseChanged",function(m){u(t);let _=p();return f(_.handleErrorResponseChanged(m))}),i()()()}if(e&2){let t=T(20),s=T(28),m=T(30),_=p();n(12),l("formGroup",_.loginForm),n(2),l("nzSpan",12),n(2),l("nzSpan",18)("nzErrorTip",t),n(6),l("nzSpan",12),n(2),l("nzSpan",18)("nzErrorTip",m),n(),l("nzSuffix",s),n(),l("type",_.passwordVisible?"text":"password"),n(6),l("nzOffset",12)("nzSpan",18),n(),l("nzLoading",_.isLoading())("disabled",!_.loginForm.valid),n(2),l("errorResponse",_.errorResponse)}}var zt=(()=>{class e{router=y(N);#e=y(_e);errorResponse=this.#e.selectors.errorResponse;isAuthenticated=this.#e.selectors.isAuthenticated;isLoading=w(!1);passwordVisible=!1;MinEmailLength=3;MaxEmailLength=50;MinPasswordLength=16;MaxPasswordLength=32;passwordValidator=t=>{if(t.value){if(t.value.length<16)return{error:!0,min:!0};if(t.value.length>32)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};emailValidator=t=>{if(t.value){if(t.value.length<3)return{error:!0,min:!0};if(t.value.length>50)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};loginForm=new P({email:new S("",{nonNullable:!0,validators:[F.email,this.emailValidator]}),password:new S("",{nonNullable:!0,validators:[this.passwordValidator]})});login(){this.isLoading()||(this.isLoading.set(!0),this.#e.login({loading:this.isLoading,form:this.loginForm}))}resetForm(){this.loginForm.reset(),this.loginForm.controls.email.markAsPristine(),this.loginForm.controls.email.updateValueAndValidity(),this.loginForm.controls.password.markAsPristine(),this.loginForm.controls.password.updateValueAndValidity()}clickLink(){this.router.navigate(["examples","register-form"])}handleErrorResponseChanged(t){t&&this.resetForm()}ngOnDestroy(){this.#e.resetErrorResponse()}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=L({type:e,selectors:[["app-login"]],decls:4,vars:2,consts:[["userErrorTpl",""],["suffixTemplate",""],["passwordErrorTpl",""],[1,"normal-table-wrap"],[1,"m-b-20",3,"nzBordered"],["nz-row","","nzJustify","center"],["nz-col",""],["nz-typography","","nzType","danger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-col","","nzXs","16","nzSm","17","nzMd","17","nzLg","18","nzXl","18","nzXXl","12"],["nz-form","",3,"ngSubmit","formGroup"],["nzFor","email","nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["nzPrefixIcon","user"],["nz-input","","formControlName","email","id","email","autocomplete","off","placeholder","Please enter you email"],["nzFor","password","nzRequired","",3,"nzSpan"],["nzPrefixIcon","lock",3,"nzSuffix"],["nz-input","","formControlName","password","id","password","autocomplete","off","placeholder","Please enter you password",3,"type"],[3,"nzOffset","nzSpan"],["nz-button","","nzType","primary","nzShape","round",1,"login-form-button",3,"nzLoading","disabled"],[3,"nzErrorResponseChanged","errorResponse"],["nz-typography","","nzType","success"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","This feature is not implemented yet."],["nz-button","","nzType","link",3,"click"],["nzType","arrow-right"],[1,"login-form-icon",3,"click","nzType"]],template:function(s,m){s&1&&(r(0,"div",3)(1,"nz-card",4),d(2,Ce,4,0,"div",5)(3,Re,36,14),i()()),s&2&&(n(),l("nzBordered",!0),n(),c(m.isAuthenticated()?2:3))},dependencies:[G,I,M,R,D,k,A,ne,O,B,q,V,b,ce,ae,re,me,le,se,pe,J,Z,Q,Y,U,oe,ie,j,X,W,$,de,te,ee,K,H],encapsulation:2,changeDetection:0})}return e})();export{zt as default};
