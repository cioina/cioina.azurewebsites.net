import{a as Ft,b as Gn}from"./chunk-DGWQS7QH.js";import{a as Jn,b as Hn,c as Ot,d as Pt}from"./chunk-GJYOVCJI.js";import{a as On,b as Pn,c as Fn,d as Bn,e as Qn,f as jn}from"./chunk-RQOXHSAQ.js";import{a as Le,b as ye}from"./chunk-PIECI2SU.js";import{A as q,B as Nt,C as Dt,D as kt,E as Rt,F as He,G as ne,H as Nn,I as Dn,J as Vt,d as zn,e as le,h as Ln,j as yn,m as St,n as wt,o as Lt,p as yt,t as vt,u as bt,v as Mt,w as It,x as bn,y as Mn,z as In}from"./chunk-DQL7YQFK.js";import"./chunk-OJS4HORB.js";import{a as kn}from"./chunk-2K2SUPBZ.js";import{a as Rn,b as Vn}from"./chunk-7B4C2SUX.js";import{a as Wn}from"./chunk-SCSUKDHS.js";import{b as ue,d as wn,e as ze,f as Ge,g as Ue,h as Ye,i as Ke,j as qe,k as ie,l as oe}from"./chunk-5DICTUBO.js";import{C as Qe,E as je,F as We,G as Je,J as Ee,K as Z,L as X,M as $,N as ee,O as te,d as ke,g as Ce,h as Re,j as Ve,k as de,l as Te,m as Oe,o as Pe,p as Fe,s as Ae,t as Be}from"./chunk-UHWNKUEP.js";import{$a as xn,Db as W,Eb as J,Fb as H,Gb as Ct,Hb as Tt,Jb as At,L as Cn,Mb as G,Nb as U,Ob as Y,Pb as vn,Qb as K,Rb as xt,Sb as Et,Tb as xe,Xb as Se,Ya as An,Yb as we,Za as zt,_a as De,bb as En,cb as Sn,h as Xe,i as me,ma as Tn,mb as he,u as hn,xb as O,zb as P}from"./chunk-GXB3XVBA.js";import{$b as S,$c as ve,Ab as ce,Ac as T,Bc as d,Cc as V,Db as jt,Dc as y,Dd as un,Fc as mn,Ga as f,Gc as N,Ha as u,Hb as I,Hc as D,Ib as ln,Ic as k,Ja as on,L as en,La as Ie,Ma as rn,Mc as Ne,Nb as p,Nc as b,Pa as ge,Pc as ut,Qa as an,Qc as dn,Tb as sn,Tc as ht,Ub as m,V as Qt,Vc as pn,Wb as Ze,Wc as gn,Xa as M,Xc as E,a as re,ad as j,b as ae,bc as F,cc as B,dc as Q,dd as fe,ec as a,fa as pe,fc as r,fd as _n,ga as Me,gc as h,hc as g,ia as ct,ic as _,kc as x,na as tn,nc as C,oa as nn,pc as c,q as be,qc as mt,r as se,rc as dt,sc as Wt,ta as w,tc as pt,vb as s,vc as gt,wc as _t,xc as ft,yc as Jt,zc as cn,zd as fn}from"./chunk-M4WFQFY3.js";var Ht=(()=>{class t extends Dn{#e=w(Vt);#t=w(Ln);#n=w(yn);#o=w(un);nzMessageService=w(ne);articleListConfig=this.#e.selectors.articleListConfig;ngrxOnStoreInit(){this.setState({articleList:[],tags:[],articleCount:0,errorResponse:null,currentArticle:null})}deleteArticle=this.effect(pe(e=>(e.loading.set(!0),this.#t.deleteArticle(e.articleId).pipe(le({next:n=>{if(n>0){let i=this.selectors.articleList(),l=[];i.forEach(z=>{z.id!==e.articleId&&l.push(z)}),this.patchState({articleList:l})}else console.info(`Delete Article ID Failed: ${e.articleId}`)},error:n=>{ve()?console.error(`Delete Article ID Failed with: ${e.articleId}`,n.error??n.message):console.warn(`Delete Article ID Failed with: ${e.articleId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));linkTags=this.effect(pe(e=>(e.loading.set(!0),this.#t.linkTags(e.articleTags).pipe(le({next:n=>{if(n>=0){let i=this.selectors.articleList(),l=[];i.forEach(z=>{z.id!==e.articleTags.articleId||(z.tagList=e.articleTags.tags),l.push(z)}),this.patchState({articleList:l})}else console.info(`Link Tags Article ID Failed: ${e.articleTags.articleId}`)},error:n=>{ve()?console.error(`Link Tags Article ID Failed: ${e.articleTags.articleId}`,n.error??n.message):console.warn(`Link Tags Article ID Failed: ${e.articleTags.articleId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));getArticleDetails=this.effect(pe(e=>(e.loading.set(!0),this.#t.getArticleDetail(e.articleId).pipe(le({next:n=>{this.patchState({currentArticle:n.article})},error:n=>{this.patchState({currentArticle:null,errorResponse:n.error}),ve()?console.error(`Get Article Details with: ${e.articleId}`,n.error??n.message):console.warn(`Get Article Details with: ${e.articleId}`,n.message)},finalize:()=>{e.loading.set(!1)}})))));createTag=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#n.createTag(e.form.getRawValue()).pipe(le(this.#r(e))))));editTag=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#n.editTag(e.tagId,e.form.getRawValue()).pipe(le(this.#r(e))))));deleteTag=this.effect(pe(e=>(e.loading.set(!0),this.#n.deleteTag(e.tagId).pipe(le({next:n=>{if(n>0){let i=this.selectors.tags(),l=[];i.forEach(z=>{z.id!==n&&l.push(z)}),this.patchState({tags:l})}else console.info(`Delete Tags ID Failed : ${e.tagId}`)},error:n=>{this.patchState({errorResponse:n.error}),ve()?console.error(`Delete Tag ID Failed with: ${e.tagId}`,n.error??n.message):console.warn(`Delete Tag ID Failed with: ${e.tagId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));#r=e=>({next:n=>{let i=this.selectors.tags(),l=[];l.push(n.tag),i.forEach(z=>{z.id!==n.tag.id&&l.push(z)}),this.patchState({tags:l}),this.selectors.errorResponse()&&this.patchState({errorResponse:null})},error:n=>{this.patchState({errorResponse:n.error})},finalize:()=>{e.form.enable(),e.loading.set(!1)}});getTags=this.effect(Qt(e=>(e.set(!0),this.#n.getTags().pipe(le(n=>{this.patchState({tags:n.tags})},n=>{ve()?console.error("Get Tags Failed",n):console.warn(`Get Tags Failed: ${n.message}`)},()=>{e.set(!1)})))));createArticle=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#t.createArticle(ae(re({},e.form.getRawValue()),{published:e.published})).pipe(le(this.#a(e))))));editArticle=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#t.editArticle(e.articleId,ae(re({},e.form.getRawValue()),{published:e.published})).pipe(le(this.#a(e))))));#a=e=>({next:n=>{let i=this.selectors.articleList(),l=i.findIndex(A=>A.id===n.article.id),z=[];l<0?(z.push(n.article),i.forEach(A=>{z.push(A)})):i.forEach(A=>{A.id===n.article.id?z.push(n.article):z.push(A)}),this.patchState({articleList:z,currentArticle:n.article}),this.selectors.errorResponse()&&this.patchState({errorResponse:null})},error:n=>{this.patchState({errorResponse:n.error})},finalize:()=>{e.form.enable(),e.loading.set(!1)}});queryArticle=this.effect(ct(e=>{this.#e.patchState({articleListConfig:ae(re({},this.articleListConfig()),{currentPage:e.params.offset?this.articleListConfig().currentPage:1,filters:{limit:e.params.limit,offset:e.params.offset,tags:e.params.tags,published:e.params.published,createdAtAsc:e.params.createdAtAsc}})}),this.#i(e.loading)}));onOffsetChange=this.effect(ct(e=>{this.#e.patchState({articleListConfig:ae(re({},this.articleListConfig()),{currentPage:e.offset,filters:ae(re({},this.articleListConfig().filters),{offset:Number(this.articleListConfig().filters.limit)*(e.offset-1)})})}),this.#o.scrollToPosition([0,0]),this.#i(e.loading)}));onLimitChange=this.effect(ct(e=>{this.#e.patchState({articleListConfig:ae(re({},this.articleListConfig()),{currentPage:1,filters:ae(re({},this.articleListConfig().filters),{limit:e.limit,offset:0})})}),this.#o.scrollToPosition([0,0]),this.#i(e.loading)}));#i=this.effect(Qt(e=>(e.set(!0),(()=>{let n=this.articleListConfig()?.filters;return this.#t.getAllArticles({limit:n.limit,offset:n.offset,tags:n.tags,published:n.published,createdAtAsc:n.createdAtAsc})})().pipe(le(n=>{this.patchState({articleList:n.articles,articleCount:n.total})},n=>{ve()?console.error("getAllArticles Failed",n):console.warn(`getAllArticles Failed: ${n.message}`),this.#e.openMessageDrawer(M(n.message))},()=>{e.set(!1)})))));resetErrorResponse=this.updater(e=>ae(re({},e),{currentArticle:null,errorResponse:null}));static \u0275fac=(()=>{let e;return function(i){return(e||(e=on(t)))(i||t)}})();static \u0275prov=tn({token:t,factory:t.\u0275fac})}return t})();var gi=()=>({standalone:!0}),Kn=()=>({minRows:2,maxRows:5}),_i=()=>({minRows:5,maxRows:10});function fi(t,o){if(t&1){let e=x();g(0),a(1,"button",24),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.confirmApply())}),h(2,"nz-icon",25),d(3," Undo "),r(),_()}if(t&2){let e=c(2),n=T(8);s(),m("nzIcon",n)("disabled",e.isLoading())}}function ui(t,o){t&1&&p(0,fi,4,2,"ng-container",10)}function hi(t,o){if(t&1){let e=x();g(0),a(1,"button",26),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",27),d(3," Close "),r(),_()}if(t&2){let e=c(),n=T(6);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function zi(t,o){t&1&&(g(0),a(1,"h4",28),h(2,"nz-icon",29),r(),_())}function Ci(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to close without changes?"),r(),_())}function Ti(t,o){t&1&&(a(0,"nz-space",9),p(1,zi,3,0,"ng-container",10)(2,Ci,3,0,"ng-container",10),r())}function Ai(t,o){t&1&&(g(0),a(1,"h4",31),h(2,"nz-icon",29),r(),_())}function xi(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to undo all changes?"),r(),_())}function Ei(t,o){t&1&&(a(0,"nz-space",9),p(1,Ai,3,0,"ng-container",10)(2,xi,3,0,"ng-container",10),r())}function Si(t,o){t&1&&d(0," Please enter slug. ")}function wi(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The slug must be at least ",e.MinTitleLength," characters long. ")}}function Li(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The slug must be at most ",e.MaxTitleLength," characters long. ")}}function yi(t,o){if(t&1&&p(0,Si,1,0)(1,wi,1,1)(2,Li,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function vi(t,o){t&1&&d(0," Please enter title. ")}function bi(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The title must be at least ",e.MinTitleLength," characters long. ")}}function Mi(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The title must be at most ",e.MaxTitleLength," characters long. ")}}function Ii(t,o){if(t&1&&p(0,vi,1,0)(1,bi,1,1)(2,Mi,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function Ni(t,o){t&1&&d(0," Please enter description. ")}function Di(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The description must be at least ",e.MinDescriptionLength," characters long. ")}}function ki(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The description must be at most ",e.MaxDescriptionLength," characters long. ")}}function Ri(t,o){if(t&1&&p(0,Ni,1,0)(1,Di,1,1)(2,ki,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function Vi(t,o){if(t&1){let e=x();g(0),a(1,"button",32),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),d(2," Submit "),r(),_()}if(t&2){let e=c(),n=T(43);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.articleForm.valid)}}function Oi(t,o){if(t&1){let e=x();g(0),a(1,"button",26),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),d(2," Reset "),r(),_()}if(t&2){let e=c(),n=T(45);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Pi(t,o){t&1&&(g(0),a(1,"h4",31),h(2,"nz-icon",29),r(),_())}function Fi(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to submit form?"),r(),_())}function Bi(t,o){t&1&&(a(0,"nz-space",9),p(1,Pi,3,0,"ng-container",10)(2,Fi,3,0,"ng-container",10),r())}function Qi(t,o){t&1&&(g(0),a(1,"h4",28),h(2,"nz-icon",29),r(),_())}function ji(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to reset form?"),r(),_())}function Wi(t,o){t&1&&(a(0,"nz-space",9),p(1,Qi,3,0,"ng-container",10)(2,ji,3,0,"ng-container",10),r())}var Xn=(()=>{class t{article;currentArticle;errorResponse;nzMessageService=w(ne);drawerRef=w(ue);published=!1;atLeastOneTry=!1;isSubmited=!1;changeDetectorRef=w(j);messageId=null;MinTitleLength=2;MaxTitleLength=320;MinDescriptionLength=2;MaxDescriptionLength=2e5;isLoading=M(!0);injector=w(Ie);titleValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>320)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};descriptionValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>2e5)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};articleForm=new Ve({slug:new de("",{nonNullable:!0,validators:[this.titleValidator]}),title:new de("",{nonNullable:!0,validators:[this.titleValidator]}),description:new de("",{nonNullable:!0,validators:[this.descriptionValidator]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}patchArticle(e){this.articleForm.patchValue(e),this.published=e.published}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.article&&this.patchArticle(this.article),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.isSubmited=!1,e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&this.isSubmited&&(this.removeMessageService(),this.drawerRef.close(!0))}),this.isLoading.set(!1)}submitForm(){this.isLoading()||(this.setMessageService(),this.atLeastOneTry=!0,this.isSubmited=!0,this.article?this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published,articleId:this.article.id}):this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published}))}resetForm(){this.articleForm.reset(),this.articleForm.controls.slug.markAsPristine(),this.articleForm.controls.slug.updateValueAndValidity(),this.articleForm.controls.title.markAsPristine(),this.articleForm.controls.title.updateValueAndValidity(),this.articleForm.controls.description.markAsPristine(),this.articleForm.controls.description.updateValueAndValidity(),this.published=!1,this.changeDetectorRef.markForCheck()}confirmClose(){this.atLeastOneTry&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}confirmApply(){this.article&&(this.resetForm(),this.patchArticle(this.article))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing-tags-edit"]],inputs:{article:"article",currentArticle:"currentArticle",errorResponse:"errorResponse"},decls:47,vars:22,consts:[["closeTpl",""],["applyTpl",""],["slugErrorTpl",""],["titleErrorTpl",""],["descriptionErrorTpl",""],["submitTpl",""],["resetTpl",""],["nz-row","","nzJustify","end"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nzCheckedChildren","Published","nzUnCheckedChildren","Unpublished",3,"ngModelChange","ngModel","ngModelOptions"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],["nz-form","",3,"formGroup"],["nzFor","slug","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","slug","id","slug","placeholder","Enter article slug",3,"nzAutosize"],["nzFor","title","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","title","id","title","placeholder","Enter article title",3,"nzAutosize"],["nzFor","description","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","description","id","description","placeholder","Enter article description",3,"nzAutosize"],[3,"nzSpan"],[3,"errorResponse"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","disabled"],["nzType","undo"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzType","close"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"]],template:function(n,i){if(n&1){let l=x();a(0,"div",7)(1,"div",8)(2,"nz-space",9),p(3,ui,1,0,"ng-container")(4,hi,4,3,"ng-container",10),r()(),p(5,Ti,3,0,"ng-template",null,0,E)(7,Ei,3,0,"ng-template",null,1,E),r(),a(9,"nz-card")(10,"div",7)(11,"div",8)(12,"nz-switch",11),k("ngModelChange",function(A){return f(l),D(i.published,A)||(i.published=A),u(A)}),r()()(),a(13,"div",12)(14,"div",13)(15,"form",14)(16,"nz-form-item")(17,"nz-form-label",15),d(18,"Slug"),r(),a(19,"nz-form-control",16),h(20,"textarea",17),r(),p(21,yi,3,3,"ng-template",null,2,E),r(),a(23,"nz-form-item")(24,"nz-form-label",18),d(25,"Title"),r(),a(26,"nz-form-control",16),h(27,"textarea",19),r(),p(28,Ii,3,3,"ng-template",null,3,E),r(),a(30,"nz-form-item")(31,"nz-form-label",20),d(32,"Description"),r(),a(33,"nz-form-control",16),h(34,"textarea",21),r(),p(35,Ri,3,3,"ng-template",null,4,E),r(),a(37,"nz-form-item")(38,"nz-form-control",22)(39,"nz-space",9),p(40,Vi,3,3,"ng-container",10)(41,Oi,3,3,"ng-container",10),r()(),p(42,Bi,3,0,"ng-template",null,5,E)(44,Wi,3,0,"ng-template",null,6,E),r()(),h(46,"app-form-errors",23),r()()()}if(n&2){let l=T(22),z=T(29),A=T(36);s(3),S(i.article?3:-1),s(9),N("ngModel",i.published),m("ngModelOptions",b(18,gi)),s(3),m("formGroup",i.articleForm),s(2),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(19,Kn)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",z),s(),m("nzAutosize",b(20,Kn)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",A),s(),m("nzAutosize",b(21,_i)),s(4),m("nzSpan",24),s(8),m("errorResponse",i.errorResponse)}},dependencies:[Be,Oe,ke,Ce,Re,Pe,Fe,He,Ae,Te,K,G,U,Y,we,Se,qe,ee,$,Ue,Ge,Ke,Ye,ze,xe,te,P,O,Ee,Je,We,oe,ie,H,J,W,q,ye,Le,X,Z],encapsulation:2,changeDetection:0})}return t})();var Gi=(t,o,e)=>[t,o,e];function Ui(t,o){t&1&&(a(0,"div",11),h(1,"nz-spin",13),r())}function Yi(t,o){if(t&1){let e=x();a(0,"button",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickEditTagsLink(i))}),h(1,"nz-icon",17),r()}if(t&2){let e=c().$implicit,n=c();m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===1)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==1))}}function Ki(t,o){if(t&1){let e=x();a(0,"button",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickMonacoEditorArticleLink(i))}),h(1,"nz-icon",18),r()}if(t&2){let e=c().$implicit,n=c();m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===4)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==4))}}function qi(t,o){if(t&1){let e=x();a(0,"button",19),h(1,"nz-icon",20),r(),a(2,"nz-dropdown-menu",null,10)(4,"ul",21)(5,"li",22)(6,"button",23),C("nzOnConfirm",function(){f(e);let i=c().$implicit,l=c();return u(l.confirmDeleteArticle(i))}),d(7," Delete Article "),r()()()()}if(t&2){let e=T(3),n=c().$implicit,i=T(8),l=c();m("nzLoading",l.routerLinkLoadingId()===n.id&&l.loadingIndex===2)("disabled",l.isRouterLinkLoading()&&(l.routerLinkLoadingId()!==n.id||l.loadingIndex!==2))("nzDropdownMenu",e),s(6),m("disabled",l.isRouterLinkLoading()&&(l.routerLinkLoadingId()!==n.id||l.loadingIndex!==2)||l.routerLinkLoadingId()===n.id&&l.loadingIndex===2)("nzIcon",i)("nzOkDanger",!0)}}function Zi(t,o){t&1&&(g(0),a(1,"h4",26),h(2,"nz-icon",27),r(),_())}function Xi(t,o){t&1&&(g(0),a(1,"h5",28),d(2,"Do you want to delete article?"),r(),_())}function $i(t,o){t&1&&(a(0,"nz-space",24),p(1,Zi,3,0,"ng-container",25)(2,Xi,3,0,"ng-container",25),r())}function eo(t,o){if(t&1){let e=x();a(0,"a",29),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickArticleLink(i))}),d(1),r()}if(t&2){let e=c().$implicit;s(),y(" ",e.title," ")}}function to(t,o){if(t&1&&d(0),t&2){let e=c(2).$implicit;y(" ",e.description," ")}}function no(t,o){if(t&1){let e=x();p(0,to,1,1),a(1,"a",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickEditArticleLink(i))}),d(2,"Edit Article"),h(3,"nz-icon",30),r()}if(t&2){let e=c().$implicit,n=c();S(e.published?0:-1),s(),m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===3)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==3))}}function io(t,o){if(t&1&&(a(0,"div",31)(1,"div",32)(2,"h5",33),d(3),ht(4,"date"),r()()(),a(5,"div",34)(6,"div",35),h(7,"img",36),r()()),t&2){let e=c().$implicit,n=c();s(),Wt("id",e.slug),s(2),V(pn(4,7,e.createdAt,"MMMM d, yyyy")),s(4),pt("nzSrc","https://picsum.photos/id/",e.id,"/300/200.jpg"),Wt("alt",e.title),m("nzFallback",n.fallback)("nzPlaceholder",n.fallback)}}function oo(t,o){if(t&1&&(a(0,"nz-list-item",14),p(1,Yi,2,2,"ng-template",null,3,E)(3,Ki,2,2,"ng-template",null,4,E)(5,qi,8,6,"ng-template",null,5,E)(7,$i,3,0,"ng-template",null,6,E),a(9,"nz-list-item-meta",15),p(10,eo,2,1,"ng-template",null,7,E)(12,no,4,3,"ng-template",null,8,E),r(),p(14,io,8,10,"ng-template",null,9,E),r()),t&2){let e=T(2),n=T(4),i=T(6),l=T(11),z=T(13),A=T(15);m("nzActions",dn(4,Gi,e,n,i))("nzExtra",A),s(9),m("nzTitle",l)("nzDescription",z)}}function ro(t,o){if(t&1&&(a(0,"div",31)(1,"div",35)(2,"h5",28),d(3),r()()()),t&2){let e=o,n=c(2);s(3),mn(" ",n.articleListConfig().filters.limit*(n.articleListConfig().currentPage-1)+1," - ",n.articleListConfig().filters.limit*n.articleListConfig().currentPage>e?e:n.articleListConfig().filters.limit*n.articleListConfig().currentPage," of ",e," records ")}}function ao(t,o){if(t&1&&p(0,ro,4,3,"div",31),t&2){let e,n=c();S((e=n.articlesCount())?0:-1,e)}}function lo(t,o){if(t&1){let e=x();a(0,"nz-pagination",37),C("nzPageSizeChange",function(i){f(e);let l=c();return u(l.setPageSize(i))})("nzPageIndexChange",function(i){f(e);let l=c();return u(l.setPage(i))}),r()}if(t&2){let e=c();m("nzShowSizeChanger",!0)("nzPageSize",e.articleListConfig().filters.limit)("nzPageIndex",e.articleListConfig().currentPage)("nzTotal",e.articlesCount())}}var ei=(()=>{class t{isRouterLinkLoading;routerLinkLoadingId;articleList;articlesCount;isLoading;articleListConfig;oldLimit;nzEditArticle=new ge;nzMonacoEditArticle=new ge;nzDeleteArticle=new ge;nzEditTags=new ge;nzSetPage=new ge;nzSetPageSize=new ge;router=w(hn);changeDetectorRef=w(j);loadingIndex=0;fallback="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==";setLoading(e,n){this.loadingIndex=n,this.isRouterLinkLoading.set(!0),this.routerLinkLoadingId.set(e.id),this.changeDetectorRef.markForCheck()}confirmDeleteArticle(e){this.setLoading(e,2),this.nzDeleteArticle.emit(e)}clickArticleLink(e){this.setLoading(e,0),setTimeout(()=>{this.router.navigate(["articles",e.slug])})}clickEditArticleLink(e){this.setLoading(e,3),this.nzEditArticle.emit(e)}clickMonacoEditorArticleLink(e){this.setLoading(e,4),this.nzMonacoEditArticle.emit(e)}clickEditTagsLink(e){this.setLoading(e,1),this.nzEditTags.emit(e)}setPage(e){this.oldLimit()===this.articleListConfig().filters.limit?this.nzSetPage.emit(e):this.oldLimit.set(this.articleListConfig().filters.limit)}setPageSize(e){this.articleListConfig().currentPage>Math.ceil(this.articlesCount()/e)?this.oldLimit.set(this.articleListConfig().filters.limit):this.oldLimit.set(e),this.nzSetPageSize.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-articles"]],inputs:{isRouterLinkLoading:"isRouterLinkLoading",routerLinkLoadingId:"routerLinkLoadingId",articleList:"articleList",articlesCount:"articlesCount",isLoading:"isLoading",articleListConfig:"articleListConfig",oldLimit:"oldLimit"},outputs:{nzEditArticle:"nzEditArticle",nzMonacoEditArticle:"nzMonacoEditArticle",nzDeleteArticle:"nzDeleteArticle",nzEditTags:"nzEditTags",nzSetPage:"nzSetPage",nzSetPageSize:"nzSetPageSize"},decls:8,vars:7,consts:[["item",""],["footer",""],["pagination",""],["linkTagsAction",""],["monacoEditorAction",""],["deleteArticleAction",""],["closeTpl",""],["nzTitle",""],["nzDescription",""],["extra",""],["menu1","nzDropdownMenu"],[1,"app-article-preview"],[3,"hidden","nzDataSource","nzItemLayout","nzRenderItem","nzPagination","nzFooter"],["nzTip","Loading posts..."],[3,"nzActions","nzExtra"],[3,"nzTitle","nzDescription"],["nz-button","","nzType","link",3,"click","nzLoading","disabled"],["nzType","tag","nz-tooltip","","nzTooltipTitle","Link Tags"],["nzType","code","nz-tooltip","","nzTooltipTitle","Monaco Editor"],["nz-button","","nzType","link","nz-dropdown","",3,"nzLoading","disabled","nzDropdownMenu"],["nzType","delete"],["nz-menu",""],["nz-menu-item",""],["nz-button","","nzDanger","true","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon","nzOkDanger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],[3,"click"],["nzType","edit"],["nz-row","","nzJustify","end"],["nz-col","",3,"id"],["nz-typography","","nzType","secondary"],["nz-row",""],["nz-col",""],["nz-image","","width","300px","height","200px",3,"nzSrc","nzFallback","nzPlaceholder","alt"],[3,"nzPageSizeChange","nzPageIndexChange","nzShowSizeChanger","nzPageSize","nzPageIndex","nzTotal"]],template:function(n,i){if(n&1&&(p(0,Ui,2,0,"div",11),a(1,"nz-list",12),p(2,oo,16,8,"ng-template",null,0,E)(4,ao,1,1,"ng-template",null,1,E)(6,lo,1,4,"ng-template",null,2,E),r()),n&2){let l=T(3),z=T(5),A=T(7);S(i.isLoading()?0:-1),s(),m("hidden",i.isLoading())("nzDataSource",i.articleList())("nzItemLayout","vertical")("nzRenderItem",l)("nzPagination",A)("nzFooter",z)}},dependencies:[fn,Mn,bn,te,ee,$,jn,Bn,Qn,Fn,H,J,W,xe,At,Tt,Ct,Et,xt,q,In,Hn,Jn,K,G,U,Y,P,O,oe,ie,je,Qe,X,Z],encapsulation:2,changeDetection:0})}return t})();var mo=["*"],ti="collapse",Bt=(()=>{let t,o=[],e=[],n,i=[],l=[],z,A=[],$t=[];return class Kt{static{let v=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[De()],n=[De()],z=[De()],be(null,null,t,{kind:"field",name:"nzAccordion",static:!1,private:!1,access:{has:L=>"nzAccordion"in L,get:L=>L.nzAccordion,set:(L,R)=>{L.nzAccordion=R}},metadata:v},o,e),be(null,null,n,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:L=>"nzBordered"in L,get:L=>L.nzBordered,set:(L,R)=>{L.nzBordered=R}},metadata:v},i,l),be(null,null,z,{kind:"field",name:"nzGhost",static:!1,private:!1,access:{has:L=>"nzGhost"in L,get:L=>L.nzGhost,set:(L,R)=>{L.nzGhost=R}},metadata:v},A,$t),v&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})}constructor(v,L,R,pi){this.nzConfigService=v,this.cdr=L,this.directionality=R,this.destroy$=pi,this._nzModuleName=ti,this.nzAccordion=se(this,o,!1),this.nzBordered=(se(this,e),se(this,i,!0)),this.nzGhost=(se(this,l),se(this,A,!1)),this.nzExpandIconPosition=(se(this,$t),"start"),this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(ti).pipe(Me(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe(Me(this.destroy$)).subscribe(v=>{this.dir=v,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(v){this.listOfNzCollapsePanelComponent.push(v)}removePanel(v){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(v),1)}click(v){this.nzAccordion&&!v.nzActive&&this.listOfNzCollapsePanelComponent.filter(L=>L!==v).forEach(L=>{L.nzActive&&(L.nzActive=!1,L.nzActiveChange.emit(L.nzActive),L.markForCheck())}),v.nzActive=!v.nzActive,v.nzActiveChange.emit(v.nzActive)}static{this.\u0275fac=function(L){return new(L||Kt)(ce(zt),ce(j),ce(Cn),ce(he))}}static{this.\u0275cmp=I({type:Kt,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(L,R){L&2&&Ze("ant-collapse-icon-position-start",R.nzExpandIconPosition==="start")("ant-collapse-icon-position-end",R.nzExpandIconPosition==="end")("ant-collapse-ghost",R.nzGhost)("ant-collapse-borderless",!R.nzBordered)("ant-collapse-rtl",R.dir==="rtl")},inputs:{nzAccordion:[2,"nzAccordion","nzAccordion",fe],nzBordered:[2,"nzBordered","nzBordered",fe],nzGhost:[2,"nzGhost","nzGhost",fe],nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[Ne([he])],ngContentSelectors:mo,decls:1,vars:0,template:function(L,R){L&1&&(mt(),dt(0))},encapsulation:2,changeDetection:0})}}})();var po=["collapseHeader"],go=["*"];function _o(t,o){if(t&1&&(g(0),h(1,"nz-icon",7),_()),t&2){let e=o.$implicit,n=c(2);s(),m("nzType",e||"right")("nzRotate",n.nzActive?90:0)}}function fo(t,o){if(t&1&&(a(0,"div"),p(1,_o,2,2,"ng-container",3),r()),t&2){let e=c();s(),m("nzStringTemplateOutlet",e.nzExpandedIcon)}}function uo(t,o){if(t&1&&(g(0),d(1),_()),t&2){let e=c();s(),V(e.nzHeader)}}function ho(t,o){if(t&1&&(g(0),d(1),_()),t&2){let e=c(2);s(),V(e.nzExtra)}}function zo(t,o){if(t&1&&(a(0,"div",4),p(1,ho,2,1,"ng-container",3),r()),t&2){let e=c();s(),m("nzStringTemplateOutlet",e.nzExtra)}}var ni="collapsePanel",ii=(()=>{let t,o=[],e=[];return class qt{static{let i=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[De()],be(null,null,t,{kind:"field",name:"nzShowArrow",static:!1,private:!1,access:{has:l=>"nzShowArrow"in l,get:l=>l.nzShowArrow,set:(l,z)=>{l.nzShowArrow=z}},metadata:i},o,e),i&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})}markForCheck(){this.cdr.markForCheck()}constructor(i,l,z,A){this.nzConfigService=i,this.ngZone=l,this.cdr=z,this.destroy$=A,this._nzModuleName=ni,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=se(this,o,!0),this.nzExtra=se(this,e),this.nzActiveChange=new ge,this.nzCollapseComponent=w(Bt,{host:!0}),this.noAnimation=w(xn,{optional:!0}),this.nzConfigService.getConfigChangeEventForComponent(ni).pipe(Me(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),An(this.collapseHeader.nativeElement,"click").pipe(en(()=>!this.nzDisabled),Me(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})})}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static{this.\u0275fac=function(l){return new(l||qt)(ce(zt),ce(an),ce(j),ce(he))}}static{this.\u0275cmp=I({type:qt,selectors:[["nz-collapse-panel"]],viewQuery:function(l,z){if(l&1&&gt(po,7),l&2){let A;_t(A=ft())&&(z.collapseHeader=A.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(l,z){l&2&&Ze("ant-collapse-no-arrow",!z.nzShowArrow)("ant-collapse-item-active",z.nzActive)("ant-collapse-item-disabled",z.nzDisabled)},inputs:{nzActive:[2,"nzActive","nzActive",fe],nzDisabled:[2,"nzDisabled","nzDisabled",fe],nzShowArrow:[2,"nzShowArrow","nzShowArrow",fe],nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[Ne([he])],ngContentSelectors:go,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],[1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(l,z){l&1&&(mt(),a(0,"div",1,0),p(2,fo,2,1,"div"),a(3,"span",2),p(4,uo,2,1,"ng-container",3),r(),p(5,zo,2,1,"div",4),r(),a(6,"div",5)(7,"div",6),dt(8),r()()),l&2&&(sn("aria-expanded",z.nzActive),s(2),S(z.nzShowArrow?2:-1),s(2),m("nzStringTemplateOutlet",z.nzHeader),s(),S(z.nzExtra?5:-1),s(),Ze("ant-collapse-content-active",z.nzActive),m("@.disabled",!!(z.noAnimation!=null&&z.noAnimation.nzNoAnimation))("@collapseMotion",z.nzActive?"expanded":"hidden"))},dependencies:[Sn,En,P,O],encapsulation:2,data:{animation:[Tn]},changeDetection:0})}}})();var oi=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=ln({type:t})}static{this.\u0275inj=nn({})}}return t})();var ri=()=>({minRows:2,maxRows:2}),To=()=>({standalone:!0});function Ao(t,o){if(t&1){let e=x();g(0),a(1,"button",22),C("click",function(){f(e);let i=c();return u(i.resizeEditor())}),h(2,"nz-icon",23),d(3," Resize "),r(),_()}if(t&2){let e=c();s(),m("disabled",e.loading)}}function xo(t,o){if(t&1){let e=x();g(0),a(1,"button",24),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.confirmApply())}),h(2,"nz-icon",25),d(3," Undo "),r(),_()}if(t&2){let e=c(2),n=T(9);s(),m("nzIcon",n)("disabled",e.isLoading())}}function Eo(t,o){t&1&&p(0,xo,4,2,"ng-container",9)}function So(t,o){if(t&1){let e=x();g(0),a(1,"button",26),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",27),d(3," Close "),r(),_()}if(t&2){let e=c(),n=T(7);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function wo(t,o){t&1&&(g(0),a(1,"h4",28),h(2,"nz-icon",29),r(),_())}function Lo(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to close without changes?"),r(),_())}function yo(t,o){t&1&&(a(0,"nz-space",8),p(1,wo,3,0,"ng-container",9)(2,Lo,3,0,"ng-container",9),r())}function vo(t,o){t&1&&(g(0),a(1,"h4",31),h(2,"nz-icon",29),r(),_())}function bo(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to undo all changes?"),r(),_())}function Mo(t,o){t&1&&(a(0,"nz-space",8),p(1,vo,3,0,"ng-container",9)(2,bo,3,0,"ng-container",9),r())}function Io(t,o){if(t&1){let e=x();g(0),a(1,"nz-switch",32),k("ngModelChange",function(i){f(e);let l=c();return D(l.published,i)||(l.published=i),u(i)}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.published),m("ngModelOptions",b(2,To))}}function No(t,o){if(t&1){let e=x();g(0),a(1,"button",33),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),d(2," Submit "),r(),_()}if(t&2){let e=c(),n=T(25);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.articleForm.valid)}}function Do(t,o){if(t&1){let e=x();g(0),a(1,"button",26),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),d(2," Reset "),r(),_()}if(t&2){let e=c(),n=T(27);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function ko(t,o){t&1&&(g(0),a(1,"h4",31),h(2,"nz-icon",29),r(),_())}function Ro(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to submit form?"),r(),_())}function Vo(t,o){t&1&&(a(0,"nz-space",8),p(1,ko,3,0,"ng-container",9)(2,Ro,3,0,"ng-container",9),r())}function Oo(t,o){t&1&&(g(0),a(1,"h4",28),h(2,"nz-icon",29),r(),_())}function Po(t,o){t&1&&(g(0),a(1,"h5",30),d(2,"Do you want to reset form?"),r(),_())}function Fo(t,o){t&1&&(a(0,"nz-space",8),p(1,Oo,3,0,"ng-container",9)(2,Po,3,0,"ng-container",9),r())}function Bo(t,o){t&1&&d(0," Please enter slug. ")}function Qo(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The slug must be at least ",e.MinTitleLength," characters long. ")}}function jo(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The slug must be at most ",e.MaxTitleLength," characters long. ")}}function Wo(t,o){if(t&1&&p(0,Bo,1,0)(1,Qo,1,1)(2,jo,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function Jo(t,o){t&1&&d(0," Please enter title. ")}function Ho(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The title must be at least ",e.MinTitleLength," characters long. ")}}function Go(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The title must be at most ",e.MaxTitleLength," characters long. ")}}function Uo(t,o){if(t&1&&p(0,Jo,1,0)(1,Ho,1,1)(2,Go,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}var ai=(()=>{class t{editorComponent;article;currentArticle;errorResponse;windowWidth;windowHeight;editor;loading=!0;nzMessageService=w(ne);drawerRef=w(ue);published=!1;atLeastOneTry=!1;isSubmited=!1;changeDetectorRef=w(j);messageId=null;MinTitleLength=2;MaxTitleLength=320;isLoading=M(!0);injector=w(Ie);titleValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>320)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};articleForm=new Ve({slug:new de("",{nonNullable:!0,validators:[this.titleValidator]}),title:new de("",{nonNullable:!0,validators:[this.titleValidator]}),description:new de("",{nonNullable:!0,validators:[]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}patchArticle(e){this.articleForm.patchValue(e),this.published=e.published}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.patchArticle(this.article),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.isSubmited=!1,e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&this.isSubmited&&(this.removeMessageService(),this.drawerRef.close(!0))}),this.isLoading.set(!1)}submitForm(){if(this.isLoading())return;this.setMessageService(),this.atLeastOneTry=!0,this.isSubmited=!0;let n=this.editor.getModel().getValue();this.articleForm.controls.description.setValue(n),this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published,articleId:this.article.id})}resetForm(){this.articleForm.reset(),this.articleForm.controls.slug.markAsPristine(),this.articleForm.controls.slug.updateValueAndValidity(),this.articleForm.controls.title.markAsPristine(),this.articleForm.controls.title.updateValueAndValidity(),this.articleForm.controls.description.markAsPristine(),this.articleForm.controls.description.updateValueAndValidity(),this.editor.getModel().setValue(""),this.published=!1,this.changeDetectorRef.markForCheck()}confirmClose(){this.atLeastOneTry&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}confirmApply(){this.resetForm(),this.patchArticle(this.article),this.editor.getModel().setValue(this.article.description)}onEditorInit(e){this.editor=e,this.editor.setModel(monaco.editor.createModel(this.article.description,"markdown")),this.resizeEditor(),this.loading=!1}resizeEditor(){this.editor.layout({width:this.windowWidth()-110,height:this.windowHeight()-550>0?this.windowHeight()-350:250})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing-tags-edit"]],viewQuery:function(n,i){if(n&1&&gt(Ft,5),n&2){let l;_t(l=ft())&&(i.editorComponent=l.first)}},inputs:{article:"article",currentArticle:"currentArticle",errorResponse:"errorResponse",windowWidth:"windowWidth",windowHeight:"windowHeight"},decls:46,vars:18,consts:[["closeTpl",""],["applyTpl",""],["submitTpl",""],["resetTpl",""],["slugErrorTpl",""],["titleErrorTpl",""],["nz-row","","nzJustify","end"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],[3,"errorResponse"],["nz-form","",3,"formGroup"],[3,"nzActive","nzDisabled"],["nzFor","slug","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","slug","id","slug","placeholder","Enter article slug",3,"nzAutosize"],["nzFor","title","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","title","id","title","placeholder","Enter article title",3,"nzAutosize"],["nzRequired","",3,"nzSpan"],[3,"nzEditorInitialized","nzLoading","nzFullControl"],["nz-button","","nzType","primary","nzShape","round",3,"click","disabled"],["nzType","border-outer"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","disabled"],["nzType","undo"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzType","close"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Published","nzUnCheckedChildren","Unpublished",3,"ngModelChange","ngModel","ngModelOptions"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"]],template:function(n,i){if(n&1){let l=x();a(0,"div",6)(1,"div",7)(2,"nz-space",8),p(3,Ao,4,1,"ng-container",9)(4,Eo,1,0,"ng-container")(5,So,4,3,"ng-container",9),r()(),p(6,yo,3,0,"ng-template",null,0,E)(8,Mo,3,0,"ng-template",null,1,E),r(),a(10,"nz-card")(11,"div",6)(12,"div",7)(13,"nz-space",8),p(14,Io,2,3,"ng-container",9)(15,No,3,3,"ng-container",9)(16,Do,3,3,"ng-container",9),r()()(),a(17,"div",10)(18,"div",11),h(19,"app-form-errors",12),a(20,"nz-collapse")(21,"form",13)(22,"nz-collapse-panel",14)(23,"nz-form-item"),p(24,Vo,3,0,"ng-template",null,2,E)(26,Fo,3,0,"ng-template",null,3,E),r(),a(28,"nz-form-item")(29,"nz-form-label",15),d(30,"Slug"),r(),a(31,"nz-form-control",16),h(32,"textarea",17),r(),p(33,Wo,3,3,"ng-template",null,4,E),r(),a(35,"nz-form-item")(36,"nz-form-label",18),d(37,"Title"),r(),a(38,"nz-form-control",16),h(39,"textarea",19),r(),p(40,Uo,3,3,"ng-template",null,5,E),r()(),a(42,"nz-form-item")(43,"nz-form-label",20),d(44,"Description"),r()()()(),a(45,"nz-code-editor",21),C("nzEditorInitialized",function(A){return f(l),u(i.onEditorInit(A))}),r()()()()}if(n&2){let l=T(34),z=T(41);s(4),S(i.article?4:-1),s(15),m("errorResponse",i.errorResponse),s(2),m("formGroup",i.articleForm),s(),m("nzActive",!1)("nzDisabled",!1),s(7),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(16,ri)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",z),s(),m("nzAutosize",b(17,ri)),s(4),m("nzSpan",24),s(2),m("nzLoading",i.loading)("nzFullControl",!0)}},dependencies:[Be,Oe,ke,Ce,Re,Pe,Fe,He,Ae,Te,Gn,Ft,K,G,U,Y,we,Se,qe,ee,$,Ue,Ge,Ke,Ye,ze,xe,te,P,O,Ee,Je,We,oe,ie,H,J,W,q,ye,Le,oi,ii,Bt,X,Z],encapsulation:2,changeDetection:0})}return t})();var Zo=()=>({minRows:2,maxRows:5}),Xo=(t,o)=>[t,o],Zt=()=>({standalone:!0});function $o(t,o){if(t&1&&(g(0),a(1,"h5",30),h(2,"nz-icon",31),r(),_()),t&2){let e=c(2);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function er(t,o){t&1&&p(0,$o,3,1,"ng-container",17)}function tr(t,o){if(t&1){let e=x();g(0),a(1,"button",32),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmApply())}),h(2,"nz-icon",33),d(3," Apply "),r(),_()}if(t&2){let e=c(),n=T(9);s(),m("disabled",e.disableApply())("nzIcon",n)}}function nr(t,o){if(t&1){let e=x();g(0),a(1,"button",34),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",35),d(3," Close "),r(),_()}if(t&2){c();let e=T(7);s(),m("nzIcon",e)("nzOkDanger",!0)}}function ir(t,o){t&1&&(g(0),a(1,"h4",30),h(2,"nz-icon",36),r(),_())}function or(t,o){t&1&&(g(0),a(1,"h5",37),d(2,"Do you want to close without changes?"),r(),_())}function rr(t,o){t&1&&(a(0,"nz-space",16),p(1,ir,3,0,"ng-container",17)(2,or,3,0,"ng-container",17),r())}function ar(t,o){t&1&&(g(0),a(1,"h4",38),h(2,"nz-icon",36),r(),_())}function lr(t,o){t&1&&(g(0),a(1,"h5",37),d(2,"Do you want to apply changes?"),r(),_())}function sr(t,o){t&1&&(a(0,"nz-space",16),p(1,ar,3,0,"ng-container",17)(2,lr,3,0,"ng-container",17),r())}function cr(t,o){if(t&1&&(a(0,"div",18)(1,"div",15)(2,"h3",30),d(3),r()()()),t&2){let e=c();s(3),y("Edit existing tag with id: ",e.currentTagId,"")}}function mr(t,o){if(t&1){let e=x();g(0),a(1,"nz-switch",39),k("ngModelChange",function(i){f(e);let l=c();return D(l.showEditTag,i)||(l.showEditTag=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnableEditTag())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.showEditTag),m("ngModelOptions",b(3,Zt))("disabled",e.disableApply())}}function dr(t,o){if(t&1){let e=x();a(0,"button",40),h(1,"nz-icon",41),r(),a(2,"nz-dropdown-menu",null,8)(4,"ul",42)(5,"li",43)(6,"button",44),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.clickDeleteTag())}),d(7," Delete Tag "),r()()()()}if(t&2){let e=T(3),n=c(2),i=T(18);m("nzLoading",n.isLoading())("disabled",n.currentTagId<=0)("nzDropdownMenu",e),s(6),m("disabled",n.currentTagId<=0)("nzIcon",i)("nzOkDanger",!0)}}function pr(t,o){if(t&1&&(g(0),p(1,dr,8,6),_()),t&2){let e=c();s(),S(e.showEditTag?1:-1)}}function gr(t,o){t&1&&(g(0),a(1,"h4",30),h(2,"nz-icon",36),r(),_())}function _r(t,o){t&1&&(g(0),a(1,"h5",37),d(2,"Do you want to delete article?"),r(),_())}function fr(t,o){t&1&&(a(0,"nz-space",16),p(1,gr,3,0,"ng-container",17)(2,_r,3,0,"ng-container",17),r())}function ur(t,o){if(t&1&&(g(0),a(1,"h5",30),h(2,"nz-icon",31),r(),_()),t&2){let e=c(3);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function hr(t,o){t&1&&p(0,ur,3,1,"ng-container",17)}function zr(t,o){if(t&1&&h(0,"nz-option",46),t&2){let e=o.$implicit;m("nzLabel",e.title)("nzValue",e)}}function Cr(t,o){if(t&1&&d(0),t&2){let e=o.$implicit;y(" ",e.nzLabel," ")}}function Tr(t,o){if(t&1){let e=x();g(0),a(1,"nz-select",45),k("ngModelChange",function(i){f(e);let l=c(2);return D(l.showEditTag,i)||(l.showEditTag=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c(2);return u(l.updateEditTag(i))}),B(2,zr,1,2,"nz-option",46,F),r(),p(4,Cr,1,1,"ng-template",null,9,E),_()}if(t&2){let e=T(5),n=c(2);s(),m("nzBackdrop",!0)("disabled",n.disableApply())("nzCustomTemplate",e),N("ngModel",n.showEditTag),m("ngModelOptions",b(5,Zt)),s(),Q(n.editTags)}}function Ar(t,o){if(t&1&&(a(0,"div",14)(1,"div",15)(2,"nz-space",16),p(3,hr,1,0,"ng-container")(4,Tr,6,6,"ng-container",17),r()()()),t&2){let e=c();s(3),S(e.disableApply()?3:-1)}}function xr(t,o){t&1&&d(0," Please enter tag name. ")}function Er(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The tag name must be at least ",e.MinNameLength," characters long. ")}}function Sr(t,o){if(t&1&&d(0),t&2){let e=c(2);y(" The tag name must be at most ",e.MaxNameLength," characters long. ")}}function wr(t,o){if(t&1&&p(0,xr,1,0)(1,Er,1,1)(2,Sr,1,1),t&2){let e=o.$implicit;S(e.hasError("required")?0:-1),s(),S(e.hasError("min")?1:-1),s(),S(e.hasError("max")?2:-1)}}function Lr(t,o){if(t&1){let e=x();g(0),a(1,"button",47),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),d(2),r(),_()}if(t&2){let e=c(),n=T(36);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.tagForm.valid),s(),y(" ",e.currentTagId>0?"Change Tag":"New Tag"," ")}}function yr(t,o){if(t&1){let e=x();g(0),a(1,"button",48),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),d(2," Reset "),r(),_()}if(t&2){let e=c(),n=T(38);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function vr(t,o){t&1&&(g(0),a(1,"h4",38),h(2,"nz-icon",36),r(),_())}function br(t,o){t&1&&(g(0),a(1,"h5",37),d(2,"Do you what to submit form?"),r(),_())}function Mr(t,o){t&1&&(a(0,"nz-space",16),p(1,vr,3,0,"ng-container",17)(2,br,3,0,"ng-container",17),r())}function Ir(t,o){t&1&&(g(0),a(1,"h4",30),h(2,"nz-icon",36),r(),_())}function Nr(t,o){t&1&&(g(0),a(1,"h5",37),d(2,"Do you want to reset form?"),r(),_())}function Dr(t,o){t&1&&(a(0,"nz-space",16),p(1,Ir,3,0,"ng-container",17)(2,Nr,3,0,"ng-container",17),r())}function kr(t,o){if(t&1){let e=x();g(0),a(1,"nz-switch",49),k("ngModelChange",function(i){f(e);let l=c();return D(l.showSearch,i)||(l.showSearch=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnable())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.showSearch),m("ngModelOptions",b(3,Zt))("disabled",e.leftSearch||e.rightSearch)}}function Rr(t,o){t&1&&(g(0),a(1,"h5",30),h(2,"nz-icon",50),r(),_())}function Vr(t,o){t&1&&p(0,Rr,3,0,"ng-container",17)}function Or(t,o){t&1&&(g(0),a(1,"h4",54),d(2,"Remaining Tags"),r(),_())}function Pr(t,o){t&1&&(g(0),a(1,"h5",54),h(2,"nz-icon",55),r(),_())}function Fr(t,o){if(t&1&&h(0,"nz-option",46),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function Br(t,o){if(t&1&&(h(0,"nz-icon",56),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function Qr(t,o){if(t&1){let e=x();a(0,"tr",57),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",58),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function jr(t,o){if(t&1){let e=x();a(0,"div",18)(1,"div",15)(2,"nz-space",16),p(3,Or,3,0,"ng-container",17)(4,Pr,3,0,"ng-container",17),r()()(),a(5,"div",18)(6,"div",15)(7,"nz-select",51),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelLeft,i)||(l.orderModelLeft=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderLeft(i))}),B(8,Fr,1,2,"nz-option",46,F),r(),p(10,Br,2,2,"ng-template",null,10,E),r()(),a(12,"nz-table",52,11)(14,"thead")(15,"tr")(16,"th",53),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),B(20,Qr,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),A=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",A.orderModelLeft),s(),Q(A.listOfOption),s(4),m("nzData",A.convertItemsRight(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}function Wr(t,o){t&1&&(g(0),a(1,"h4",38),d(2,"Selected Tags"),r(),_())}function Jr(t,o){t&1&&(g(0),a(1,"h5",38),h(2,"nz-icon",59),r(),_())}function Hr(t,o){if(t&1&&h(0,"nz-option",46),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function Gr(t,o){if(t&1&&(h(0,"nz-icon",56),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function Ur(t,o){if(t&1){let e=x();a(0,"tr",57),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",58),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function Yr(t,o){if(t&1){let e=x();a(0,"div",18)(1,"div",15)(2,"nz-space",16),p(3,Wr,3,0,"ng-container",17)(4,Jr,3,0,"ng-container",17),r()()(),a(5,"div",18)(6,"div",15)(7,"nz-select",51),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelRight,i)||(l.orderModelRight=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderRight(i))}),B(8,Hr,1,2,"nz-option",46,F),r(),p(10,Gr,2,2,"ng-template",null,12,E),r()(),a(12,"nz-table",52,13)(14,"thead")(15,"tr")(16,"th",53),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),B(20,Ur,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),A=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",A.orderModelRight),s(),Q(A.listOfOption),s(4),m("nzData",A.convertItemsLeft(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}var ci=(()=>{class t{article;tagList;currentArticle;errorResponse;nzMessageService=w(ne);drawerRef=w(ue);selectedCount=0;list=[];showSearch=!1;leftSearch=!1;rightSearch=!1;selectedTags=null;applyTooltipTitle="";orderModelLeft=null;orderModelRight=null;listOfOption=[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}];sortOrder=null;isAscending=!1;changeDetectorRef=w(j);messageId=null;MinNameLength=2;MaxNameLength=420;editTags=[];currentTagId=0;showEditTag=!1;isLoading=M(!0);injector=w(Ie);nameValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>420)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};tagForm=new Ve({title:new de("",{nonNullable:!0,validators:[this.nameValidator]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}cancelLoading(){this.removeMessageService(),this.isLoading.set(!1),this.changeDetectorRef.markForCheck()}isTagListChange(){let e=this.selectedTags||[];if(this.selectedTags=[],this.list.filter(i=>i.direction==="right").forEach(i=>this.selectedTags.push(i.id)),e.length!==this.selectedTags.length)return!0;let n=!0;return e.forEach(i=>n=n&&this.selectedTags.includes(i)),!n}fillTags(e){this.list=[],e.forEach(n=>this.list.push({title:n.title,id:n.id,direction:this.selectedTags.includes(n.id)?"right":"left"})),this.selectedCount=this.selectedTags.length,this.showEditTag=null,this.orderModelLeft=null,this.orderModelRight=null,this.currentTagId=0,this.editTags=[],this.resetForm(),this.cancelLoading()}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId,this.article.tagList?this.selectedTags=this.article.tagList:(this.drawerRef.execute({loading:this.isLoading,articleId:this.article.id}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&(e.tagList?this.selectedTags=e.tagList:this.selectedTags=[],this.tagList().length&&this.fillTags(this.tagList()))})),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.list.length&&e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.tagList,{injector:this.injector}).subscribe(e=>{e&&e.length&&this.selectedTags&&this.fillTags(e)})}submitForm(){this.isLoading()||(this.setMessageService(),this.currentTagId?this.drawerRef.execute({loading:this.isLoading,form:this.tagForm,tagId:this.currentTagId}):this.drawerRef.execute({loading:this.isLoading,form:this.tagForm}))}resetForm(){this.tagForm.reset(),this.tagForm.controls.title.markAsPristine(),this.tagForm.controls.title.updateValueAndValidity(),this.changeDetectorRef.markForCheck()}clickDeleteTag(){this.isLoading()||(this.setMessageService(),this.drawerRef.execute({loading:this.isLoading,tagId:this.currentTagId}))}updateEditTag(e){e?(this.currentTagId=e.id,this.tagForm.patchValue(e),this.changeDetectorRef.markForCheck()):this.currentTagId=0}disableEnableEditTag(){this.editTags=[],this.currentTagId=0,this.showEditTag||this.list.filter(e=>e.direction==="right").forEach(e=>this.editTags.push({title:e.title,id:e.id})),this.changeDetectorRef.markForCheck()}disableEnable(){this.showSearch||(this.showSearch=this.leftSearch||this.rightSearch)}handleSearchChange(e){e.direction==="left"?this.leftSearch=e.value!=="":this.rightSearch=e.value!==""}handleChange(e){e.from==="right"?(this.orderModelLeft=null,this.sortOrder={direction:"left",sortOrder:null},this.selectedCount-=e.list.length):(this.orderModelRight=null,this.sortOrder={direction:"right",sortOrder:null},this.selectedCount+=e.list.length)}handleFilterOption(e,n){return n.title.toLowerCase().includes(e.toLowerCase())}confirmClose(){this.isTagListChange()&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}disableApply(){return this.selectedCount<1?(this.applyTooltipTitle="It should be at least one selected tag.",!0):this.selectedCount>100?(this.applyTooltipTitle="It should not be more than 100 selected tags.",!0):!1}confirmApply(){this.isTagListChange()?(this.nzMessageService.info("Applying selected tags."),this.selectedTags.length===this.list.length&&(this.selectedTags=null),this.drawerRef.close(this.selectedTags)):this.drawerRef.close(null)}convertItemsRight(e){return e.filter(n=>!n.hide)}convertItemsLeft(e){return e.filter(n=>!n.hide)}handleOrderRight(e){this.sortOrder={direction:"right",sortOrder:e}}handleOrderLeft(e){this.sortOrder={direction:"left",sortOrder:e}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing-tags-edit"]],inputs:{article:"article",tagList:"tagList",currentArticle:"currentArticle",errorResponse:"errorResponse"},decls:50,vars:21,consts:[["closeTpl",""],["applyTpl",""],["deleteTpl",""],["tagErrorTpl",""],["submitTpl",""],["resetTpl",""],["renderList",""],["renderSelectedList",""],["menu1","nzDropdownMenu"],["tagTemplate",""],["orderTemplateLeft",""],["t1",""],["orderTemplateRight",""],["t2",""],["nz-row","","nzJustify","end"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","center"],["nz-row","","nzJustify","start"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],["nz-form","",3,"formGroup"],["nzFor","title","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","title","id","title","placeholder","Enter tag name",3,"nzAutosize"],[3,"nzSpan"],[3,"errorResponse"],["nz-row","","nzJustify","start",2,"margin-bottom","20px"],["nzSize","small","nzAlign","center"],[3,"nzSearchChange","nzChange","nzDataSource","nzShowSearch","nzShowSelectAll","nzFilterOption","nzRenderList","nzSortOrder"],["nz-typography","","nzType","danger"],["nzType","info-circle","nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon"],["nzType","check"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger"],["nzType","close"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Disable Edit","nzUnCheckedChildren","Enable Edit",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nz-button","","nzType","link","nz-dropdown","",3,"nzLoading","disabled","nzDropdownMenu"],["nzType","delete"],["nz-menu",""],["nz-menu-item",""],["nz-button","","nzDanger","true","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon","nzOkDanger"],["nzAllowClear","","nzPlaceHolder","Edit Tag",3,"ngModelChange","nzBackdrop","disabled","nzCustomTemplate","ngModel","ngModelOptions"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzCheckedChildren","Hide Search","nzUnCheckedChildren","Show Search",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Clear out all search boxes in order to hide them."],["nzAllowClear","","nzPlaceHolder","Sort Order...",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel"],["nzSize","small",3,"nzData"],["nzShowCheckbox","",3,"nzCheckedChange","nzDisabled","nzChecked","nzIndeterminate"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all remaining tags."],[3,"nzType"],[3,"click"],["nzShowCheckbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all selected tags."]],template:function(n,i){if(n&1){let l=x();a(0,"div",14)(1,"div",15)(2,"nz-space",16),p(3,er,1,0,"ng-container")(4,tr,4,2,"ng-container",17)(5,nr,4,2,"ng-container",17),r()(),p(6,rr,3,0,"ng-template",null,0,E)(8,sr,3,0,"ng-template",null,1,E),r(),a(10,"nz-card"),p(11,cr,4,1,"div",18),a(12,"div",19)(13,"div",15)(14,"nz-space",16),p(15,mr,2,4,"ng-container",17)(16,pr,2,1,"ng-container",17),r()()(),p(17,fr,3,0,"ng-template",null,2,E)(19,Ar,5,1,"div",14),a(20,"div",18)(21,"div",20)(22,"form",21)(23,"nz-form-item")(24,"nz-form-label",22),d(25,"Tag Name"),r(),a(26,"nz-form-control",23),h(27,"textarea",24),r(),p(28,wr,3,3,"ng-template",null,3,E),r(),a(30,"nz-form-item")(31,"nz-form-control",25)(32,"nz-space",16),p(33,Lr,3,4,"ng-container",17)(34,yr,3,3,"ng-container",17),r()(),p(35,Mr,3,0,"ng-template",null,4,E)(37,Dr,3,0,"ng-template",null,5,E),r()(),h(39,"app-form-errors",26),r()()(),a(40,"div",27)(41,"div",15)(42,"nz-space",28),p(43,kr,2,4,"ng-container",17)(44,Vr,1,0,"ng-container"),r()()(),a(45,"nz-transfer",29),C("nzSearchChange",function(A){return f(l),u(i.handleSearchChange(A))})("nzChange",function(A){return f(l),u(i.handleChange(A))}),p(46,jr,22,7,"ng-template",null,6,E)(48,Yr,22,7,"ng-template",null,7,E),r()}if(n&2){let l=T(29),z=T(47),A=T(49);s(3),S(i.disableApply()?3:-1),s(8),S(i.currentTagId>0?11:-1),s(8),S(i.showEditTag?19:-1),s(3),m("formGroup",i.tagForm),s(2),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(17,Zo)),s(4),m("nzSpan",24),s(8),m("errorResponse",i.errorResponse),s(5),S(i.leftSearch||i.rightSearch?44:-1),s(),m("nzDataSource",i.list)("nzShowSearch",i.showSearch)("nzShowSelectAll",!1)("nzFilterOption",i.handleFilterOption)("nzRenderList",ut(18,Xo,z,A))("nzSortOrder",i.sortOrder)}},dependencies:[Be,Oe,ke,Ce,Re,Pe,Fe,He,Ae,Te,K,G,U,Y,we,Se,qe,ee,$,Ue,Ge,Ke,Ye,ze,xe,At,Tt,Ct,Et,xt,te,P,O,Ee,Je,We,oe,ie,H,J,W,q,Rt,Nt,St,Lt,wt,kt,vt,Dt,yt,Pt,Ot,je,Qe,ye,Le,It,bt,Mt,X,Z],encapsulation:2,changeDetection:0})}return t})();var Kr=(t,o)=>[t,o],Xt=()=>({standalone:!0});function qr(t,o){if(t&1&&(g(0),a(1,"h5",17),h(2,"nz-icon",18),r(),_()),t&2){let e=c(2);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function Zr(t,o){t&1&&p(0,qr,3,1,"ng-container",12)}function Xr(t,o){if(t&1){let e=x();g(0),a(1,"button",19),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmApply())}),h(2,"nz-icon",20),d(3," Apply "),r(),_()}if(t&2){let e=c(),n=T(9);s(),m("disabled",e.disableApply())("nzIcon",n)}}function $r(t,o){if(t&1){let e=x();g(0),a(1,"button",21),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",22),d(3," Close "),r(),_()}if(t&2){c();let e=T(7);s(),m("nzIcon",e)("nzOkDanger",!0)}}function ea(t,o){t&1&&(g(0),a(1,"h4",17),h(2,"nz-icon",23),r(),_())}function ta(t,o){t&1&&(g(0),a(1,"h5",24),d(2,"Do you want to close without changes?"),r(),_())}function na(t,o){t&1&&(a(0,"nz-space",11),p(1,ea,3,0,"ng-container",12)(2,ta,3,0,"ng-container",12),r())}function ia(t,o){t&1&&(g(0),a(1,"h4",25),h(2,"nz-icon",23),r(),_())}function oa(t,o){t&1&&(g(0),a(1,"h5",24),d(2,"Do you want to apply changes?"),r(),_())}function ra(t,o){t&1&&(a(0,"nz-space",11),p(1,ia,3,0,"ng-container",12)(2,oa,3,0,"ng-container",12),r())}function aa(t,o){if(t&1){let e=x();g(0),a(1,"nz-switch",26),k("ngModelChange",function(i){f(e);let l=c();return D(l.isAscending,i)||(l.isAscending=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.ascendingEnable())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.isAscending),m("ngModelOptions",b(2,Xt))}}function la(t,o){if(t&1&&h(0,"nz-option",28),t&2){let e=o.$implicit;m("nzLabel",e.name)("nzValue",e.value)}}function sa(t,o){if(t&1&&d(0),t&2){let e=o.$implicit;y(" ",e.nzLabel," ")}}function ca(t,o){if(t&1){let e=x();g(0),a(1,"nz-select",27),k("ngModelChange",function(i){f(e);let l=c();return D(l.selectedOption,i)||(l.selectedOption=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleSelectPublished(i))}),B(2,la,1,2,"nz-option",28,F),r(),p(4,sa,1,1,"ng-template",null,4,E),_()}if(t&2){let e=T(5),n=c();s(),m("nzBackdrop",!0)("nzCustomTemplate",e),N("ngModel",n.selectedOption),m("ngModelOptions",b(4,Xt)),s(),Q(n.publisedOptions)}}function ma(t,o){if(t&1){let e=x();g(0),a(1,"nz-switch",29),k("ngModelChange",function(i){f(e);let l=c();return D(l.showSearch,i)||(l.showSearch=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnable())}),r(),_()}if(t&2){let e=c();s(),N("ngModel",e.showSearch),m("ngModelOptions",b(3,Xt))("disabled",e.leftSearch||e.rightSearch)}}function da(t,o){t&1&&(g(0),a(1,"h5",17),h(2,"nz-icon",30),r(),_())}function pa(t,o){t&1&&p(0,da,3,0,"ng-container",12)}function ga(t,o){t&1&&(g(0),a(1,"h4",35),d(2,"Remaining Tags"),r(),_())}function _a(t,o){t&1&&(g(0),a(1,"h5",35),h(2,"nz-icon",36),r(),_())}function fa(t,o){if(t&1&&h(0,"nz-option",28),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function ua(t,o){if(t&1&&(h(0,"nz-icon",37),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function ha(t,o){if(t&1){let e=x();a(0,"tr",38),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",39),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function za(t,o){if(t&1){let e=x();a(0,"div",31)(1,"div",10)(2,"nz-space",11),p(3,ga,3,0,"ng-container",12)(4,_a,3,0,"ng-container",12),r()()(),a(5,"div",31)(6,"div",10)(7,"nz-select",32),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelLeft,i)||(l.orderModelLeft=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderLeft(i))}),B(8,fa,1,2,"nz-option",28,F),r(),p(10,ua,2,2,"ng-template",null,5,E),r()(),a(12,"nz-table",33,6)(14,"thead")(15,"tr")(16,"th",34),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),B(20,ha,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),A=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",A.orderModelLeft),s(),Q(A.listOfOption),s(4),m("nzData",A.convertItemsRight(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}function Ca(t,o){t&1&&(g(0),a(1,"h4",25),d(2,"Selected Tags"),r(),_())}function Ta(t,o){t&1&&(g(0),a(1,"h5",25),h(2,"nz-icon",40),r(),_())}function Aa(t,o){if(t&1&&h(0,"nz-option",28),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function xa(t,o){if(t&1&&(h(0,"nz-icon",37),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),y(" ",e.nzLabel," ")}}function Ea(t,o){if(t&1){let e=x();a(0,"tr",38),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",39),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),V(e.title)}}function Sa(t,o){if(t&1){let e=x();a(0,"div",31)(1,"div",10)(2,"nz-space",11),p(3,Ca,3,0,"ng-container",12)(4,Ta,3,0,"ng-container",12),r()()(),a(5,"div",31)(6,"div",10)(7,"nz-select",32),k("ngModelChange",function(i){f(e);let l=c();return D(l.orderModelRight,i)||(l.orderModelRight=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderRight(i))}),B(8,Aa,1,2,"nz-option",28,F),r(),p(10,xa,2,2,"ng-template",null,7,E),r()(),a(12,"nz-table",33,8)(14,"thead")(15,"tr")(16,"th",34),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),B(20,Ea,4,3,"tr",null,F),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),A=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),N("ngModel",A.orderModelRight),s(),Q(A.listOfOption),s(4),m("nzData",A.convertItemsLeft(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),Q(z.data)}}var mi=(()=>{class t{params;nzMessageService=w(ne);drawerRef=w(ue);selectedCount=0;list=[];showSearch=!1;leftSearch=!1;rightSearch=!1;selectedTags=[];applyTooltipTitle="";orderModelLeft=null;orderModelRight=null;listOfOption=[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}];sortOrder=null;isAscending=!1;createdAtAsc=null;initialCreatedAtAsc=null;publisedOptions=[{name:"All - Published/Unpublished",value:null},{name:"Published",value:!0},{name:"Unpublished",value:!1}];selectedOption=null;initialSelectedOption=null;isTagListChange(){let e=this.selectedTags||[];if(this.selectedTags=[],this.list.filter(i=>i.direction==="right").forEach(i=>this.selectedTags.push(i.id)),this.createdAtAsc!==this.initialCreatedAtAsc||this.selectedOption!==this.initialSelectedOption||e?.length!==this.selectedTags.length)return!0;let n=!0;return e.forEach(i=>n=n&&this.selectedTags.includes(i)),!n}ngOnInit(){this.params.createdAtAsc===void 0?(this.isAscending=!1,this.createdAtAsc=null):(this.isAscending=this.params.createdAtAsc,this.createdAtAsc=this.isAscending),this.initialCreatedAtAsc=this.createdAtAsc,this.params.published===void 0?this.selectedOption=null:this.selectedOption=this.params.published,this.initialSelectedOption=this.selectedOption,this.params.tags?this.selectedTags=this.params.tags:(this.selectedTags=[],this.params.tagList.forEach(e=>this.selectedTags.push(e.id))),this.list=[],this.params.tagList.forEach(e=>this.list.push({title:e.title,id:e.id,direction:this.selectedTags.includes(e.id)?"right":"left"})),this.selectedCount=this.selectedTags.length}ascendingEnable(){this.isAscending?this.createdAtAsc=null:this.createdAtAsc=!0}handleSelectPublished(e){this.selectedOption=e}disableEnable(){this.showSearch||(this.showSearch=this.leftSearch||this.rightSearch)}handleSearchChange(e){e.direction==="left"?this.leftSearch=e.value!=="":this.rightSearch=e.value!==""}handleChange(e){e.from==="right"?(this.orderModelLeft=null,this.sortOrder={direction:"left",sortOrder:null},this.selectedCount-=e.list.length):(this.orderModelRight=null,this.sortOrder={direction:"right",sortOrder:null},this.selectedCount+=e.list.length)}handleFilterOption(e,n){return n.title.toLowerCase().includes(e.toLowerCase())}confirmClose(){this.isTagListChange()&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}disableApply(){return this.selectedCount<1?(this.applyTooltipTitle="It should be at least one selected tag.",!0):this.selectedCount>100?(this.applyTooltipTitle="It should not be more than 100 selected tags.",!0):!1}confirmApply(){this.isTagListChange()?(this.nzMessageService.info("Applying selected tags."),this.selectedTags.length===this.list.length&&(this.selectedTags=null),this.drawerRef.close({tags:this.selectedTags,published:this.selectedOption,createdAtAsc:this.createdAtAsc})):this.drawerRef.close(null)}convertItemsRight(e){return e.filter(n=>!n.hide)}convertItemsLeft(e){return e.filter(n=>!n.hide)}handleOrderRight(e){this.sortOrder={direction:"right",sortOrder:e}}handleOrderLeft(e){this.sortOrder={direction:"left",sortOrder:e}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing-tags"]],inputs:{params:"params"},decls:25,vars:11,consts:[["closeTpl",""],["applyTpl",""],["renderList",""],["renderSelectedList",""],["publishedTemplate",""],["orderTemplateLeft",""],["t1",""],["orderTemplateRight",""],["t2",""],["nz-row","","nzJustify","end"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","start",2,"margin-top","20px"],["nz-row","","nzJustify","start",2,"margin-bottom","20px"],["nzSize","small","nzAlign","center"],[3,"nzSearchChange","nzChange","nzDataSource","nzShowSearch","nzShowSelectAll","nzFilterOption","nzRenderList","nzSortOrder"],["nz-typography","","nzType","danger"],["nzType","info-circle","nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon"],["nzType","check"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger"],["nzType","close"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Oldest first","nzUnCheckedChildren","Newest first",3,"ngModelChange","click","ngModel","ngModelOptions"],["nzAllowClear","","nzPlaceHolder","All - Published/Unpublished",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel","ngModelOptions"],[3,"nzLabel","nzValue"],["nzCheckedChildren","Hide Search","nzUnCheckedChildren","Show Search",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Clear out all search boxes in order to hide them."],["nz-row","","nzJustify","center"],["nzAllowClear","","nzPlaceHolder","Sort Order...",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel"],["nzSize","small",3,"nzData"],["nzShowCheckbox","",3,"nzCheckedChange","nzDisabled","nzChecked","nzIndeterminate"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all remaining tags."],[3,"nzType"],[3,"click"],["nzShowCheckbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all selected tags."]],template:function(n,i){if(n&1){let l=x();a(0,"div",9)(1,"div",10)(2,"nz-space",11),p(3,Zr,1,0,"ng-container")(4,Xr,4,2,"ng-container",12)(5,$r,4,2,"ng-container",12),r()(),p(6,na,3,0,"ng-template",null,0,E)(8,ra,3,0,"ng-template",null,1,E),r(),a(10,"div",13)(11,"div",10)(12,"nz-space",11),p(13,aa,2,3,"ng-container",12)(14,ca,6,5,"ng-container",12),r()()(),a(15,"div",14)(16,"div",10)(17,"nz-space",15),p(18,ma,2,4,"ng-container",12)(19,pa,1,0,"ng-container"),r()()(),a(20,"nz-transfer",16),C("nzSearchChange",function(A){return f(l),u(i.handleSearchChange(A))})("nzChange",function(A){return f(l),u(i.handleChange(A))}),p(21,za,22,7,"ng-template",null,2,E)(23,Sa,22,7,"ng-template",null,3,E),r()}if(n&2){let l=T(22),z=T(24);s(3),S(i.disableApply()?3:-1),s(16),S(i.leftSearch||i.rightSearch?19:-1),s(),m("nzDataSource",i.list)("nzShowSearch",i.showSearch)("nzShowSelectAll",!1)("nzFilterOption",i.handleFilterOption)("nzRenderList",ut(8,Kr,l,z))("nzSortOrder",i.sortOrder)}},dependencies:[Ae,Ce,Te,K,G,U,Y,ze,te,ee,$,P,O,oe,ie,H,J,W,q,Rt,Nt,St,Lt,wt,kt,vt,Dt,yt,Pt,Ot,je,Qe,ye,Le,It,bt,Mt,X,Z],encapsulation:2,changeDetection:0})}return t})();var wa=["drawerTitleTemplate"],La=["loginPasswordTitleTemplate"];function ya(t,o){t&1&&(a(0,"div",6)(1,"div",7)(2,"h3",8),d(3,"Not Authorized"),r()()())}function va(t,o){t&1&&(g(0),a(1,"h3",14),d(2,"Article Admin Page"),r(),_())}function ba(t,o){t&1&&(g(0),a(1,"h4",17),h(2,"nz-icon",18),r(),_())}function Ma(t,o){t&1&&(g(0),a(1,"h5",19),d(2,"Do you want to reload all articles?"),r(),_())}function Ia(t,o){t&1&&(a(0,"nz-space",9),p(1,ba,3,0,"ng-container",10)(2,Ma,3,0,"ng-container",10),r())}function Na(t,o){if(t&1){let e=x();g(0),a(1,"button",15),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.selectAll())}),h(2,"nz-icon",16),r(),p(3,Ia,3,0,"ng-template",null,2,E),_()}if(t&2){let e=T(4),n=c(2);s(),m("nzLoading",n.isArticlesLoading())("nzIcon",e)}}function Da(t,o){if(t&1){let e=x();g(0),a(1,"button",20),C("click",function(){f(e);let i=c(2);return u(i.openTagsFilter())}),h(2,"nz-icon",21),d(3," Tags "),r(),a(4,"nz-badge",22),h(5,"a",23),r(),_()}if(t&2){let e=c(2);s(),m("nzLoading",e.isTagsLoading()),s(3),m("nzCount",e.tagCount())}}function ka(t,o){if(t&1){let e=x();g(0),a(1,"button",20),C("click",function(){f(e);let i=c(2);return u(i.newArticle())}),h(2,"nz-icon",24),d(3," New Article "),r(),_()}if(t&2){let e=c(2);s(),m("nzLoading",e.isArticleLoading())}}function Ra(t,o){if(t&1&&(a(0,"div",6)(1,"div",7)(2,"h3",14),d(3),r()()()),t&2){let e=c(2);s(3),V(e.title)}}function Va(t,o){if(t&1&&(g(0),h(1,"nz-avatar",25),_()),t&2){let e=c(3);s(),pt("nzSrc","https://picsum.photos/id/",e.user().username.length,"/300/200.jpg")}}function Oa(t,o){if(t&1&&(g(0),a(1,"h5",17),d(2),ht(3,"nzEllipsis"),r(),_()),t&2){let e=c(3);s(2),V(gn(3,1,e.user().username,12,"..."))}}function Pa(t,o){t&1&&(a(0,"div",6)(1,"div",7)(2,"h3",14),d(3,"Confirm Password"),r()()(),a(4,"div",11)(5,"div",7)(6,"nz-space",9),p(7,Va,2,2,"ng-container",10)(8,Oa,4,5,"ng-container",10),r()()())}function Fa(t,o){if(t&1){let e=x();a(0,"div",6)(1,"div",7)(2,"nz-space",9),p(3,va,3,0,"ng-container",10),r()()(),a(4,"div",6)(5,"div",7)(6,"nz-space",9),p(7,Na,5,2,"ng-container",10),r()()(),a(8,"div",11)(9,"div",7)(10,"nz-space",9),p(11,Da,6,2,"ng-container",10),r()()(),a(12,"div",12)(13,"div",7)(14,"nz-space",9),p(15,ka,4,1,"ng-container",10),r()()(),a(16,"app-articles",13),C("nzSetPage",function(i){f(e);let l=c();return u(l.onPageOffsetChange(i))})("nzSetPageSize",function(i){f(e);let l=c();return u(l.onPageLimitChange(i))})("nzEditTags",function(i){f(e);let l=c();return u(l.linkTags(i))})("nzDeleteArticle",function(i){f(e);let l=c();return u(l.handleDeleteArticle(i))})("nzEditArticle",function(i){f(e);let l=c();return u(l.handleEditArticle(i))})("nzMonacoEditArticle",function(i){f(e);let l=c();return u(l.handleMonacoEditArticle(i))}),r(),p(17,Ra,4,1,"ng-template",null,0,E)(19,Pa,9,0,"ng-template",null,1,E)}if(t&2){let e=c();s(16),m("isRouterLinkLoading",e.isRouterLinkLoading)("routerLinkLoadingId",e.routerLinkLoadingId)("articleList",e.articleList)("articlesCount",e.articleCount)("isLoading",e.isArticlesLoading)("articleListConfig",e.articleListConfig)("oldLimit",e.oldLimit)}}var Im=(()=>{class t{drawerTitleTemplate=jt("drawerTitleTemplate");loginPasswordTitleTemplate=jt("loginPasswordTitleTemplate");nzMessageService=w(ne);destroyRef=w(rn);drawerService=w(wn);#e=w(Ht);#t=w(Vt);articleListConfig=this.#t.selectors.articleListConfig;isAuthenticated=this.#t.selectors.isAuthenticated;articleCount=this.#e.selectors.articleCount;articleList=this.#e.selectors.articleList;tagList=this.#e.selectors.tags;errorResponse=this.#e.selectors.errorResponse;user=this.#t.selectors.user;windowWidth=this.#t.selectors.width;windowHeight=this.#t.selectors.height;isArticleLoading=M(!1);isTagsLoading=M(!1);isArticlesLoading=M(!1);isRouterLinkLoading=M(!1);routerLinkLoadingId=M(0);tagCount=_n(()=>this.articleListConfig()?.filters.tags?this.articleListConfig().filters.tags.length:0);oldLimit=M(this.articleListConfig().filters.limit);isLoginPasswordLoading=M(!1);title="";noCancel(){return new Promise(n=>{try{n(!1)}finally{}})}pageHeaderInfo={title:"Articles Editor",breadcrumb:["Admin","Articles"],desc:`
    You can create, edit and delete articles.
    `};ngOnInit(){if(this.#t.setAdminArticles(!0),this.isAuthenticated()){let e=this.articleListConfig()?.filters;(e?.tags===void 0||e?.tags===null)&&(e?.published===void 0||e?.published===null)&&(e?.createdAtAsc===void 0||e?.createdAtAsc===null)?this.selectAll():(this.#e.getTags(this.isTagsLoading),this.#e.queryArticle({loading:this.isArticlesLoading,params:{limit:e.limit,offset:0,tags:e.tags,published:e.published,createdAtAsc:e.createdAtAsc}}))}}selectAll(){this.#e.getTags(this.isTagsLoading),this.#e.queryArticle({loading:this.isArticlesLoading,params:{limit:10,offset:0}}),this.oldLimit.set(10)}onPageOffsetChange(e){this.#e.onOffsetChange({loading:this.isArticlesLoading,offset:e})}onPageLimitChange(e){this.#e.onLimitChange({loading:this.isArticlesLoading,limit:e})}openTagsFilter(){if(this.isTagsLoading())return;this.isTagsLoading.set(!0),this.title="Article Tags";let e=this.articleListConfig()?.filters;this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:mi,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{params:{tagList:this.tagList(),tags:e.tags,published:e.published,createdAtAsc:e.createdAtAsc}}}).afterClose.subscribe(i=>{if(i){let l=this.articleListConfig()?.filters;this.#e.queryArticle({loading:this.isArticlesLoading,params:ae(re({},i),{limit:l.limit,offset:0})})}this.isTagsLoading.set(!1)})}linkTags(e){if(this.isTagsLoading())return;this.isTagsLoading.set(!0),this.title="Create/Edit Tags",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:ci,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,tagList:this.#e.selectors.tags,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse}});n.afterExecute.pipe(Xe(this.destroyRef)).subscribe(i=>{i?(this.#e.resetErrorResponse(),i.form?i.tagId?this.#e.editTag({loading:i.loading,tagId:i.tagId,form:i.form}):this.#e.createTag({loading:i.loading,form:i.form}):i.tagId?this.#e.deleteTag({loading:i.loading,tagId:i.tagId}):i.articleId&&this.#e.getArticleDetails({loading:i.loading,articleId:i.articleId})):this.confirmPassword()}),n.afterClose.subscribe(i=>{!i&&i!==null?(this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0)):(this.#e.linkTags({loading:this.isRouterLinkLoading,articleTags:{tags:i,articleId:e.id}}),this.routerLinkLoadingId.set(0)),this.isTagsLoading.set(!1)})}monacoArticle(e){if(this.isArticleLoading())return;this.isArticleLoading.set(!0),this.title=e?"Edit Article":"New Article",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:ai,nzWidth:this.windowWidth()-15,nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse,windowWidth:this.windowWidth,windowHeight:this.windowHeight}});n.afterExecute.pipe(Xe(this.destroyRef)).subscribe(i=>{i?i.form&&(i.articleId?this.#e.editArticle({loading:i.loading,form:i.form,articleId:i.articleId,published:i.published}):this.#e.createArticle({loading:i.loading,form:i.form,published:i.published})):this.confirmPassword()}),n.afterClose.subscribe(()=>{this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0),this.isArticleLoading.set(!1)})}editArticle(e){if(this.isArticleLoading())return;this.isArticleLoading.set(!0),this.title=e?"Edit Article":"New Article",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:Xn,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse}});n.afterExecute.pipe(Xe(this.destroyRef)).subscribe(i=>{i?i.form&&(i.articleId?this.#e.editArticle({loading:i.loading,form:i.form,articleId:i.articleId,published:i.published}):this.#e.createArticle({loading:i.loading,form:i.form,published:i.published})):this.confirmPassword()}),n.afterClose.subscribe(()=>{this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0),this.isArticleLoading.set(!1)})}newArticle(){this.editArticle(null)}handleEditArticle(e){this.editArticle(e)}handleMonacoEditArticle(e){this.monacoArticle(e)}handleDeleteArticle(e){this.nzMessageService.info("Deleting article..."),this.#e.deleteArticle({loading:this.isRouterLinkLoading,articleId:e.id}),this.routerLinkLoadingId.set(0)}confirmPassword(){if(this.isLoginPasswordLoading())return;this.isLoginPasswordLoading.set(!0),this.#t.resetErrorResponse();let e=this.drawerService.create({nzTitle:this.loginPasswordTitleTemplate(),nzContent:Nn,nzWidth:this.windowWidth()>400?400:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{user:this.#t.selectors.user,errorResponse:this.#t.selectors.errorResponse,messages:{cancelButton:"Close",cancelButtonMessage:"Do you want to close without confirm password?"}}});e.afterExecute.pipe(Xe(this.destroyRef)).subscribe(n=>{n&&this.#t.loginPassword({loading:n.loading,form:n.form})}),e.afterClose.subscribe(n=>{this.#e.resetErrorResponse(),n&&this.#t.resetErrorResponse(),this.isLoginPasswordLoading.set(!1)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=I({type:t,selectors:[["app-article-listing"]],viewQuery:function(n,i){n&1&&(Jt(i.drawerTitleTemplate,wa,5),Jt(i.loginPasswordTitleTemplate,La,5)),n&2&&cn(2)},features:[Ne([zn(Ht)])],decls:5,vars:3,consts:[["drawerTitleTemplate",""],["loginPasswordTitleTemplate",""],["applyTpl",""],[3,"pageHeaderInfo"],[1,"normal-table-wrap","bg-color-no","p-b-50"],[1,"m-b-20",3,"nzBordered"],["nz-row","","nzJustify","center"],["nz-col",""],["nz-typography","","nzType","danger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","end"],["nz-row","","nzJustify","start"],[3,"nzSetPage","nzSetPageSize","nzEditTags","nzDeleteArticle","nzEditArticle","nzMonacoEditArticle","isRouterLinkLoading","routerLinkLoadingId","articleList","articlesCount","isLoading","articleListConfig","oldLimit"],["nz-typography","","nzType","warning"],["nz-button","","nzType","primary","nzShape","circle","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon"],["nzType","sync"],["nz-typography","","nzType","success"],["nzType","question-circle-o"],["nz-typography",""],["nz-button","","nzType","primary","nzShape","round",3,"click","nzLoading"],["nzType","tag"],[3,"nzCount"],[1,"head-example"],["nzType","form"],["nzIcon","user",3,"nzSrc"]],template:function(n,i){n&1&&(h(0,"app-page-header",3),a(1,"div",4)(2,"nz-card",5),p(3,ya,4,0,"div",6)(4,Fa,21,7),r()()),n&2&&(m("pageHeaderInfo",i.pageHeaderInfo),s(2),m("nzBordered",!0),s(),S(i.isAuthenticated()?4:3))},dependencies:[Wn,ei,Vn,Rn,Pn,On,K,G,U,Y,we,Se,kn,P,O,oe,ie,H,J,W,q,X,Z,te,ee,$,vn,Ee],encapsulation:2,changeDetection:0})}return t})();export{Im as default};
