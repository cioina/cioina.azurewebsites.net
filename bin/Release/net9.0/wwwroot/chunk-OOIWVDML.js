import{a as Pt,b as Hn}from"./chunk-ZZIG7JKG.js";import{a as jn,b as Jn,c as Ot,d as Ft}from"./chunk-FVQWMNXS.js";import{a as Vn,b as On,c as Fn,d as Pn,e as Bn,f as Qn}from"./chunk-D7LCIW5K.js";import{a as Le,b as ye}from"./chunk-7ZPUOT3R.js";import{a as Wn}from"./chunk-2PIEZNS4.js";import"./chunk-2RA3M7YR.js";import{A as ne,B as Nt,C as Dt,D as kt,E as Rt,F as He,G as ie,H as kn,I as Rn,J as Vt,a as Ln,e as yn,f as se,h as bn,j as Mn,m as St,n as wt,o as Lt,p as yt,t as vt,u as bt,v as Mt,w as It,x as In,y as Nn,z as Dn}from"./chunk-2ORZZAPZ.js";import"./chunk-S57HHFLY.js";import{d as Ae,f as vn,g as xe,h as Ge,i as Ue,j as Ye,k as Ke,l as qe,m as oe,n as re}from"./chunk-DS6XLLIW.js";import{a as Z,b as X,c as $,i as ke,k as Re,l as ee,m as te}from"./chunk-6OE5NUCC.js";import{a as U,b as Y,c as K,d as En,e as q}from"./chunk-QFIZTM6M.js";import"./chunk-7VID3KDW.js";import{K as wn,S as Ct,T as Tt,V as At,Y as xt,Z as Et,_ as Ee,ca as Se,da as we,l as zn}from"./chunk-45ZR7KU2.js";import{a as Sn}from"./chunk-EURFV6MI.js";import"./chunk-BJQCVBJZ.js";import{B as Pe,C as de,D as ze,E as Be,G as Qe,H as We,K as Ce,L as je,M as Je,P as Te,d as J,e as H,f as G,g as Ve,v as Oe,y as he,z as Fe}from"./chunk-LNUZHZGO.js";import{Aa as xn,da as Cn,fa as zt,ga as De,k as un,m as hn,ua as V,wa as O,xa as Tn,za as An}from"./chunk-3P5JW5U3.js";import"./chunk-TZNFYIB3.js";import{a as _e,b as me}from"./chunk-U2N2E3N3.js";import{$b as h,Aa as Ne,Ac as ut,Bb as _,Cc as d,Dc as F,Ea as I,Eb as ge,Ec as v,Fb as on,G as Xt,Gc as sn,Hc as D,Ic as k,Jc as R,Ma as tn,Nc as Wt,Oc as cn,P as Qt,Pb as rn,Pc as mn,Qc as b,Rb as w,Sc as ht,Tb as L,Tc as dn,Vb as B,Wb as Q,Wc as pn,Xb as W,Yb as m,Yc as gn,Zb as a,_ as pe,_b as r,_c as x,ba as mt,cd as _n,dc as p,ec as g,gc as A,ha as $t,ia as en,jb as s,jd as fn,lc as C,m as Me,ma as S,n as ce,nc as c,nd as be,oc as dt,od as j,pc as pt,rc as gt,sc as _t,sd as ue,tc as ft,va as f,vb as N,vc as an,wa as u,wb as nn,wc as ln,xc as T,ya as Ie,zc as Xe}from"./chunk-DKFSPHRM.js";import{a as ae,b as le}from"./chunk-3XFQOAE3.js";var jt=(()=>{class t extends Rn{#e=S(Vt);#t=S(bn);#n=S(Mn);#o=S(hn);nzMessageService=S(ie);articleListConfig=this.#e.selectors.articleListConfig;ngrxOnStoreInit(){this.setState({articleList:[],tags:[],articleCount:0,errorResponse:null,currentArticle:null})}deleteArticle=this.effect(pe(e=>(e.loading.set(!0),this.#t.deleteArticle(e.articleId).pipe(se({next:n=>{if(n>0){let i=this.selectors.articleList(),l=[];i.forEach(z=>{z.id!==e.articleId&&l.push(z)}),this.patchState({articleList:l})}else console.info(`Delete Article ID Failed: ${e.articleId}`)},error:n=>{be()?console.error(`Delete Article ID Failed with: ${e.articleId}`,n.error??n.message):console.warn(`Delete Article ID Failed with: ${e.articleId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));linkTags=this.effect(pe(e=>(e.loading.set(!0),this.#t.linkTags(e.articleTags).pipe(se({next:n=>{if(n>=0){let i=this.selectors.articleList(),l=[];i.forEach(z=>{z.id!==e.articleTags.articleId||(z.tagList=e.articleTags.tags),l.push(z)}),this.patchState({articleList:l})}else console.info(`Link Tags Article ID Failed: ${e.articleTags.articleId}`)},error:n=>{be()?console.error(`Link Tags Article ID Failed: ${e.articleTags.articleId}`,n.error??n.message):console.warn(`Link Tags Article ID Failed: ${e.articleTags.articleId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));getArticleDetails=this.effect(pe(e=>(e.loading.set(!0),this.#t.getArticleDetail(e.articleId).pipe(se({next:n=>{this.patchState({currentArticle:n.article})},error:n=>{this.patchState({currentArticle:null,errorResponse:n.error}),be()?console.error(`Get Article Details with: ${e.articleId}`,n.error??n.message):console.warn(`Get Article Details with: ${e.articleId}`,n.message)},finalize:()=>{e.loading.set(!1)}})))));createTag=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#n.createTag(e.form.getRawValue()).pipe(se(this.#r(e))))));editTag=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#n.editTag(e.tagId,e.form.getRawValue()).pipe(se(this.#r(e))))));deleteTag=this.effect(pe(e=>(e.loading.set(!0),this.#n.deleteTag(e.tagId).pipe(se({next:n=>{if(n>0){let i=this.selectors.tags(),l=[];i.forEach(z=>{z.id!==n&&l.push(z)}),this.patchState({tags:l})}else console.info(`Delete Tags ID Failed : ${e.tagId}`)},error:n=>{this.patchState({errorResponse:n.error}),be()?console.error(`Delete Tag ID Failed with: ${e.tagId}`,n.error??n.message):console.warn(`Delete Tag ID Failed with: ${e.tagId}`,n.message),this.nzMessageService.error(n.message)},finalize:()=>{e.loading.set(!1)}})))));#r=e=>({next:n=>{let i=this.selectors.tags(),l=[];l.push(n.tag),i.forEach(z=>{z.id!==n.tag.id&&l.push(z)}),this.patchState({tags:l}),this.selectors.errorResponse()&&this.patchState({errorResponse:null})},error:n=>{this.patchState({errorResponse:n.error})},finalize:()=>{e.form.enable(),e.loading.set(!1)}});getTags=this.effect(Qt(e=>(e.set(!0),this.#n.getTags(null).pipe(se(n=>{this.patchState({tags:n.tags})},n=>{be()?console.error("Get Tags Failed",n):console.warn(`Get Tags Failed: ${n.message}`)},()=>{e.set(!1)})))));createArticle=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#t.createArticle(le(ae({},e.form.getRawValue()),{published:e.published})).pipe(se(this.#a(e))))));editArticle=this.effect(pe(e=>(e.form.disable(),e.loading.set(!0),this.#t.editArticle(e.articleId,le(ae({},e.form.getRawValue()),{published:e.published})).pipe(se(this.#a(e))))));#a=e=>({next:n=>{let i=this.selectors.articleList(),l=i.findIndex(E=>E.id===n.article.id),z=[];l<0?(z.push(n.article),i.forEach(E=>{z.push(E)})):i.forEach(E=>{E.id===n.article.id?z.push(n.article):z.push(E)}),this.patchState({articleList:z,currentArticle:n.article}),this.selectors.errorResponse()&&this.patchState({errorResponse:null})},error:n=>{this.patchState({errorResponse:n.error})},finalize:()=>{e.form.enable(),e.loading.set(!1)}});queryArticle=this.effect(mt(e=>{this.#e.patchState({articleListConfig:le(ae({},this.articleListConfig()),{currentPage:e.params.offset?this.articleListConfig().currentPage:1,filters:{limit:e.params.limit,offset:e.params.offset,tags:e.params.tags,published:e.params.published,createdAtAsc:e.params.createdAtAsc}})}),this.#i(e.loading)}));onOffsetChange=this.effect(mt(e=>{this.#e.patchState({articleListConfig:le(ae({},this.articleListConfig()),{currentPage:e.offset,filters:le(ae({},this.articleListConfig().filters),{offset:Number(this.articleListConfig().filters.limit)*(e.offset-1)})})}),this.#o.scrollToPosition([0,0]),this.#i(e.loading)}));onLimitChange=this.effect(mt(e=>{this.#e.patchState({articleListConfig:le(ae({},this.articleListConfig()),{currentPage:1,filters:le(ae({},this.articleListConfig().filters),{limit:e.limit,offset:0})})}),this.#o.scrollToPosition([0,0]),this.#i(e.loading)}));#i=this.effect(Qt(e=>(e.set(!0),(()=>{let n=this.articleListConfig()?.filters;return this.#t.getAllArticles({limit:n.limit,offset:n.offset,tags:n.tags,published:n.published,createdAtAsc:n.createdAtAsc})})().pipe(se(n=>{this.patchState({articleList:n.articles,articleCount:n.total})},n=>{be()?console.error("getAllArticles Failed",n):console.warn(`getAllArticles Failed: ${n.message}`),this.#e.openMessageDrawer(I(n.message))},()=>{e.set(!1)})))));resetErrorResponse=this.updater(e=>le(ae({},e),{currentArticle:null,errorResponse:null}));static \u0275fac=(()=>{let e;return function(i){return(e||(e=tn(t)))(i||t)}})();static \u0275prov=$t({token:t,factory:t.\u0275fac})}return t})();var fi=()=>({overflow:"auto",display:"block",width:"100%"}),Yn=()=>({minRows:2,maxRows:5}),ui=()=>({minRows:15,maxRows:50}),hi=()=>({standalone:!0});function zi(t,o){if(t&1){let e=A();p(0),a(1,"button",23),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.confirmApply())}),h(2,"nz-icon",24),d(3," Undo "),r(),g()}if(t&2){let e=c(2),n=T(8);s(),m("nzIcon",n)("disabled",e.isLoading())}}function Ci(t,o){t&1&&_(0,zi,4,2,"ng-container",10)}function Ti(t,o){if(t&1){let e=A();p(0),a(1,"button",25),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",26),d(3," Close "),r(),g()}if(t&2){let e=c(),n=T(6);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Ai(t,o){t&1&&(p(0),a(1,"h4",27),h(2,"nz-icon",28),r(),g())}function xi(t,o){t&1&&(p(0),a(1,"h5",29),d(2,"Do you want to close without changes?"),r(),g())}function Ei(t,o){t&1&&(a(0,"nz-space",9),_(1,Ai,3,0,"ng-container",10)(2,xi,3,0,"ng-container",10),r())}function Si(t,o){t&1&&(p(0),a(1,"h4",30),h(2,"nz-icon",28),r(),g())}function wi(t,o){t&1&&(p(0),a(1,"h5",29),d(2,"Do you want to undo all changes?"),r(),g())}function Li(t,o){t&1&&(a(0,"nz-space",9),_(1,Si,3,0,"ng-container",10)(2,wi,3,0,"ng-container",10),r())}function yi(t,o){if(t&1){let e=A();p(0),a(1,"nz-switch",31),R("ngModelChange",function(i){f(e);let l=c();return k(l.published,i)||(l.published=i),u(i)}),r(),g()}if(t&2){let e=c();s(),D("ngModel",e.published),m("ngModelOptions",b(2,hi))}}function vi(t,o){if(t&1){let e=A();p(0),a(1,"button",32),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),d(2," Submit "),r(),g()}if(t&2){let e=c(),n=T(17);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.articleForm.valid)}}function bi(t,o){if(t&1){let e=A();p(0),a(1,"button",25),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),d(2," Reset "),r(),g()}if(t&2){let e=c(),n=T(19);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Mi(t,o){t&1&&(p(0),a(1,"h4",30),h(2,"nz-icon",28),r(),g())}function Ii(t,o){t&1&&(p(0),a(1,"h5",29),d(2,"Do you want to submit form?"),r(),g())}function Ni(t,o){t&1&&(a(0,"nz-space",9),_(1,Mi,3,0,"ng-container",10)(2,Ii,3,0,"ng-container",10),r())}function Di(t,o){t&1&&(p(0),a(1,"h4",27),h(2,"nz-icon",28),r(),g())}function ki(t,o){t&1&&(p(0),a(1,"h5",29),d(2,"Do you want to reset form?"),r(),g())}function Ri(t,o){t&1&&(a(0,"nz-space",9),_(1,Di,3,0,"ng-container",10)(2,ki,3,0,"ng-container",10),r())}function Vi(t,o){t&1&&d(0," Please enter slug. ")}function Oi(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The slug must be at least ",e.MinTitleLength," characters long. ")}}function Fi(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The slug must be at most ",e.MaxTitleLength," characters long. ")}}function Pi(t,o){if(t&1&&(w(0,Vi,1,0),w(1,Oi,1,1),w(2,Fi,1,1)),t&2){let e=o.$implicit;L(e.hasError("required")?0:-1),s(),L(e.hasError("min")?1:-1),s(),L(e.hasError("max")?2:-1)}}function Bi(t,o){t&1&&d(0," Please enter title. ")}function Qi(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The title must be at least ",e.MinTitleLength," characters long. ")}}function Wi(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The title must be at most ",e.MaxTitleLength," characters long. ")}}function ji(t,o){if(t&1&&(w(0,Bi,1,0),w(1,Qi,1,1),w(2,Wi,1,1)),t&2){let e=o.$implicit;L(e.hasError("required")?0:-1),s(),L(e.hasError("min")?1:-1),s(),L(e.hasError("max")?2:-1)}}function Ji(t,o){t&1&&d(0," Please enter description. ")}function Hi(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The description must be at least ",e.MinDescriptionLength," characters long. ")}}function Gi(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The description must be at most ",e.MaxDescriptionLength," characters long. ")}}function Ui(t,o){if(t&1&&(w(0,Ji,1,0),w(1,Hi,1,1),w(2,Gi,1,1)),t&2){let e=o.$implicit;L(e.hasError("required")?0:-1),s(),L(e.hasError("min")?1:-1),s(),L(e.hasError("max")?2:-1)}}var ti=(()=>{class t{article;currentArticle;errorResponse;nzMessageService=S(ie);drawerRef=S(Ae);published=!1;atLeastOneTry=!1;isSubmited=!1;changeDetectorRef=S(j);messageId=null;MinTitleLength=2;MaxTitleLength=320;MinDescriptionLength=2;MaxDescriptionLength=2e5;isLoading=I(!0);injector=S(Ie);titleValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>320)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};descriptionValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>2e5)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};articleForm=new Pe({slug:new de("",{nonNullable:!0,validators:[this.titleValidator]}),title:new de("",{nonNullable:!0,validators:[this.titleValidator]}),description:new de("",{nonNullable:!0,validators:[this.descriptionValidator]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}patchArticle(e){this.articleForm.patchValue(e),this.published=e.published}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.article&&this.patchArticle(this.article),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.isSubmited=!1,e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&this.isSubmited&&(this.removeMessageService(),this.drawerRef.close(!0))}),this.isLoading.set(!1)}submitForm(){this.isLoading()||(this.setMessageService(),this.atLeastOneTry=!0,this.isSubmited=!0,this.article?this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published,articleId:this.article.id}):this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published}))}resetForm(){this.articleForm.reset(),this.articleForm.controls.slug.markAsPristine(),this.articleForm.controls.slug.updateValueAndValidity(),this.articleForm.controls.title.markAsPristine(),this.articleForm.controls.title.updateValueAndValidity(),this.articleForm.controls.description.markAsPristine(),this.articleForm.controls.description.updateValueAndValidity(),this.published=!1,this.changeDetectorRef.markForCheck()}confirmClose(){this.atLeastOneTry&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}confirmApply(){this.article&&(this.resetForm(),this.patchArticle(this.article))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=N({type:t,selectors:[["app-article-listing-tags-edit"]],inputs:{article:"article",currentArticle:"currentArticle",errorResponse:"errorResponse"},decls:45,vars:20,consts:[["closeTpl",""],["applyTpl",""],["submitTpl",""],["resetTpl",""],["slugErrorTpl",""],["titleErrorTpl",""],["descriptionErrorTpl",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],[3,"nzBodyStyle"],[3,"errorResponse"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],["nz-form","",3,"formGroup"],["nzFor","slug","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","slug","id","slug","placeholder","Enter article slug",3,"nzAutosize"],["nzFor","title","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","title","id","title","placeholder","Enter article title",3,"nzAutosize"],["nzFor","description","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","description","id","description","placeholder","Enter article description",3,"nzAutosize"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","disabled"],["nzType","undo"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzType","close"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Published","nzUnCheckedChildren","Unpublished",3,"ngModelChange","ngModel","ngModelOptions"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"]],template:function(n,i){if(n&1&&(a(0,"div",7)(1,"div",8)(2,"nz-space",9),w(3,Ci,1,0,"ng-container"),_(4,Ti,4,3,"ng-container",10),r(),_(5,Ei,3,0,"ng-template",null,0,x)(7,Li,3,0,"ng-template",null,1,x),r()(),a(9,"nz-card",11)(10,"div",7)(11,"div",8)(12,"nz-space",9),_(13,yi,2,3,"ng-container",10)(14,vi,3,3,"ng-container",10)(15,bi,3,3,"ng-container",10),r(),_(16,Ni,3,0,"ng-template",null,2,x)(18,Ri,3,0,"ng-template",null,3,x),r()(),h(20,"app-form-errors",12),a(21,"div",13)(22,"div",14)(23,"form",15)(24,"nz-form-item")(25,"nz-form-label",16),d(26,"Slug"),r(),a(27,"nz-form-control",17),h(28,"textarea",18),r(),_(29,Pi,3,3,"ng-template",null,4,x),r(),a(31,"nz-form-item")(32,"nz-form-label",19),d(33,"Title"),r(),a(34,"nz-form-control",17),h(35,"textarea",20),r(),_(36,ji,3,3,"ng-template",null,5,x),r(),a(38,"nz-form-item")(39,"nz-form-label",21),d(40,"Description"),r(),a(41,"nz-form-control",17),h(42,"textarea",22),r(),_(43,Ui,3,3,"ng-template",null,6,x),r()()()()()),n&2){let l=T(30),z=T(37),E=T(44);s(3),L(i.article?3:-1),s(6),m("nzBodyStyle",b(16,fi)),s(11),m("errorResponse",i.errorResponse),s(3),m("formGroup",i.articleForm),s(2),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(17,Yn)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",z),s(),m("nzAutosize",b(18,Yn)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",E),s(),m("nzAutosize",b(19,ui))}},dependencies:[je,Be,Oe,he,Fe,Qe,We,He,Ce,ze,q,U,Y,K,we,Se,qe,X,Z,Ue,Ge,Ke,Ye,xe,Ee,$,O,V,Te,Je,Ve,re,oe,G,H,J,ne,ye,Le,te,ee],encapsulation:2,changeDetection:0})}return t})();var $i=(t,o,e)=>[t,o,e];function eo(t,o){t&1&&(a(0,"div",11),h(1,"nz-spin",13),r())}function to(t,o){if(t&1){let e=A();a(0,"button",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickEditTagsLink(i))}),h(1,"nz-icon",17),r()}if(t&2){let e=c().$implicit,n=c();m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===1)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==1))}}function no(t,o){if(t&1){let e=A();a(0,"button",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickMonacoEditorArticleLink(i))}),h(1,"nz-icon",18),r()}if(t&2){let e=c().$implicit,n=c();m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===4)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==4))}}function io(t,o){if(t&1){let e=A();a(0,"button",19),h(1,"nz-icon",20),r(),a(2,"nz-dropdown-menu",null,10)(4,"ul",21)(5,"li",22)(6,"button",23),C("nzOnConfirm",function(){f(e);let i=c().$implicit,l=c();return u(l.confirmDeleteArticle(i))}),d(7," Delete Article "),r()()()()}if(t&2){let e=T(3),n=c().$implicit,i=T(8),l=c();m("nzLoading",l.routerLinkLoadingId()===n.id&&l.loadingIndex===2)("disabled",l.isRouterLinkLoading()&&(l.routerLinkLoadingId()!==n.id||l.loadingIndex!==2))("nzDropdownMenu",e),s(6),m("disabled",l.isRouterLinkLoading()&&(l.routerLinkLoadingId()!==n.id||l.loadingIndex!==2)||l.routerLinkLoadingId()===n.id&&l.loadingIndex===2)("nzIcon",i)("nzOkDanger",!0)}}function oo(t,o){t&1&&(p(0),a(1,"h4",26),h(2,"nz-icon",27),r(),g())}function ro(t,o){t&1&&(p(0),a(1,"h5",28),d(2,"Do you want to delete article?"),r(),g())}function ao(t,o){t&1&&(a(0,"nz-space",24),_(1,oo,3,0,"ng-container",25)(2,ro,3,0,"ng-container",25),r())}function lo(t,o){if(t&1){let e=A();a(0,"a",29),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickArticleLink(i))}),d(1),r()}if(t&2){let e=c().$implicit;s(),v(" ",e.title," ")}}function so(t,o){if(t&1&&d(0),t&2){let e=c(2).$implicit;v(" ",e.description," ")}}function co(t,o){if(t&1){let e=A();w(0,so,1,1),a(1,"a",16),C("click",function(){f(e);let i=c().$implicit,l=c();return u(l.clickEditArticleLink(i))}),d(2,"Edit Article"),h(3,"nz-icon",30),r()}if(t&2){let e=c().$implicit,n=c();L(e.published?0:-1),s(),m("nzLoading",n.routerLinkLoadingId()===e.id&&n.loadingIndex===3)("disabled",n.isRouterLinkLoading()&&(n.routerLinkLoadingId()!==e.id||n.loadingIndex!==3))}}function mo(t,o){if(t&1&&(a(0,"div",31)(1,"div",32)(2,"h5",33),d(3),pn(4,"date"),r()()(),a(5,"div",34)(6,"div",35),h(7,"img",36),r()()),t&2){let e=c().$implicit,n=c();s(),m("id",Wt(e.slug)),s(2),F(gn(4,9,e.createdAt,"MMMM d, yyyy")),s(4),m("nzSrc",cn("https://picsum.photos/id/",e.id,"/300/200.jpg"))("alt",Wt(e.title))("nzFallback",n.fallback)("nzPlaceholder",n.fallback)}}function po(t,o){if(t&1&&(a(0,"nz-list-item",14),_(1,to,2,2,"ng-template",null,3,x)(3,no,2,2,"ng-template",null,4,x)(5,io,8,6,"ng-template",null,5,x)(7,ao,3,0,"ng-template",null,6,x),a(9,"nz-list-item-meta",15),_(10,lo,2,1,"ng-template",null,7,x)(12,co,4,3,"ng-template",null,8,x),r(),_(14,mo,8,12,"ng-template",null,9,x),r()),t&2){let e=T(2),n=T(4),i=T(6),l=T(11),z=T(13),E=T(15);m("nzActions",dn(4,$i,e,n,i))("nzExtra",E),s(9),m("nzTitle",l)("nzDescription",z)}}function go(t,o){if(t&1&&(a(0,"div",31)(1,"div",35)(2,"h5",28),d(3),r()()()),t&2){let e=o,n=c(2);s(3),sn(" ",n.articleListConfig().filters.limit*(n.articleListConfig().currentPage-1)+1," - ",n.articleListConfig().filters.limit*n.articleListConfig().currentPage>e?e:n.articleListConfig().filters.limit*n.articleListConfig().currentPage," of ",e," records ")}}function _o(t,o){if(t&1&&w(0,go,4,3,"div",31),t&2){let e,n=c();L((e=n.articlesCount())?0:-1,e)}}function fo(t,o){if(t&1){let e=A();a(0,"nz-pagination",37),C("nzPageSizeChange",function(i){f(e);let l=c();return u(l.setPageSize(i))})("nzPageIndexChange",function(i){f(e);let l=c();return u(l.setPage(i))}),r()}if(t&2){let e=c();m("nzShowSizeChanger",!0)("nzPageSize",e.articleListConfig().filters.limit)("nzPageIndex",e.articleListConfig().currentPage)("nzTotal",e.articlesCount())}}var ii=(()=>{class t{isRouterLinkLoading;routerLinkLoadingId;articleList;articlesCount;isLoading;articleListConfig;oldLimit;nzEditArticle=new ge;nzMonacoEditArticle=new ge;nzDeleteArticle=new ge;nzEditTags=new ge;nzSetPage=new ge;nzSetPageSize=new ge;router=S(zn);changeDetectorRef=S(j);loadingIndex=0;fallback="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==";setLoading(e,n){this.loadingIndex=n,this.isRouterLinkLoading.set(!0),this.routerLinkLoadingId.set(e.id),this.changeDetectorRef.markForCheck()}confirmDeleteArticle(e){this.setLoading(e,2),this.nzDeleteArticle.emit(e)}clickArticleLink(e){this.setLoading(e,0),setTimeout(()=>{this.router.navigate(["articles",e.slug])})}clickEditArticleLink(e){this.setLoading(e,3),this.nzEditArticle.emit(e)}clickMonacoEditorArticleLink(e){this.setLoading(e,4),this.nzMonacoEditArticle.emit(e)}clickEditTagsLink(e){this.setLoading(e,1),this.nzEditTags.emit(e)}setPage(e){this.oldLimit()===this.articleListConfig().filters.limit?this.nzSetPage.emit(e):this.oldLimit.set(this.articleListConfig().filters.limit)}setPageSize(e){this.articleListConfig().currentPage>Math.ceil(this.articlesCount()/e)?this.oldLimit.set(this.articleListConfig().filters.limit):this.oldLimit.set(e),this.nzSetPageSize.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=N({type:t,selectors:[["app-articles"]],inputs:{isRouterLinkLoading:"isRouterLinkLoading",routerLinkLoadingId:"routerLinkLoadingId",articleList:"articleList",articlesCount:"articlesCount",isLoading:"isLoading",articleListConfig:"articleListConfig",oldLimit:"oldLimit"},outputs:{nzEditArticle:"nzEditArticle",nzMonacoEditArticle:"nzMonacoEditArticle",nzDeleteArticle:"nzDeleteArticle",nzEditTags:"nzEditTags",nzSetPage:"nzSetPage",nzSetPageSize:"nzSetPageSize"},decls:8,vars:7,consts:[["item",""],["footer",""],["pagination",""],["linkTagsAction",""],["monacoEditorAction",""],["deleteArticleAction",""],["closeTpl",""],["nzTitle",""],["nzDescription",""],["extra",""],["menu1","nzDropdownMenu"],[1,"app-article-preview"],[3,"hidden","nzDataSource","nzItemLayout","nzRenderItem","nzPagination","nzFooter"],["nzTip","Loading posts..."],[3,"nzActions","nzExtra"],[3,"nzTitle","nzDescription"],["nz-button","","nzType","link",3,"click","nzLoading","disabled"],["nzType","tag","nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTitle","Link Tags"],["nzType","code","nz-tooltip","","nzTooltipPlacement","bottom","nzTooltipTitle","Monaco Editor"],["nz-button","","nzType","link","nz-dropdown","",3,"nzLoading","disabled","nzDropdownMenu"],["nzType","delete"],["nz-menu",""],["nz-menu-item",""],["nz-button","","nzDanger","true","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon","nzOkDanger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],[3,"click"],["nzType","edit"],["nz-row","","nzJustify","end"],["nz-col","",3,"id"],["nz-typography","","nzType","secondary"],["nz-row",""],["nz-col",""],["nz-image","","width","300px","height","200px",3,"nzSrc","nzFallback","nzPlaceholder","alt"],[3,"nzPageSizeChange","nzPageIndexChange","nzShowSizeChanger","nzPageSize","nzPageIndex","nzTotal"]],template:function(n,i){if(n&1&&(w(0,eo,2,0,"div",11),a(1,"nz-list",12),_(2,po,16,8,"ng-template",null,0,x)(4,_o,1,1,"ng-template",null,1,x)(6,fo,1,4,"ng-template",null,2,x),r()),n&2){let l=T(3),z=T(5),E=T(7);L(i.isLoading()?0:-1),s(),m("hidden",i.isLoading())("nzDataSource",i.articleList())("nzItemLayout","vertical")("nzRenderItem",l)("nzPagination",E)("nzFooter",z)}},dependencies:[Nn,In,$,X,Z,Qn,Pn,Bn,Fn,G,H,J,Ee,At,Tt,Ct,Et,xt,ne,Dn,Jn,jn,q,U,Y,K,O,V,re,oe,Re,ke,te,ee,un],encapsulation:2,changeDetection:0})}return t})();var uo=["*"],oi="collapse",Bt=(()=>{let t,o=[],e=[],n,i=[],l=[],z,E=[],Zt=[];return class Ut{static{let M=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[De()],n=[De()],z=[De()],Me(null,null,t,{kind:"field",name:"nzAccordion",static:!1,private:!1,access:{has:y=>"nzAccordion"in y,get:y=>y.nzAccordion,set:(y,P)=>{y.nzAccordion=P}},metadata:M},o,e),Me(null,null,n,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:y=>"nzBordered"in y,get:y=>y.nzBordered,set:(y,P)=>{y.nzBordered=P}},metadata:M},i,l),Me(null,null,z,{kind:"field",name:"nzGhost",static:!1,private:!1,access:{has:y=>"nzGhost"in y,get:y=>y.nzGhost,set:(y,P)=>{y.nzGhost=P}},metadata:M},E,Zt),M&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:M})}cdr=S(j);directionality=S(Tn);destroyRef=S(Ne);_nzModuleName=oi;nzAccordion=ce(this,o,!1);nzBordered=(ce(this,e),ce(this,i,!0));nzGhost=(ce(this,l),ce(this,E,!1));nzExpandIconPosition=(ce(this,Zt),"start");dir="ltr";listOfNzCollapsePanelComponent=[];constructor(){zt(oi,()=>this.cdr.markForCheck())}ngOnInit(){this.directionality.change?.pipe(_e(this.destroyRef)).subscribe(M=>{this.dir=M,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(M){this.listOfNzCollapsePanelComponent.push(M)}removePanel(M){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(M),1)}click(M){this.nzAccordion&&!M.nzActive&&this.listOfNzCollapsePanelComponent.filter(y=>y!==M).forEach(y=>{y.nzActive&&(y.nzActive=!1,y.nzActiveChange.emit(y.nzActive),y.markForCheck())}),M.nzActive=!M.nzActive,M.nzActiveChange.emit(M.nzActive)}static \u0275fac=function(y){return new(y||Ut)};static \u0275cmp=N({type:Ut,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(y,P){y&2&&Xe("ant-collapse-icon-position-start",P.nzExpandIconPosition==="start")("ant-collapse-icon-position-end",P.nzExpandIconPosition==="end")("ant-collapse-ghost",P.nzGhost)("ant-collapse-borderless",!P.nzBordered)("ant-collapse-rtl",P.dir==="rtl")},inputs:{nzAccordion:[2,"nzAccordion","nzAccordion",ue],nzBordered:[2,"nzBordered","nzBordered",ue],nzGhost:[2,"nzGhost","nzGhost",ue],nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],ngContentSelectors:uo,decls:1,vars:0,template:function(y,P){y&1&&(dt(),pt(0))},encapsulation:2,changeDetection:0})}})();var zo=["collapseHeader"],Co=["*"];function To(t,o){if(t&1&&(p(0),h(1,"nz-icon",7),g()),t&2){let e=o.$implicit,n=c(2);s(),m("nzType",e||"right")("nzRotate",n.nzActive?90:0)}}function Ao(t,o){if(t&1&&(a(0,"div"),_(1,To,2,2,"ng-container",3),r()),t&2){let e=c();s(),m("nzStringTemplateOutlet",e.nzExpandedIcon)}}function xo(t,o){if(t&1&&(p(0),d(1),g()),t&2){let e=c();s(),F(e.nzHeader)}}function Eo(t,o){if(t&1&&(p(0),d(1),g()),t&2){let e=c(2);s(),F(e.nzExtra)}}function So(t,o){if(t&1&&(a(0,"div",4),_(1,Eo,2,1,"ng-container",3),r()),t&2){let e=c();s(),m("nzStringTemplateOutlet",e.nzExtra)}}var ri="collapsePanel",ai=(()=>{let t,o=[],e=[];return class Yt{static{let i=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[De()],Me(null,null,t,{kind:"field",name:"nzShowArrow",static:!1,private:!1,access:{has:l=>"nzShowArrow"in l,get:l=>l.nzShowArrow,set:(l,z)=>{l.nzShowArrow=z}},metadata:i},o,e),i&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})}ngZone=S(on);cdr=S(j);destroyRef=S(Ne);nzCollapseComponent=S(Bt,{host:!0});noAnimation=S(wn,{optional:!0});_nzModuleName=ri;nzActive=!1;nzDisabled=!1;nzShowArrow=ce(this,o,!0);nzExtra=ce(this,e);nzHeader;nzExpandedIcon;nzActiveChange=new ge;collapseHeader;markForCheck(){this.cdr.markForCheck()}constructor(){zt(ri,()=>this.cdr.markForCheck()),this.destroyRef.onDestroy(()=>{this.nzCollapseComponent.removePanel(this)})}ngOnInit(){this.nzCollapseComponent.addPanel(this),Cn(this.collapseHeader.nativeElement,"click").pipe(Xt(()=>!this.nzDisabled),_e(this.destroyRef)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})})}static \u0275fac=function(l){return new(l||Yt)};static \u0275cmp=N({type:Yt,selectors:[["nz-collapse-panel"]],viewQuery:function(l,z){if(l&1&&gt(zo,7),l&2){let E;_t(E=ft())&&(z.collapseHeader=E.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(l,z){l&2&&Xe("ant-collapse-no-arrow",!z.nzShowArrow)("ant-collapse-item-active",z.nzActive)("ant-collapse-item-disabled",z.nzDisabled)},inputs:{nzActive:[2,"nzActive","nzActive",ue],nzDisabled:[2,"nzDisabled","nzDisabled",ue],nzShowArrow:[2,"nzShowArrow","nzShowArrow",ue],nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],ngContentSelectors:Co,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],[1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(l,z){l&1&&(dt(),a(0,"div",1,0),w(2,Ao,2,1,"div"),a(3,"span",2),_(4,xo,2,1,"ng-container",3),r(),w(5,So,2,1,"div",4),r(),a(6,"div",5)(7,"div",6),pt(8),r()()),l&2&&(rn("aria-expanded",z.nzActive),s(2),L(z.nzShowArrow?2:-1),s(2),m("nzStringTemplateOutlet",z.nzHeader),s(),L(z.nzExtra?5:-1),s(),Xe("ant-collapse-content-active",z.nzActive),m("@.disabled",!!(z.noAnimation!=null&&z.noAnimation.nzNoAnimation))("@collapseMotion",z.nzActive?"expanded":"hidden"))},dependencies:[xn,An,O,V],encapsulation:2,data:{animation:[Sn]},changeDetection:0})}})();var li=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=nn({type:t});static \u0275inj=en({})}return t})();var Lo=()=>({overflow:"auto",display:"block",width:"100%"}),si=()=>({minRows:2,maxRows:2}),yo=()=>({standalone:!0});function vo(t,o){if(t&1){let e=A();p(0),a(1,"button",23),C("click",function(){f(e);let i=c();return u(i.resizeEditor())}),h(2,"nz-icon",24),d(3," Resize "),r(),g()}if(t&2){let e=c();s(),m("disabled",e.loading)}}function bo(t,o){if(t&1){let e=A();p(0),a(1,"button",25),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.confirmApply())}),h(2,"nz-icon",26),d(3," Undo "),r(),g()}if(t&2){let e=c(2),n=T(9);s(),m("nzIcon",n)("disabled",e.isLoading())}}function Mo(t,o){t&1&&_(0,bo,4,2,"ng-container",9)}function Io(t,o){if(t&1){let e=A();p(0),a(1,"button",27),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",28),d(3," Close "),r(),g()}if(t&2){let e=c(),n=T(7);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function No(t,o){t&1&&(p(0),a(1,"h4",29),h(2,"nz-icon",30),r(),g())}function Do(t,o){t&1&&(p(0),a(1,"h5",31),d(2,"Do you want to close without changes?"),r(),g())}function ko(t,o){t&1&&(a(0,"nz-space",8),_(1,No,3,0,"ng-container",9)(2,Do,3,0,"ng-container",9),r())}function Ro(t,o){t&1&&(p(0),a(1,"h4",32),h(2,"nz-icon",30),r(),g())}function Vo(t,o){t&1&&(p(0),a(1,"h5",31),d(2,"Do you want to undo all changes?"),r(),g())}function Oo(t,o){t&1&&(a(0,"nz-space",8),_(1,Ro,3,0,"ng-container",9)(2,Vo,3,0,"ng-container",9),r())}function Fo(t,o){if(t&1){let e=A();p(0),a(1,"nz-switch",33),R("ngModelChange",function(i){f(e);let l=c();return k(l.published,i)||(l.published=i),u(i)}),r(),g()}if(t&2){let e=c();s(),D("ngModel",e.published),m("ngModelOptions",b(2,yo))}}function Po(t,o){if(t&1){let e=A();p(0),a(1,"button",34),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),d(2," Submit "),r(),g()}if(t&2){let e=c(),n=T(25);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.articleForm.valid)}}function Bo(t,o){if(t&1){let e=A();p(0),a(1,"button",27),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),d(2," Reset "),r(),g()}if(t&2){let e=c(),n=T(27);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Qo(t,o){t&1&&(p(0),a(1,"h4",32),h(2,"nz-icon",30),r(),g())}function Wo(t,o){t&1&&(p(0),a(1,"h5",31),d(2,"Do you want to submit form?"),r(),g())}function jo(t,o){t&1&&(a(0,"nz-space",8),_(1,Qo,3,0,"ng-container",9)(2,Wo,3,0,"ng-container",9),r())}function Jo(t,o){t&1&&(p(0),a(1,"h4",29),h(2,"nz-icon",30),r(),g())}function Ho(t,o){t&1&&(p(0),a(1,"h5",31),d(2,"Do you want to reset form?"),r(),g())}function Go(t,o){t&1&&(a(0,"nz-space",8),_(1,Jo,3,0,"ng-container",9)(2,Ho,3,0,"ng-container",9),r())}function Uo(t,o){t&1&&d(0," Please enter slug. ")}function Yo(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The slug must be at least ",e.MinTitleLength," characters long. ")}}function Ko(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The slug must be at most ",e.MaxTitleLength," characters long. ")}}function qo(t,o){if(t&1&&(w(0,Uo,1,0),w(1,Yo,1,1),w(2,Ko,1,1)),t&2){let e=o.$implicit;L(e.hasError("required")?0:-1),s(),L(e.hasError("min")?1:-1),s(),L(e.hasError("max")?2:-1)}}function Zo(t,o){t&1&&d(0," Please enter title. ")}function Xo(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The title must be at least ",e.MinTitleLength," characters long. ")}}function $o(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The title must be at most ",e.MaxTitleLength," characters long. ")}}function er(t,o){if(t&1&&(w(0,Zo,1,0),w(1,Xo,1,1),w(2,$o,1,1)),t&2){let e=o.$implicit;L(e.hasError("required")?0:-1),s(),L(e.hasError("min")?1:-1),s(),L(e.hasError("max")?2:-1)}}var ci=(()=>{class t{editorComponent;isDarkTheme=!1;article;currentArticle;errorResponse;windowWidth;windowHeight;editor;loading=!0;nzMessageService=S(ie);drawerRef=S(Ae);published=!1;atLeastOneTry=!1;isSubmited=!1;changeDetectorRef=S(j);messageId=null;MinTitleLength=2;MaxTitleLength=320;isLoading=I(!0);injector=S(Ie);titleValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>320)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};articleForm=new Pe({slug:new de("",{nonNullable:!0,validators:[this.titleValidator]}),title:new de("",{nonNullable:!0,validators:[this.titleValidator]}),description:new de("",{nonNullable:!0,validators:[]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}patchArticle(e){this.articleForm.patchValue(e),this.published=e.published}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.patchArticle(this.article),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.isSubmited=!1,e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&this.isSubmited&&(this.removeMessageService(),this.drawerRef.close(!0))}),this.isLoading.set(!1)}submitForm(){if(this.isLoading())return;this.setMessageService(),this.atLeastOneTry=!0,this.isSubmited=!0;let n=this.editor.getModel().getValue();this.articleForm.controls.description.setValue(n),this.drawerRef.execute({loading:this.isLoading,form:this.articleForm,published:this.published,articleId:this.article.id})}resetForm(){this.articleForm.reset(),this.articleForm.controls.slug.markAsPristine(),this.articleForm.controls.slug.updateValueAndValidity(),this.articleForm.controls.title.markAsPristine(),this.articleForm.controls.title.updateValueAndValidity(),this.articleForm.controls.description.markAsPristine(),this.articleForm.controls.description.updateValueAndValidity(),this.editor.getModel().setValue(""),this.published=!1,this.changeDetectorRef.markForCheck()}confirmClose(){this.atLeastOneTry&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}confirmApply(){this.resetForm(),this.patchArticle(this.article),this.editor.getModel().setValue(this.article.description)}onEditorInit(e){this.isDarkTheme?monaco.editor.setTheme("vs-dark"):monaco.editor.setTheme("vs"),this.editor=e,this.editor.setModel(monaco.editor.createModel(this.article.description,"markdown")),this.resizeEditor(),this.loading=!1}resizeEditor(){this.editor.layout({width:this.windowWidth()-110,height:this.windowHeight()-550>0?this.windowHeight()-350:250})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=N({type:t,selectors:[["app-article-listing-tags-edit"]],viewQuery:function(n,i){if(n&1&&gt(Pt,5),n&2){let l;_t(l=ft())&&(i.editorComponent=l.first)}},inputs:{isDarkTheme:"isDarkTheme",article:"article",currentArticle:"currentArticle",errorResponse:"errorResponse",windowWidth:"windowWidth",windowHeight:"windowHeight"},decls:46,vars:20,consts:[["closeTpl",""],["applyTpl",""],["submitTpl",""],["resetTpl",""],["slugErrorTpl",""],["titleErrorTpl",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],[3,"nzBodyStyle"],["nz-row","","nzJustify","center"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],[3,"errorResponse"],["nz-form","",3,"formGroup"],[3,"nzActive","nzDisabled"],["nzFor","slug","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","slug","id","slug","placeholder","Enter article slug",3,"nzAutosize"],["nzFor","title","nzRequired","",3,"nzSpan"],["nz-input","","formControlName","title","id","title","placeholder","Enter article title",3,"nzAutosize"],["nzRequired","",3,"nzSpan"],[3,"nzEditorInitialized","nzLoading","nzFullControl"],["nz-button","","nzType","primary","nzShape","round",3,"click","disabled"],["nzType","border-outer"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","disabled"],["nzType","undo"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzType","close"],["nz-typography","","nzType","danger"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Published","nzUnCheckedChildren","Unpublished",3,"ngModelChange","ngModel","ngModelOptions"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"]],template:function(n,i){if(n&1){let l=A();a(0,"div",6)(1,"div",7)(2,"nz-space",8),_(3,vo,4,1,"ng-container",9),w(4,Mo,1,0,"ng-container"),_(5,Io,4,3,"ng-container",9),r()(),_(6,ko,3,0,"ng-template",null,0,x)(8,Oo,3,0,"ng-template",null,1,x),r(),a(10,"nz-card",10)(11,"div",6)(12,"div",7)(13,"nz-space",8),_(14,Fo,2,3,"ng-container",9)(15,Po,3,3,"ng-container",9)(16,Bo,3,3,"ng-container",9),r()()(),a(17,"div",11)(18,"div",12),h(19,"app-form-errors",13),a(20,"nz-collapse")(21,"form",14)(22,"nz-collapse-panel",15)(23,"nz-form-item"),_(24,jo,3,0,"ng-template",null,2,x)(26,Go,3,0,"ng-template",null,3,x),r(),a(28,"nz-form-item")(29,"nz-form-label",16),d(30,"Slug"),r(),a(31,"nz-form-control",17),h(32,"textarea",18),r(),_(33,qo,3,3,"ng-template",null,4,x),r(),a(35,"nz-form-item")(36,"nz-form-label",19),d(37,"Title"),r(),a(38,"nz-form-control",17),h(39,"textarea",20),r(),_(40,er,3,3,"ng-template",null,5,x),r()(),a(42,"nz-form-item")(43,"nz-form-label",21),d(44,"Description"),r()()()()()(),a(45,"nz-code-editor",22),C("nzEditorInitialized",function(E){return f(l),u(i.onEditorInit(E))}),r()()}if(n&2){let l=T(34),z=T(41);s(4),L(i.article?4:-1),s(6),m("nzBodyStyle",b(17,Lo)),s(9),m("errorResponse",i.errorResponse),s(2),m("formGroup",i.articleForm),s(),m("nzActive",!1)("nzDisabled",!1),s(7),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(18,si)),s(4),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",z),s(),m("nzAutosize",b(19,si)),s(4),m("nzSpan",24),s(2),m("nzLoading",i.loading)("nzFullControl",!0)}},dependencies:[je,Be,Oe,he,Fe,Qe,We,He,Ce,ze,Hn,Pt,q,U,Y,K,we,Se,qe,X,Z,Ue,Ge,Ke,Ye,xe,Ee,$,O,V,Te,Je,Ve,re,oe,G,H,J,ne,ye,Le,li,ai,Bt,te,ee],encapsulation:2,changeDetection:0})}return t})();var pr=()=>({minRows:2,maxRows:5}),gr=()=>({overflow:"auto",display:"block",width:"100%"}),_r=(t,o)=>[t,o],Kt=()=>({standalone:!0});function fr(t,o){if(t&1&&(p(0),a(1,"h5",31),h(2,"nz-icon",32),r(),g()),t&2){let e=c(2);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function ur(t,o){t&1&&_(0,fr,3,1,"ng-container",17)}function hr(t,o){if(t&1){let e=A();p(0),a(1,"button",33),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmApply())}),h(2,"nz-icon",34),d(3," Apply "),r(),g()}if(t&2){let e=c(),n=T(9);s(),m("disabled",e.disableApply())("nzIcon",n)}}function zr(t,o){if(t&1){let e=A();p(0),a(1,"button",35),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",36),d(3," Close "),r(),g()}if(t&2){c();let e=T(7);s(),m("nzIcon",e)("nzOkDanger",!0)}}function Cr(t,o){t&1&&(p(0),a(1,"h4",31),h(2,"nz-icon",37),r(),g())}function Tr(t,o){t&1&&(p(0),a(1,"h5",38),d(2,"Do you want to close without changes?"),r(),g())}function Ar(t,o){t&1&&(a(0,"nz-space",16),_(1,Cr,3,0,"ng-container",17)(2,Tr,3,0,"ng-container",17),r())}function xr(t,o){t&1&&(p(0),a(1,"h4",39),h(2,"nz-icon",37),r(),g())}function Er(t,o){t&1&&(p(0),a(1,"h5",38),d(2,"Do you want to apply changes?"),r(),g())}function Sr(t,o){t&1&&(a(0,"nz-space",16),_(1,xr,3,0,"ng-container",17)(2,Er,3,0,"ng-container",17),r())}function wr(t,o){if(t&1&&(a(0,"div",18)(1,"div",15)(2,"h3",31),d(3),r()()()),t&2){let e=c();s(3),v("Edit existing tag with id: ",e.currentTagId)}}function Lr(t,o){if(t&1){let e=A();p(0),a(1,"nz-switch",40),R("ngModelChange",function(i){f(e);let l=c();return k(l.showEditTag,i)||(l.showEditTag=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnableEditTag())}),r(),g()}if(t&2){let e=c();s(),D("ngModel",e.showEditTag),m("ngModelOptions",b(3,Kt))("disabled",e.disableApply())}}function yr(t,o){if(t&1){let e=A();a(0,"button",41),h(1,"nz-icon",42),r(),a(2,"nz-dropdown-menu",null,8)(4,"ul",43)(5,"li",44)(6,"button",45),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.clickDeleteTag())}),d(7," Delete Tag "),r()()()()}if(t&2){let e=T(3),n=c(2),i=T(18);m("nzLoading",n.isLoading())("disabled",n.currentTagId<=0)("nzDropdownMenu",e),s(6),m("disabled",n.currentTagId<=0)("nzIcon",i)("nzOkDanger",!0)}}function vr(t,o){if(t&1&&(p(0),w(1,yr,8,6),g()),t&2){let e=c();s(),L(e.showEditTag?1:-1)}}function br(t,o){t&1&&(p(0),a(1,"h4",31),h(2,"nz-icon",37),r(),g())}function Mr(t,o){t&1&&(p(0),a(1,"h5",38),d(2,"Do you want to delete article?"),r(),g())}function Ir(t,o){t&1&&(a(0,"nz-space",16),_(1,br,3,0,"ng-container",17)(2,Mr,3,0,"ng-container",17),r())}function Nr(t,o){if(t&1&&(p(0),a(1,"h5",31),h(2,"nz-icon",32),r(),g()),t&2){let e=c(3);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function Dr(t,o){t&1&&_(0,Nr,3,1,"ng-container",17)}function kr(t,o){if(t&1&&h(0,"nz-option",47),t&2){let e=o.$implicit;m("nzLabel",e.title)("nzValue",e)}}function Rr(t,o){if(t&1&&d(0),t&2){let e=o.$implicit;v(" ",e.nzLabel," ")}}function Vr(t,o){if(t&1){let e=A();p(0),a(1,"nz-select",46),R("ngModelChange",function(i){f(e);let l=c(2);return k(l.showEditTag,i)||(l.showEditTag=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c(2);return u(l.updateEditTag(i))}),Q(2,kr,1,2,"nz-option",47,B),r(),_(4,Rr,1,1,"ng-template",null,9,x),g()}if(t&2){let e=T(5),n=c(2);s(),m("nzBackdrop",!0)("disabled",n.disableApply())("nzCustomTemplate",e),D("ngModel",n.showEditTag),m("ngModelOptions",b(5,Kt)),s(),W(n.editTags)}}function Or(t,o){if(t&1&&(a(0,"div",20)(1,"div",15)(2,"nz-space",16),w(3,Dr,1,0,"ng-container"),_(4,Vr,6,6,"ng-container",17),r()()()),t&2){let e=c();s(3),L(e.disableApply()?3:-1)}}function Fr(t,o){t&1&&d(0," Please enter tag name. ")}function Pr(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The tag name must be at least ",e.MinNameLength," characters long. ")}}function Br(t,o){if(t&1&&d(0),t&2){let e=c(2);v(" The tag name must be at most ",e.MaxNameLength," characters long. ")}}function Qr(t,o){if(t&1&&(w(0,Fr,1,0),w(1,Pr,1,1),w(2,Br,1,1)),t&2){let e=o.$implicit;L(e.hasError("required")?0:-1),s(),L(e.hasError("min")?1:-1),s(),L(e.hasError("max")?2:-1)}}function Wr(t,o){if(t&1){let e=A();p(0),a(1,"button",48),C("nzOnConfirm",function(){f(e);let i=c();return u(i.submitForm())}),d(2),r(),g()}if(t&2){let e=c(),n=T(36);s(),m("nzLoading",e.isLoading())("nzIcon",n)("disabled",!e.tagForm.valid),s(),v(" ",e.currentTagId>0?"Change Tag":"New Tag"," ")}}function jr(t,o){if(t&1){let e=A();p(0),a(1,"button",49),C("nzOnConfirm",function(){f(e);let i=c();return u(i.resetForm())}),d(2," Reset "),r(),g()}if(t&2){let e=c(),n=T(38);s(),m("nzIcon",n)("nzOkDanger",!0)("disabled",e.isLoading())}}function Jr(t,o){t&1&&(p(0),a(1,"h4",39),h(2,"nz-icon",37),r(),g())}function Hr(t,o){t&1&&(p(0),a(1,"h5",38),d(2,"Do you what to submit form?"),r(),g())}function Gr(t,o){t&1&&(a(0,"nz-space",16),_(1,Jr,3,0,"ng-container",17)(2,Hr,3,0,"ng-container",17),r())}function Ur(t,o){t&1&&(p(0),a(1,"h4",31),h(2,"nz-icon",37),r(),g())}function Yr(t,o){t&1&&(p(0),a(1,"h5",38),d(2,"Do you want to reset form?"),r(),g())}function Kr(t,o){t&1&&(a(0,"nz-space",16),_(1,Ur,3,0,"ng-container",17)(2,Yr,3,0,"ng-container",17),r())}function qr(t,o){if(t&1){let e=A();p(0),a(1,"nz-switch",50),R("ngModelChange",function(i){f(e);let l=c();return k(l.showSearch,i)||(l.showSearch=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnable())}),r(),g()}if(t&2){let e=c();s(),D("ngModel",e.showSearch),m("ngModelOptions",b(3,Kt))("disabled",e.leftSearch||e.rightSearch)}}function Zr(t,o){t&1&&(p(0),a(1,"h5",31),h(2,"nz-icon",51),r(),g())}function Xr(t,o){t&1&&_(0,Zr,3,0,"ng-container",17)}function $r(t,o){t&1&&(p(0),a(1,"h4",55),d(2,"Remaining Tags"),r(),g())}function ea(t,o){t&1&&(p(0),a(1,"h5",55),h(2,"nz-icon",56),r(),g())}function ta(t,o){if(t&1&&h(0,"nz-option",47),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function na(t,o){if(t&1&&(h(0,"nz-icon",57),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),v(" ",e.nzLabel," ")}}function ia(t,o){if(t&1){let e=A();a(0,"tr",58),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",59),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),F(e.title)}}function oa(t,o){if(t&1){let e=A();a(0,"div",18)(1,"div",15)(2,"nz-space",16),_(3,$r,3,0,"ng-container",17)(4,ea,3,0,"ng-container",17),r()()(),a(5,"div",18)(6,"div",15)(7,"nz-select",52),R("ngModelChange",function(i){f(e);let l=c();return k(l.orderModelLeft,i)||(l.orderModelLeft=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderLeft(i))}),Q(8,ta,1,2,"nz-option",47,B),r(),_(10,na,2,2,"ng-template",null,10,x),r()(),a(12,"nz-table",53,11)(14,"thead")(15,"tr")(16,"th",54),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),Q(20,ia,4,3,"tr",null,B),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),D("ngModel",E.orderModelLeft),s(),W(E.listOfOption),s(4),m("nzData",E.convertItemsRight(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),W(z.data)}}function ra(t,o){t&1&&(p(0),a(1,"h4",39),d(2,"Selected Tags"),r(),g())}function aa(t,o){t&1&&(p(0),a(1,"h5",39),h(2,"nz-icon",60),r(),g())}function la(t,o){if(t&1&&h(0,"nz-option",47),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function sa(t,o){if(t&1&&(h(0,"nz-icon",57),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),v(" ",e.nzLabel," ")}}function ca(t,o){if(t&1){let e=A();a(0,"tr",58),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",59),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),F(e.title)}}function ma(t,o){if(t&1){let e=A();a(0,"div",18)(1,"div",15)(2,"nz-space",16),_(3,ra,3,0,"ng-container",17)(4,aa,3,0,"ng-container",17),r()()(),a(5,"div",18)(6,"div",15)(7,"nz-select",52),R("ngModelChange",function(i){f(e);let l=c();return k(l.orderModelRight,i)||(l.orderModelRight=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderRight(i))}),Q(8,la,1,2,"nz-option",47,B),r(),_(10,sa,2,2,"ng-template",null,12,x),r()(),a(12,"nz-table",53,13)(14,"thead")(15,"tr")(16,"th",54),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),Q(20,ca,4,3,"tr",null,B),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),D("ngModel",E.orderModelRight),s(),W(E.listOfOption),s(4),m("nzData",E.convertItemsLeft(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),W(z.data)}}var pi=(()=>{class t{article;tagList;currentArticle;errorResponse;nzMessageService=S(ie);drawerRef=S(Ae);selectedCount=0;list=[];showSearch=!1;leftSearch=!1;rightSearch=!1;selectedTags=null;applyTooltipTitle="";orderModelLeft=null;orderModelRight=null;listOfOption=[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}];sortOrder=null;isAscending=!1;changeDetectorRef=S(j);messageId=null;MinNameLength=2;MaxNameLength=420;editTags=[];currentTagId=0;showEditTag=!1;isLoading=I(!0);injector=S(Ie);nameValidator=e=>{if(e.value){if(e.value.length<2)return{error:!0,min:!0};if(e.value.length>420)return{error:!0,max:!0}}else return{error:!0,required:!0};return{}};tagForm=new Pe({title:new de("",{nonNullable:!0,validators:[this.nameValidator]})});removeMessageService(){this.messageId&&(this.nzMessageService.remove(this.messageId),this.messageId=null)}setMessageService(){this.isLoading.set(!0),this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId}cancelLoading(){this.removeMessageService(),this.isLoading.set(!1),this.changeDetectorRef.markForCheck()}isTagListChange(){let e=this.selectedTags||[];if(this.selectedTags=[],this.list.filter(i=>i.direction==="right").forEach(i=>this.selectedTags.push(i.id)),e.length!==this.selectedTags.length)return!0;let n=!0;return e.forEach(i=>n=n&&this.selectedTags.includes(i)),!n}clearEditTags(){this.editTags=[],this.currentTagId=0,this.resetForm()}fillTags(e){this.list=[],e.forEach(n=>this.list.push({title:n.title,id:n.id,direction:this.selectedTags.includes(n.id)?"right":"left"})),this.selectedCount=this.selectedTags.length,this.showEditTag=null,this.orderModelLeft=null,this.orderModelRight=null,this.clearEditTags(),this.cancelLoading()}ngOnDestroy(){this.removeMessageService()}ngOnInit(){this.messageId=this.nzMessageService.loading("Action in progress...",{nzDuration:0}).messageId,this.article.tagList?this.selectedTags=this.article.tagList:(this.drawerRef.execute({loading:this.isLoading,articleId:this.article.id}),me(this.currentArticle,{injector:this.injector}).subscribe(e=>{e&&(e.tagList?this.selectedTags=e.tagList:this.selectedTags=[],this.tagList().length&&this.fillTags(this.tagList()))})),me(this.errorResponse,{injector:this.injector}).subscribe(e=>{e&&(this.removeMessageService(),this.list.length&&e.errors&&e.errors.securityTokenRefreshRate&&this.drawerRef.execute(null))}),me(this.tagList,{injector:this.injector}).subscribe(e=>{e&&e.length&&this.selectedTags&&this.fillTags(e)})}submitForm(){this.isLoading()||(this.setMessageService(),this.currentTagId?this.drawerRef.execute({loading:this.isLoading,form:this.tagForm,tagId:this.currentTagId}):this.drawerRef.execute({loading:this.isLoading,form:this.tagForm}))}resetForm(){this.tagForm.reset(),this.tagForm.controls.title.markAsPristine(),this.tagForm.controls.title.updateValueAndValidity(),this.changeDetectorRef.markForCheck()}clickDeleteTag(){this.isLoading()||(this.setMessageService(),this.drawerRef.execute({loading:this.isLoading,tagId:this.currentTagId}))}updateEditTag(e){e?(this.currentTagId=e.id,this.tagForm.patchValue(e),this.changeDetectorRef.markForCheck()):this.currentTagId=0}disableEnableEditTag(){this.clearEditTags(),this.showEditTag||this.list.filter(e=>e.direction==="right").forEach(e=>this.editTags.push({title:e.title,id:e.id})),this.changeDetectorRef.markForCheck()}disableEnable(){this.showSearch||(this.showSearch=this.leftSearch||this.rightSearch)}handleSearchChange(e){e.direction==="left"?this.leftSearch=e.value!=="":this.rightSearch=e.value!==""}handleChange(e){e.from==="right"?(this.orderModelLeft=null,this.sortOrder={direction:"left",sortOrder:null},this.selectedCount-=e.list.length):(this.orderModelRight=null,this.sortOrder={direction:"right",sortOrder:null},this.selectedCount+=e.list.length),this.showEditTag&&(this.showEditTag=!1,this.clearEditTags())}handleFilterOption(e,n){return n.title.toLowerCase().includes(e.toLowerCase())}confirmClose(){this.isTagListChange()&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}disableApply(){return this.selectedCount<1?(this.applyTooltipTitle="It should be at least one selected tag.",!0):this.selectedCount>100?(this.applyTooltipTitle="It should not be more than 100 selected tags.",!0):!1}confirmApply(){this.isTagListChange()?(this.nzMessageService.info("Applying selected tags."),this.selectedTags.length===this.list.length&&(this.selectedTags=null),this.drawerRef.close(this.selectedTags)):this.drawerRef.close(null)}convertItemsRight(e){return e.filter(n=>!n.hide)}convertItemsLeft(e){return e.filter(n=>!n.hide)}handleOrderRight(e){this.sortOrder={direction:"right",sortOrder:e}}handleOrderLeft(e){this.sortOrder={direction:"left",sortOrder:e}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=N({type:t,selectors:[["app-article-listing-tags-edit"]],inputs:{article:"article",tagList:"tagList",currentArticle:"currentArticle",errorResponse:"errorResponse"},decls:51,vars:24,consts:[["closeTpl",""],["applyTpl",""],["deleteTpl",""],["tagErrorTpl",""],["submitTpl",""],["resetTpl",""],["renderList",""],["renderSelectedList",""],["menu1","nzDropdownMenu"],["tagTemplate",""],["orderTemplateLeft",""],["t1",""],["orderTemplateRight",""],["t2",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","center"],["nz-row","","nzJustify","start"],["nz-row","","nzJustify","end"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","24","nzXl","24","nzXXl","24"],["nz-form","",3,"formGroup"],["nzFor","title","nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","formControlName","title","id","title","placeholder","Enter tag name",3,"nzAutosize"],[3,"nzSpan"],[3,"errorResponse"],["nz-row","","nzJustify","start",1,"m-t-20","m-b-20"],["nzSize","small","nzAlign","center"],[3,"nzSearchChange","nzChange","nzDataSource","nzShowSearch","nzShowSelectAll","nzFilterOption","nzRenderList","nzSortOrder"],["nz-typography","","nzType","danger"],["nzType","info-circle","nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon"],["nzType","check"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger"],["nzType","close"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Disable Edit","nzUnCheckedChildren","Enable Edit",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nz-button","","nzType","link","nz-dropdown","",3,"nzLoading","disabled","nzDropdownMenu"],["nzType","delete"],["nz-menu",""],["nz-menu-item",""],["nz-button","","nzDanger","true","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon","nzOkDanger"],["nzAllowClear","","nzPlaceHolder","Edit Tag",3,"ngModelChange","nzBackdrop","disabled","nzCustomTemplate","ngModel","ngModelOptions"],[3,"nzLabel","nzValue"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon","disabled"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger","disabled"],["nzCheckedChildren","Hide Search","nzUnCheckedChildren","Show Search",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Clear out all search boxes in order to hide them."],["nzAllowClear","","nzPlaceHolder","Sort Order...",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel"],["nzSize","small",3,"nzData"],["nzShowCheckbox","",3,"nzCheckedChange","nzDisabled","nzChecked","nzIndeterminate"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all remaining tags."],[3,"nzType"],[3,"click"],["nzShowCheckbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all selected tags."]],template:function(n,i){if(n&1){let l=A();a(0,"div",14)(1,"div",15)(2,"nz-space",16),w(3,ur,1,0,"ng-container"),_(4,hr,4,2,"ng-container",17)(5,zr,4,2,"ng-container",17),r()(),_(6,Ar,3,0,"ng-template",null,0,x)(8,Sr,3,0,"ng-template",null,1,x),r(),a(10,"nz-card"),w(11,wr,4,1,"div",18),a(12,"div",19)(13,"div",15)(14,"nz-space",16),_(15,Lr,2,4,"ng-container",17)(16,vr,2,1,"ng-container",17),r()()(),_(17,Ir,3,0,"ng-template",null,2,x),w(19,Or,5,1,"div",20),a(20,"div",18)(21,"div",21)(22,"form",22)(23,"nz-form-item")(24,"nz-form-label",23),d(25,"Tag Name"),r(),a(26,"nz-form-control",24),h(27,"textarea",25),r(),_(28,Qr,3,3,"ng-template",null,3,x),r(),a(30,"nz-form-item")(31,"nz-form-control",26)(32,"nz-space",16),_(33,Wr,3,4,"ng-container",17)(34,jr,3,3,"ng-container",17),r()(),_(35,Gr,3,0,"ng-template",null,4,x)(37,Kr,3,0,"ng-template",null,5,x),r()(),h(39,"app-form-errors",27),r()()(),a(40,"div",28)(41,"div",15)(42,"nz-space",29),_(43,qr,2,4,"ng-container",17),w(44,Xr,1,0,"ng-container"),r()()(),a(45,"div")(46,"nz-transfer",30),C("nzSearchChange",function(E){return f(l),u(i.handleSearchChange(E))})("nzChange",function(E){return f(l),u(i.handleChange(E))}),_(47,oa,22,7,"ng-template",null,6,x)(49,ma,22,7,"ng-template",null,7,x),r()()}if(n&2){let l=T(29),z=T(48),E=T(50);s(3),L(i.disableApply()?3:-1),s(8),L(i.currentTagId>0?11:-1),s(8),L(i.showEditTag?19:-1),s(3),m("formGroup",i.tagForm),s(2),m("nzSpan",24),s(2),m("nzSpan",24)("nzErrorTip",l),s(),m("nzAutosize",b(19,pr)),s(4),m("nzSpan",24),s(8),m("errorResponse",i.errorResponse),s(5),L(i.leftSearch||i.rightSearch?44:-1),s(),ut(b(20,gr)),s(),m("nzDataSource",i.list)("nzShowSearch",i.showSearch)("nzShowSelectAll",!1)("nzFilterOption",i.handleFilterOption)("nzRenderList",ht(21,_r,z,E))("nzSortOrder",i.sortOrder)}},dependencies:[je,Be,Oe,he,Fe,Qe,We,He,Ce,ze,q,U,Y,K,we,Se,qe,X,Z,Ue,Ge,Ke,Ye,xe,Ee,At,Tt,Ct,Et,xt,$,O,V,Te,Je,Ve,re,oe,G,H,J,ne,Rt,Nt,St,Lt,wt,kt,vt,Dt,yt,Ft,Ot,Re,ke,ye,Le,It,bt,Mt,te,ee],encapsulation:2,changeDetection:0})}return t})();var da=()=>({overflow:"auto",display:"block",width:"100%"}),pa=(t,o)=>[t,o],qt=()=>({standalone:!0});function ga(t,o){if(t&1&&(p(0),a(1,"h5",16),h(2,"nz-icon",17),r(),g()),t&2){let e=c(2);s(2),m("nzTooltipTitle",e.applyTooltipTitle)}}function _a(t,o){t&1&&_(0,ga,3,1,"ng-container",12)}function fa(t,o){if(t&1){let e=A();p(0),a(1,"button",18),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmApply())}),h(2,"nz-icon",19),d(3," Apply "),r(),g()}if(t&2){let e=c(),n=T(9);s(),m("disabled",e.disableApply())("nzIcon",n)}}function ua(t,o){if(t&1){let e=A();p(0),a(1,"button",20),C("nzOnConfirm",function(){f(e);let i=c();return u(i.confirmClose())}),h(2,"nz-icon",21),d(3," Close "),r(),g()}if(t&2){c();let e=T(7);s(),m("nzIcon",e)("nzOkDanger",!0)}}function ha(t,o){t&1&&(p(0),a(1,"h4",16),h(2,"nz-icon",22),r(),g())}function za(t,o){t&1&&(p(0),a(1,"h5",23),d(2,"Do you want to close without changes?"),r(),g())}function Ca(t,o){t&1&&(a(0,"nz-space",11),_(1,ha,3,0,"ng-container",12)(2,za,3,0,"ng-container",12),r())}function Ta(t,o){t&1&&(p(0),a(1,"h4",24),h(2,"nz-icon",22),r(),g())}function Aa(t,o){t&1&&(p(0),a(1,"h5",23),d(2,"Do you want to apply changes?"),r(),g())}function xa(t,o){t&1&&(a(0,"nz-space",11),_(1,Ta,3,0,"ng-container",12)(2,Aa,3,0,"ng-container",12),r())}function Ea(t,o){if(t&1){let e=A();p(0),a(1,"nz-switch",25),R("ngModelChange",function(i){f(e);let l=c();return k(l.isAscending,i)||(l.isAscending=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.ascendingEnable())}),r(),g()}if(t&2){let e=c();s(),D("ngModel",e.isAscending),m("ngModelOptions",b(2,qt))}}function Sa(t,o){if(t&1&&h(0,"nz-option",27),t&2){let e=o.$implicit;m("nzLabel",e.name)("nzValue",e.value)}}function wa(t,o){if(t&1&&d(0),t&2){let e=o.$implicit;v(" ",e.nzLabel," ")}}function La(t,o){if(t&1){let e=A();p(0),a(1,"nz-select",26),R("ngModelChange",function(i){f(e);let l=c();return k(l.selectedOption,i)||(l.selectedOption=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleSelectPublished(i))}),Q(2,Sa,1,2,"nz-option",27,B),r(),_(4,wa,1,1,"ng-template",null,4,x),g()}if(t&2){let e=T(5),n=c();s(),m("nzBackdrop",!0)("nzCustomTemplate",e),D("ngModel",n.selectedOption),m("ngModelOptions",b(4,qt)),s(),W(n.publisedOptions)}}function ya(t,o){if(t&1){let e=A();p(0),a(1,"nz-switch",28),R("ngModelChange",function(i){f(e);let l=c();return k(l.showSearch,i)||(l.showSearch=i),u(i)}),C("click",function(){f(e);let i=c();return u(i.disableEnable())}),r(),g()}if(t&2){let e=c();s(),D("ngModel",e.showSearch),m("ngModelOptions",b(3,qt))("disabled",e.leftSearch||e.rightSearch)}}function va(t,o){t&1&&(p(0),a(1,"h5",16),h(2,"nz-icon",29),r(),g())}function ba(t,o){t&1&&_(0,va,3,0,"ng-container",12)}function Ma(t,o){t&1&&(p(0),a(1,"h4",34),d(2,"Remaining Tags"),r(),g())}function Ia(t,o){t&1&&(p(0),a(1,"h5",34),h(2,"nz-icon",35),r(),g())}function Na(t,o){if(t&1&&h(0,"nz-option",27),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function Da(t,o){if(t&1&&(h(0,"nz-icon",36),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),v(" ",e.nzLabel," ")}}function ka(t,o){if(t&1){let e=A();a(0,"tr",37),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",38),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),F(e.title)}}function Ra(t,o){if(t&1){let e=A();a(0,"div",30)(1,"div",10)(2,"nz-space",11),_(3,Ma,3,0,"ng-container",12)(4,Ia,3,0,"ng-container",12),r()()(),a(5,"div",30)(6,"div",10)(7,"nz-select",31),R("ngModelChange",function(i){f(e);let l=c();return k(l.orderModelLeft,i)||(l.orderModelLeft=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderLeft(i))}),Q(8,Na,1,2,"nz-option",27,B),r(),_(10,Da,2,2,"ng-template",null,5,x),r()(),a(12,"nz-table",32,6)(14,"thead")(15,"tr")(16,"th",33),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),Q(20,ka,4,3,"tr",null,B),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),D("ngModel",E.orderModelLeft),s(),W(E.listOfOption),s(4),m("nzData",E.convertItemsRight(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),W(z.data)}}function Va(t,o){t&1&&(p(0),a(1,"h4",24),d(2,"Selected Tags"),r(),g())}function Oa(t,o){t&1&&(p(0),a(1,"h5",24),h(2,"nz-icon",39),r(),g())}function Fa(t,o){if(t&1&&h(0,"nz-option",27),t&2){let e=o.$implicit;m("nzLabel",e.label)("nzValue",e.value)}}function Pa(t,o){if(t&1&&(h(0,"nz-icon",36),d(1)),t&2){let e=o.$implicit;m("nzType","sort-"+e.nzValue),s(),v(" ",e.nzLabel," ")}}function Ba(t,o){if(t&1){let e=A();a(0,"tr",37),C("click",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),a(1,"td",38),C("nzCheckedChange",function(){let i=f(e).$implicit,l=c().onItemSelect;return u(l(i))}),r(),a(2,"td"),d(3),r()()}if(t&2){let e=o.$implicit,n=c().disabled;s(),m("nzChecked",e.checked)("nzDisabled",n||e.disabled),s(2),F(e.title)}}function Qa(t,o){if(t&1){let e=A();a(0,"div",30)(1,"div",10)(2,"nz-space",11),_(3,Va,3,0,"ng-container",12)(4,Oa,3,0,"ng-container",12),r()()(),a(5,"div",30)(6,"div",10)(7,"nz-select",31),R("ngModelChange",function(i){f(e);let l=c();return k(l.orderModelRight,i)||(l.orderModelRight=i),u(i)}),C("ngModelChange",function(i){f(e);let l=c();return u(l.handleOrderRight(i))}),Q(8,Fa,1,2,"nz-option",27,B),r(),_(10,Pa,2,2,"ng-template",null,7,x),r()(),a(12,"nz-table",32,8)(14,"thead")(15,"tr")(16,"th",33),C("nzCheckedChange",function(i){let l=f(e).onItemSelectAll;return u(l(i))}),r(),a(17,"th"),d(18,"All"),r()()(),a(19,"tbody"),Q(20,Ba,4,3,"tr",null,B),r()()}if(t&2){let e=o.$implicit,n=o.stat,i=o.disabled,l=T(11),z=T(13),E=c();s(7),m("nzBackdrop",!0)("nzCustomTemplate",l),D("ngModel",E.orderModelRight),s(),W(E.listOfOption),s(4),m("nzData",E.convertItemsLeft(e)),s(4),m("nzDisabled",i)("nzChecked",n.checkAll)("nzIndeterminate",n.checkHalf),s(4),W(z.data)}}var gi=(()=>{class t{params;nzMessageService=S(ie);drawerRef=S(Ae);selectedCount=0;list=[];showSearch=!1;leftSearch=!1;rightSearch=!1;selectedTags=[];applyTooltipTitle="";orderModelLeft=null;orderModelRight=null;listOfOption=[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}];sortOrder=null;isAscending=!1;createdAtAsc=null;initialCreatedAtAsc=null;publisedOptions=[{name:"All - Published/Unpublished",value:null},{name:"Published",value:!0},{name:"Unpublished",value:!1}];selectedOption=null;initialSelectedOption=null;isTagListChange(){let e=this.selectedTags||[];if(this.selectedTags=[],this.list.filter(i=>i.direction==="right").forEach(i=>this.selectedTags.push(i.id)),this.createdAtAsc!==this.initialCreatedAtAsc||this.selectedOption!==this.initialSelectedOption||e?.length!==this.selectedTags.length)return!0;let n=!0;return e.forEach(i=>n=n&&this.selectedTags.includes(i)),!n}ngOnInit(){this.params.createdAtAsc===void 0?(this.isAscending=!1,this.createdAtAsc=null):(this.isAscending=this.params.createdAtAsc,this.createdAtAsc=this.isAscending),this.initialCreatedAtAsc=this.createdAtAsc,this.params.published===void 0?this.selectedOption=null:this.selectedOption=this.params.published,this.initialSelectedOption=this.selectedOption,this.params.tags?this.selectedTags=this.params.tags:(this.selectedTags=[],this.params.tagList.forEach(e=>this.selectedTags.push(e.id))),this.list=[],this.params.tagList.forEach(e=>this.list.push({title:e.title,id:e.id,direction:this.selectedTags.includes(e.id)?"right":"left"})),this.selectedCount=this.selectedTags.length}ascendingEnable(){this.isAscending?this.createdAtAsc=null:this.createdAtAsc=!0}handleSelectPublished(e){this.selectedOption=e}disableEnable(){this.showSearch||(this.showSearch=this.leftSearch||this.rightSearch)}handleSearchChange(e){e.direction==="left"?this.leftSearch=e.value!=="":this.rightSearch=e.value!==""}handleChange(e){e.from==="right"?(this.orderModelLeft=null,this.sortOrder={direction:"left",sortOrder:null},this.selectedCount-=e.list.length):(this.orderModelRight=null,this.sortOrder={direction:"right",sortOrder:null},this.selectedCount+=e.list.length)}handleFilterOption(e,n){return n.title.toLowerCase().includes(e.toLowerCase())}confirmClose(){this.isTagListChange()&&this.nzMessageService.warning("Changes were not saved!"),this.drawerRef.close(!1)}disableApply(){return this.selectedCount<1?(this.applyTooltipTitle="It should be at least one selected tag.",!0):this.selectedCount>100?(this.applyTooltipTitle="It should not be more than 100 selected tags.",!0):!1}confirmApply(){this.isTagListChange()?(this.nzMessageService.info("Applying selected tags."),this.selectedTags.length===this.list.length&&(this.selectedTags=null),this.drawerRef.close({tags:this.selectedTags,published:this.selectedOption,createdAtAsc:this.createdAtAsc})):this.drawerRef.close(null)}convertItemsRight(e){return e.filter(n=>!n.hide)}convertItemsLeft(e){return e.filter(n=>!n.hide)}handleOrderRight(e){this.sortOrder={direction:"right",sortOrder:e}}handleOrderLeft(e){this.sortOrder={direction:"left",sortOrder:e}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=N({type:t,selectors:[["app-article-edit-tags"]],inputs:{params:"params"},decls:29,vars:14,consts:[["closeTpl",""],["applyTpl",""],["renderList",""],["renderSelectedList",""],["publishedTemplate",""],["orderTemplateLeft",""],["t1",""],["orderTemplateRight",""],["t2",""],["nz-row","","nzJustify","end",1,"m-b-20"],["nz-col",""],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","start",1,"m-b-20"],["nzSize","small","nzAlign","center"],[3,"nzSearchChange","nzChange","nzDataSource","nzShowSearch","nzShowSelectAll","nzFilterOption","nzRenderList","nzSortOrder"],["nz-typography","","nzType","danger"],["nzType","info-circle","nz-tooltip","",3,"nzTooltipTitle"],["nz-button","","nzType","primary","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","disabled","nzIcon"],["nzType","check"],["nz-button","","nzDanger","true","nzShape","round","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzIcon","nzOkDanger"],["nzType","close"],["nzType","question-circle-o"],["nz-typography",""],["nz-typography","","nzType","success"],["nzCheckedChildren","Oldest first","nzUnCheckedChildren","Newest first",3,"ngModelChange","click","ngModel","ngModelOptions"],["nzAllowClear","","nzPlaceHolder","All - Published/Unpublished",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel","ngModelOptions"],[3,"nzLabel","nzValue"],["nzCheckedChildren","Hide Search","nzUnCheckedChildren","Show Search",3,"ngModelChange","click","ngModel","ngModelOptions","disabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Clear out all search boxes in order to hide them."],["nz-row","","nzJustify","center"],["nzAllowClear","","nzPlaceHolder","Sort Order...",3,"ngModelChange","nzBackdrop","nzCustomTemplate","ngModel"],["nzSize","small",3,"nzData"],["nzShowCheckbox","",3,"nzCheckedChange","nzDisabled","nzChecked","nzIndeterminate"],["nz-typography","","nzType","warning"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all remaining tags."],[3,"nzType"],[3,"click"],["nzShowCheckbox","",3,"nzCheckedChange","nzChecked","nzDisabled"],["nzType","info-circle","nz-tooltip","","nzTooltipTitle","Here are all selected tags."]],template:function(n,i){if(n&1){let l=A();a(0,"div",9)(1,"div",10)(2,"nz-space",11),w(3,_a,1,0,"ng-container"),_(4,fa,4,2,"ng-container",12)(5,ua,4,2,"ng-container",12),r()(),_(6,Ca,3,0,"ng-template",null,0,x)(8,xa,3,0,"ng-template",null,1,x),r(),a(10,"div",9)(11,"div",10)(12,"nz-space",11),_(13,Ea,2,3,"ng-container",12),r()()(),a(14,"div",9)(15,"div",10)(16,"nz-space",11),_(17,La,6,5,"ng-container",12),r()()(),a(18,"div",13)(19,"div",10)(20,"nz-space",14),_(21,ya,2,4,"ng-container",12),w(22,ba,1,0,"ng-container"),r()()(),a(23,"div")(24,"nz-transfer",15),C("nzSearchChange",function(E){return f(l),u(i.handleSearchChange(E))})("nzChange",function(E){return f(l),u(i.handleChange(E))}),_(25,Ra,22,7,"ng-template",null,2,x)(27,Qa,22,7,"ng-template",null,3,x),r()()}if(n&2){let l=T(26),z=T(28);s(3),L(i.disableApply()?3:-1),s(19),L(i.leftSearch||i.rightSearch?22:-1),s(),ut(b(10,da)),s(),m("nzDataSource",i.list)("nzShowSearch",i.showSearch)("nzShowSelectAll",!1)("nzFilterOption",i.handleFilterOption)("nzRenderList",ht(11,pa,l,z))("nzSortOrder",i.sortOrder)}},dependencies:[Ce,he,ze,q,U,Y,K,xe,$,X,Z,O,V,re,oe,G,H,J,ne,Rt,Nt,St,Lt,wt,kt,vt,Dt,yt,Ft,Ot,Re,ke,ye,Le,It,bt,Mt,te,ee],encapsulation:2,changeDetection:0})}return t})();var Wa=["drawerTitleTemplate"];function ja(t,o){t&1&&(a(0,"div",5)(1,"div",6)(2,"h3",7),d(3,"Not Authorized"),r()()())}function Ja(t,o){t&1&&(p(0),a(1,"h3",13),d(2,"Article Admin Page"),r(),g())}function Ha(t,o){t&1&&(p(0),a(1,"h4",16),h(2,"nz-icon",17),r(),g())}function Ga(t,o){t&1&&(p(0),a(1,"h5",18),d(2,"Do you want to reload all articles?"),r(),g())}function Ua(t,o){t&1&&(a(0,"nz-space",8),_(1,Ha,3,0,"ng-container",9)(2,Ga,3,0,"ng-container",9),r())}function Ya(t,o){if(t&1){let e=A();p(0),a(1,"button",14),C("nzOnConfirm",function(){f(e);let i=c(2);return u(i.selectAll())}),h(2,"nz-icon",15),r(),_(3,Ua,3,0,"ng-template",null,1,x),g()}if(t&2){let e=T(4),n=c(2);s(),m("nzLoading",n.isArticlesLoading())("nzIcon",e)}}function Ka(t,o){if(t&1){let e=A();p(0),a(1,"button",19),C("click",function(){f(e);let i=c(2);return u(i.openTagsFilter())}),h(2,"nz-icon",20),d(3," Tags "),r(),a(4,"nz-badge",21),h(5,"a",22),r(),g()}if(t&2){let e=c(2);s(),m("nzLoading",e.isTagsLoading()),s(3),m("nzCount",e.tagCount())}}function qa(t,o){if(t&1){let e=A();p(0),a(1,"button",19),C("click",function(){f(e);let i=c(2);return u(i.newArticle())}),h(2,"nz-icon",23),d(3," New Article "),r(),g()}if(t&2){let e=c(2);s(),m("nzLoading",e.isArticleLoading())}}function Za(t,o){if(t&1&&(a(0,"div",5)(1,"div",6)(2,"h3",13),d(3),r()()()),t&2){let e=c(2);s(3),F(e.drawerTitle)}}function Xa(t,o){if(t&1){let e=A();a(0,"div",5)(1,"div",6)(2,"nz-space",8),_(3,Ja,3,0,"ng-container",9),r()()(),a(4,"div",5)(5,"div",6)(6,"nz-space",8),_(7,Ya,5,2,"ng-container",9),r()()(),a(8,"div",10)(9,"div",6)(10,"nz-space",8),_(11,Ka,6,2,"ng-container",9),r()()(),a(12,"div",11)(13,"div",6)(14,"nz-space",8),_(15,qa,4,1,"ng-container",9),r()()(),a(16,"app-articles",12),C("nzSetPage",function(i){f(e);let l=c();return u(l.onPageOffsetChange(i))})("nzSetPageSize",function(i){f(e);let l=c();return u(l.onPageLimitChange(i))})("nzEditTags",function(i){f(e);let l=c();return u(l.linkTags(i))})("nzDeleteArticle",function(i){f(e);let l=c();return u(l.handleDeleteArticle(i))})("nzEditArticle",function(i){f(e);let l=c();return u(l.handleEditArticle(i))})("nzMonacoEditArticle",function(i){f(e);let l=c();return u(l.handleMonacoEditArticle(i))}),r(),_(17,Za,4,1,"ng-template",null,0,x)}if(t&2){let e=c();s(16),m("isRouterLinkLoading",e.isRouterLinkLoading)("routerLinkLoadingId",e.routerLinkLoadingId)("articleList",e.articleList)("articlesCount",e.articleCount)("isLoading",e.isArticlesLoading)("articleListConfig",e.articleListConfig)("oldLimit",e.oldLimit)}}var Bm=(()=>{class t{drawerTitleTemplate=fn("drawerTitleTemplate");nzMessageService=S(ie);destroyRef=S(Ne);drawerService=S(vn);#e=S(jt);#t=S(Vt);articleListConfig=this.#t.selectors.articleListConfig;isAuthenticated=this.#t.selectors.isAuthenticated;articleCount=this.#e.selectors.articleCount;articleList=this.#e.selectors.articleList;tagList=this.#e.selectors.tags;errorResponse=this.#e.selectors.errorResponse;user=this.#t.selectors.user;windowWidth=this.#t.selectors.width;windowHeight=this.#t.selectors.height;isArticleLoading=I(!1);isTagsLoading=I(!1);isArticlesLoading=I(!1);isRouterLinkLoading=I(!1);routerLinkLoadingId=I(0);tagCount=_n(()=>this.articleListConfig()?.filters.tags?this.articleListConfig().filters.tags.length:0);oldLimit=I(this.articleListConfig().filters.limit);isLoginPasswordLoading=I(!1);styleThemeMode=this.#t.selectors.styleThemeMode;titleComponentRef=S(Ln);titleTemplate=this.titleComponentRef.instance.componentTpl;drawerTitle="";constructor(){this.titleComponentRef.instance.user=this.user}noCancel(){return new Promise(n=>{try{n(!1)}finally{}})}pageHeaderInfo={title:"Articles Editor",breadcrumb:["Admin","Articles"],desc:`
    You can create, edit and delete articles.
    `};ngOnInit(){if(this.#t.setAdminArticles(!0),this.isAuthenticated()){let e=this.articleListConfig()?.filters;(e?.tags===void 0||e?.tags===null)&&(e?.published===void 0||e?.published===null)&&(e?.createdAtAsc===void 0||e?.createdAtAsc===null)?this.selectAll():(this.#e.getTags(this.isTagsLoading),this.#e.queryArticle({loading:this.isArticlesLoading,params:{limit:e.limit,offset:0,tags:e.tags,published:e.published,createdAtAsc:e.createdAtAsc}}))}}selectAll(){this.#e.getTags(this.isTagsLoading),this.#e.queryArticle({loading:this.isArticlesLoading,params:{limit:10,offset:0}}),this.oldLimit.set(10)}onPageOffsetChange(e){this.#e.onOffsetChange({loading:this.isArticlesLoading,offset:e})}onPageLimitChange(e){this.#e.onLimitChange({loading:this.isArticlesLoading,limit:e})}openTagsFilter(){if(this.isTagsLoading())return;this.isTagsLoading.set(!0),this.drawerTitle="Article Tags";let e=this.articleListConfig()?.filters;this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:gi,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{params:{tagList:this.tagList(),tags:e.tags,published:e.published,createdAtAsc:e.createdAtAsc}}}).afterClose.subscribe(i=>{if(i){let l=this.articleListConfig()?.filters;this.#e.queryArticle({loading:this.isArticlesLoading,params:le(ae({},i),{limit:l.limit,offset:0})})}this.isTagsLoading.set(!1)})}linkTags(e){if(this.isTagsLoading())return;this.isTagsLoading.set(!0),this.drawerTitle="Create/Edit Tags",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:pi,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,tagList:this.#e.selectors.tags,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse}});n.afterExecute.pipe(_e(this.destroyRef)).subscribe(i=>{i?(this.#e.resetErrorResponse(),i.form?i.tagId?this.#e.editTag({loading:i.loading,tagId:i.tagId,form:i.form}):this.#e.createTag({loading:i.loading,form:i.form}):i.tagId?this.#e.deleteTag({loading:i.loading,tagId:i.tagId}):i.articleId&&this.#e.getArticleDetails({loading:i.loading,articleId:i.articleId})):this.confirmPassword()}),n.afterClose.subscribe(i=>{!i&&i!==null?(this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0)):(this.#e.linkTags({loading:this.isRouterLinkLoading,articleTags:{tags:i,articleId:e.id}}),this.routerLinkLoadingId.set(0)),this.isTagsLoading.set(!1)})}monacoArticle(e){if(this.isArticleLoading())return;this.isArticleLoading.set(!0),this.drawerTitle=e?"Edit Article":"New Article",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:ci,nzWidth:this.windowWidth()-15,nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{isDarkTheme:this.styleThemeMode()==="dark",article:e,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse,windowWidth:this.windowWidth,windowHeight:this.windowHeight}});n.afterExecute.pipe(_e(this.destroyRef)).subscribe(i=>{i?i.form&&(i.articleId?this.#e.editArticle({loading:i.loading,form:i.form,articleId:i.articleId,published:i.published}):this.#e.createArticle({loading:i.loading,form:i.form,published:i.published})):this.confirmPassword()}),n.afterClose.subscribe(()=>{this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0),this.isArticleLoading.set(!1)})}editArticle(e){if(this.isArticleLoading())return;this.isArticleLoading.set(!0),this.drawerTitle=e?"Edit Article":"New Article",this.#e.resetErrorResponse();let n=this.drawerService.create({nzTitle:this.drawerTitleTemplate(),nzContent:ti,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{article:e,currentArticle:this.#e.selectors.currentArticle,errorResponse:this.errorResponse}});n.afterExecute.pipe(_e(this.destroyRef)).subscribe(i=>{i?i.form&&(i.articleId?this.#e.editArticle({loading:i.loading,form:i.form,articleId:i.articleId,published:i.published}):this.#e.createArticle({loading:i.loading,form:i.form,published:i.published})):this.confirmPassword()}),n.afterClose.subscribe(()=>{this.isRouterLinkLoading.set(!1),this.routerLinkLoadingId.set(0),this.isArticleLoading.set(!1)})}newArticle(){this.editArticle(null)}handleEditArticle(e){this.editArticle(e)}handleMonacoEditArticle(e){this.monacoArticle(e)}handleDeleteArticle(e){this.nzMessageService.info("Deleting article..."),this.#e.deleteArticle({loading:this.isRouterLinkLoading,articleId:e.id}),this.routerLinkLoadingId.set(0)}confirmPassword(){if(this.isLoginPasswordLoading())return;this.isLoginPasswordLoading.set(!0),this.#t.resetErrorResponse();let e=this.drawerService.create({nzTitle:this.titleTemplate,nzContent:kn,nzWidth:this.windowWidth()>600?600:this.windowWidth(),nzClosable:!1,nzOnCancel:this.noCancel,nzContentParams:{user:this.#t.selectors.user,errorResponse:this.#t.selectors.errorResponse,messages:{cancelButton:"Close",cancelButtonMessage:"Do you want to close without confirming the password?"}}});e.afterExecute.pipe(_e(this.destroyRef)).subscribe(n=>{n&&this.#t.loginPassword({loading:n.loading,form:n.form})}),e.afterClose.subscribe(n=>{this.#e.resetErrorResponse(),n&&this.#t.resetErrorResponse(),this.isLoginPasswordLoading.set(!1)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=N({type:t,selectors:[["app-article-listing"]],viewQuery:function(n,i){n&1&&an(i.drawerTitleTemplate,Wa,5),n&2&&ln()},features:[mn([yn(jt)])],decls:5,vars:3,consts:[["drawerTitleTemplate",""],["applyTpl",""],[3,"pageHeaderInfo"],[1,"normal-table-wrap","bg-color-no","p-b-50"],[1,"m-b-20",3,"nzBordered"],["nz-row","","nzJustify","center"],["nz-col",""],["nz-typography","","nzType","danger"],["nzSize","small","nzAlign","baseline"],[4,"nzSpaceItem"],["nz-row","","nzJustify","end"],["nz-row","","nzJustify","start"],[3,"nzSetPage","nzSetPageSize","nzEditTags","nzDeleteArticle","nzEditArticle","nzMonacoEditArticle","isRouterLinkLoading","routerLinkLoadingId","articleList","articlesCount","isLoading","articleListConfig","oldLimit"],["nz-typography","","nzType","warning"],["nz-button","","nzType","primary","nzShape","circle","nz-popconfirm","","nzPopconfirmTitle"," ","nzPopconfirmShowArrow","false","nzOkText","Yes","nzCancelText","No",3,"nzOnConfirm","nzLoading","nzIcon"],["nzType","sync"],["nz-typography","","nzType","success"],["nzType","question-circle-o"],["nz-typography",""],["nz-button","","nzType","primary","nzShape","round",3,"click","nzLoading"],["nzType","tag"],[3,"nzCount"],[1,"head-example"],["nzType","form"]],template:function(n,i){n&1&&(h(0,"app-page-header",2),a(1,"div",3)(2,"nz-card",4),w(3,ja,4,0,"div",5)(4,Xa,19,7),r()()),n&2&&(m("pageHeaderInfo",i.pageHeaderInfo),s(2),m("nzBordered",!0),s(),L(i.isAuthenticated()?4:3))},dependencies:[Wn,ii,On,Vn,q,U,Y,K,we,Se,O,V,re,oe,G,H,J,ne,te,ee,$,X,Z,En,Te],encapsulation:2,changeDetection:0})}return t})();export{Bm as default};
