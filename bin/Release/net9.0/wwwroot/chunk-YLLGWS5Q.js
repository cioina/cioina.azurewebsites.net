import{$a as b,D as it,E as ot,Ha as S,Ka as x,M as st,N as nt,Ta as w,Xb as lt,_a as rt,ib as ft}from"./chunk-PJMLK4ZA.js";import{Ab as f,Da as $,G as j,Hb as Q,Ib as U,J as D,Pa as W,Qa as Z,Ua as H,a as z,ad as tt,b as A,e as B,ec as q,fc as V,ga as O,j as I,ja as P,l as L,oa as R,od as et,q as v,qc as X,r as p,rc as J,ta as F,vc as G,wc as Y,xc as K,z as M,zb as k}from"./chunk-DRX476G4.js";var a=function(o){return o.resize="resize",o.scroll="scroll",o.touchstart="touchstart",o.touchmove="touchmove",o.touchend="touchend",o.pageshow="pageshow",o.load="LOAD",o}(a||{});function at(o){return typeof window<"u"&&o===window}function C(o){return at(o)?{top:0,left:0,bottom:0}:o.getBoundingClientRect()}var pt=["fixedEl"],mt=["*"],ut="affix",d="ant-affix",gt=20,ct=(()=>{let o,N=[],y=[],m,_=[],E=[];return class T{static{let e=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[b()],m=[b()],v(null,null,o,{kind:"field",name:"nzOffsetTop",static:!1,private:!1,access:{has:t=>"nzOffsetTop"in t,get:t=>t.nzOffsetTop,set:(t,i)=>{t.nzOffsetTop=i}},metadata:e},N,y),v(null,null,m,{kind:"field",name:"nzOffsetBottom",static:!1,private:!1,access:{has:t=>"nzOffsetBottom"in t,get:t=>t.nzOffsetBottom,set:(t,i)=>{t.nzOffsetBottom=i}},metadata:e},_,E),e&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})}get target(){let e=this.nzTarget;return(typeof e=="string"?this.document.querySelector(e):e)||window}constructor(e,t,i,s,n,r,l,c,h){this.nzConfigService=t,this.scrollSrv=i,this.ngZone=s,this.platform=n,this.renderer=r,this.nzResizeObserver=l,this.cdr=c,this.directionality=h,this._nzModuleName=ut,this.nzOffsetTop=p(this,N,void 0),this.nzOffsetBottom=(p(this,y),p(this,_,void 0)),this.nzChange=(p(this,E),new W),this.dir="ltr",this.positionChangeSubscription=B.EMPTY,this.offsetChanged$=new L(1),this.destroy$=new I,this.document=F(et),this.placeholderNode=e.nativeElement}ngOnInit(){this.directionality.change?.pipe(O(this.destroy$)).subscribe(e=>{this.dir=e,this.registerListeners(),this.updatePosition({}),this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){let{nzOffsetBottom:t,nzOffsetTop:i,nzTarget:s}=e;(t||i)&&this.offsetChanged$.next(),s&&this.registerListeners()}ngAfterViewInit(){this.registerListeners()}ngOnDestroy(){this.removeListeners()}registerListeners(){if(!this.platform.isBrowser)return;this.removeListeners();let e=this.target===window?this.document.body:this.target;this.positionChangeSubscription=this.ngZone.runOutsideAngular(()=>D(...Object.keys(a).map(t=>j(this.target,t)),this.offsetChanged$.pipe(M(()=>({}))),this.nzResizeObserver.observe(e)).pipe(P(gt,void 0,{trailing:!0}),O(this.destroy$)).subscribe(t=>this.updatePosition(t))),this.timeout=setTimeout(()=>this.updatePosition({}))}removeListeners(){clearTimeout(this.timeout),this.positionChangeSubscription.unsubscribe(),this.destroy$.next(!0),this.destroy$.complete()}getOffset(e,t){let i=e.getBoundingClientRect(),s=C(t),n=this.scrollSrv.getScroll(t,!0),r=this.scrollSrv.getScroll(t,!1),l=this.document.body,c=l.clientTop||0,h=l.clientLeft||0;return{top:i.top-s.top+n-c,left:i.left-s.left+r-h,width:i.width,height:i.height}}setAffixStyle(e,t){let i=this.affixStyle,s=this.target===window;if(e.type===a.scroll&&i&&t&&s||S(i,t))return;let n=!!t,r=this.fixedEl.nativeElement;this.renderer.setStyle(r,"cssText",w(t)),this.affixStyle=t,n?r.classList.add(d):r.classList.remove(d),this.updateRtlClass(),(t&&!i||!t&&i)&&this.nzChange.emit(n)}setPlaceholderStyle(e){let t=this.placeholderStyle;S(e,t)||(this.renderer.setStyle(this.placeholderNode,"cssText",w(e)),this.placeholderStyle=e)}syncPlaceholderStyle(e){if(!this.affixStyle||this.placeholderNode.offsetWidth)return;this.renderer.setStyle(this.placeholderNode,"cssText",""),this.placeholderStyle=void 0;let t={width:this.placeholderNode.offsetWidth,height:this.fixedEl.nativeElement.offsetHeight};this.setAffixStyle(e,z(z({},this.affixStyle),t)),this.setPlaceholderStyle(t)}updatePosition(e){if(!this.platform.isBrowser)return;let t=this.target,i=this.nzOffsetTop,s=this.scrollSrv.getScroll(t,!0),n=this.getOffset(this.placeholderNode,t),r=this.fixedEl.nativeElement,l={width:r.offsetWidth,height:r.offsetHeight},c={top:!1,bottom:!1};typeof i!="number"&&typeof this.nzOffsetBottom!="number"?(c.top=!0,i=0):(c.top=typeof i=="number",c.bottom=typeof this.nzOffsetBottom=="number");let h=C(t),ht=t.innerHeight||t.clientHeight;if(s>=n.top-i&&c.top){let u=n.width??l.width,g=h.top+i;this.setAffixStyle(e,{position:"fixed",top:g,left:h.left+n.left,width:u}),this.setPlaceholderStyle({width:u,height:l.height})}else if(s<=n.top+l.height+this.nzOffsetBottom-ht&&c.bottom){let u=t===window?0:window.innerHeight-h.bottom,g=n.width??l.width;this.setAffixStyle(e,{position:"fixed",bottom:u+this.nzOffsetBottom,left:h.left+n.left,width:g}),this.setPlaceholderStyle({width:g,height:n.height})}else e.type===a.resize&&this.affixStyle&&this.affixStyle.position==="fixed"&&this.placeholderNode.offsetWidth?this.setAffixStyle(e,A(z({},this.affixStyle),{width:this.placeholderNode.offsetWidth})):this.setAffixStyle(e),this.setPlaceholderStyle();e.type===a.resize&&this.syncPlaceholderStyle(e)}updateRtlClass(){let e=this.fixedEl.nativeElement;this.dir==="rtl"?e.classList.contains(d)?e.classList.add(`${d}-rtl`):e.classList.remove(`${d}-rtl`):e.classList.remove(`${d}-rtl`)}static{this.\u0275fac=function(t){return new(t||T)(f(H),f(rt),f(ft),f(Z),f(it),f(k),f(lt),f(tt),f(st))}}static{this.\u0275cmp=Q({type:T,selectors:[["nz-affix"]],viewQuery:function(t,i){if(t&1&&G(pt,7),t&2){let s;Y(s=K())&&(i.fixedEl=s.first)}},inputs:{nzTarget:"nzTarget",nzOffsetTop:[2,"nzOffsetTop","nzOffsetTop",x],nzOffsetBottom:[2,"nzOffsetBottom","nzOffsetBottom",x]},outputs:{nzChange:"nzChange"},exportAs:["nzAffix"],features:[$],ngContentSelectors:mt,decls:3,vars:0,consts:[["fixedEl",""]],template:function(t,i){t&1&&(X(),q(0,"div",null,0),J(2),V())},dependencies:[nt,ot],encapsulation:2,changeDetection:0})}}})();var Qt=(()=>{class o{static{this.\u0275fac=function(m){return new(m||o)}}static{this.\u0275mod=U({type:o})}static{this.\u0275inj=R({imports:[ct]})}}return o})();export{ct as a,Qt as b};
